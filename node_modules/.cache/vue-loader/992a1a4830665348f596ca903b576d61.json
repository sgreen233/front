{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\views\\website-page\\components\\RightSection.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\front\\src\\views\\website-page\\components\\RightSection.vue","mtime":1715830118047},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcNCmltcG9ydCB3ZWJBUEkgZnJvbSAnQC9hcGkvd2Vic2l0ZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1JpZ2h0U2VjdGlvbicsDQogIGZpbHRlcnM6IHsNCiAgICBmaWx0ZXJEYXRlVGltZSh2YWwpIHsNCiAgICAgIHJldHVybiBtb21lbnQodmFsKS5mb3JtYXQoJ1lZWVnlubRNTeaciERE5pelJykNCiAgICB9DQogIH0sDQogIGNvbXBvbmVudHM6IHt9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsb2FkaW5nMTogZmFsc2UsDQogICAgICBhY3RpdmUxOiAnMScsDQogICAgICBuZXdzTGlzdDogW10sDQogICAgICBub3RpY2VMaXN0OiBbXSwNCiAgICAgIHNpemU6IDMNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5yZXNpemUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgdHJ1ZSkNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBjb25zdCB0aGF0ID0gdGhpcw0KICAgIHdpbmRvdy5vbnJlc2l6ZSA9ICgpID0+IHsNCiAgICAgIHJldHVybiAoKCkgPT4gew0KICAgICAgICB0aGF0LnJlc2l6ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCBmYWxzZSkNCiAgICAgIH0pKCkNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDkuIDkuKrnroDljZXnmoToh6rpgILlupQNCiAgICByZXNpemUoaGVpZ2h0LCBib29sKSB7DQogICAgICBpZiAoaGVpZ2h0IDwgODkwKSB7DQogICAgICAgIHRoaXMuc2l6ZSA9IDINCiAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0ID4gODkwICYmIGhlaWdodCA8IDEwMDApIHsNCiAgICAgICAgdGhpcy5zaXplID0gMw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zaXplID0gNA0KICAgICAgfQ0KICAgICAgaWYgKGJvb2wpIHsNCiAgICAgICAgdGhpcy5nZXREYXRhKDEpDQogICAgICAgIHRoaXMuZ2V0RGF0YSgyKQ0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgZ2V0RGF0YSh0eXBlKSB7DQogICAgICB0eXBlID09PSAxID8gdGhpcy5sb2FkaW5nMSA9IHRydWUgOiB0aGlzLmxvYWRpbmcyID0gdHJ1ZQ0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgd2ViQVBJLmNvbHVtbkNvbnRlbnQoew0KICAgICAgICAgIGNoYW5uZWxUeXBlSWQ6IHR5cGUgPT09IDEgPyB0aGlzLiRzdG9yZS5zdGF0ZS53ZWJTaXRlLnJvdXRlTGlzdC5maWx0ZXIoZSA9PiBlLm5hbWUgPT09ICdOZXdzQ2VudGVyJylbMF0ubWV0YS5jaGlsZHJlblswXS5pZCA6IHRoaXMuJHN0b3JlLnN0YXRlLndlYlNpdGUucm91dGVMaXN0LmZpbHRlcihlID0+IGUubmFtZSA9PT0gJ05vdGljZScpWzBdLm1ldGEuaWQsDQogICAgICAgICAgcGFnZTogMSwNCiAgICAgICAgICBzaXplOiA0DQogICAgICAgIH0pDQogICAgICAgIHR5cGUgPT09IDEgPyB0aGlzLm5ld3NMaXN0ID0gcmVzLmNvbnRlbnQgOiB0aGlzLm5vdGljZUxpc3QgPSByZXMuY29udGVudA0KICAgICAgICB0eXBlID09PSAxID8gdGhpcy5sb2FkaW5nMSA9IGZhbHNlIDogdGhpcy5sb2FkaW5nMiA9IGZhbHNlDQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICB0eXBlID09PSAxID8gdGhpcy5sb2FkaW5nMSA9IGZhbHNlIDogdGhpcy5sb2FkaW5nMiA9IGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICB0b0RldGFpbChpbmRleCwgaXRlbSkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOiBpbmRleCA9PT0gMSA/ICcvd2Vic2l0ZS9uZXdzQ2VudGVyL25ld3NDZW50ZXJEZXRhaWwnIDogJy93ZWJzaXRlL25vdGljZS9ub3RpY2VEZXRhaWwnLA0KICAgICAgICBxdWVyeTogeyByb3c6IEpTT04uc3RyaW5naWZ5KGl0ZW0pIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBjaGVja01vcmVOZXdzKCkgew0KICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT09ICcvd2Vic2l0ZS9uZXdzQ2VudGVyJykgew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3dlYnNpdGUvbmV3c0NlbnRlcicpDQogICAgICB9DQogICAgfSwNCiAgICBjaGVja01vcmVOb3RpY2UoKSB7DQogICAgICBpZiAodGhpcy4kcm91dGUucGF0aCAhPT0gJy93ZWJzaXRlL25vdGljZScpIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy93ZWJzaXRlL25vdGljZScpDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["RightSection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RightSection.vue","sourceRoot":"src/views/website-page/components","sourcesContent":["<template>\r\n  <!-- 这个组件是除了首页的其他页面右侧固定显示的东西 -->\r\n  <div class=\"RightSection\">\r\n    <!-- 新闻中心 -->\r\n    <div v-loading=\"loading1\" class=\"title\">\r\n      <el-tabs v-model=\"active1\">\r\n        <el-tab-pane label=\"新闻中心\" name=\"1\" />\r\n      </el-tabs>\r\n      <span @click=\"checkMoreNews\">查看更多</span>\r\n      <div class=\"list\">\r\n        <div v-for=\"item in newsList.slice(0, size)\" :key=\"item.id\" class=\"news-item\" @click=\"toDetail(1, item)\">\r\n          <img v-if=\"item.firstImg\" :src=\"item.firstImg\" alt=\"加载失败\" />\r\n          <div v-else class=\"img\"><i class=\"el-icon-picture-outline\" />\r\n            <div>暂无图片</div>\r\n          </div>\r\n          <div class=\"right\">\r\n            <div class=\"right-title\" :title=\"item.channelCName\">{{ item.channelCName }}</div>\r\n            <div class=\"right-time\">{{ item.channelCTime | filterDateTime }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 通知公告 -->\r\n    <div v-loading=\"loading2\" class=\"title\">\r\n      <el-tabs v-model=\"active1\">\r\n        <el-tab-pane label=\"通知公告\" name=\"1\" />\r\n      </el-tabs>\r\n      <span @click=\"checkMoreNotice\">查看更多</span>\r\n      <div class=\"list\">\r\n        <div v-for=\"item in noticeList.slice(0, size)\" :key=\"item.id\" class=\"notice-item\" @click=\"toDetail(2, item)\">\r\n          <div class=\"right-time\">{{ item.channelCTime | filterDateTime }}</div>\r\n          <div class=\"right-title\" :title=\"item.channelCName\">{{ item.channelCName }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport moment from 'moment'\r\nimport webAPI from '@/api/website'\r\nexport default {\r\n  name: 'RightSection',\r\n  filters: {\r\n    filterDateTime(val) {\r\n      return moment(val).format('YYYY年MM月DD日')\r\n    }\r\n  },\r\n  components: {},\r\n  data() {\r\n    return {\r\n      loading1: false,\r\n      active1: '1',\r\n      newsList: [],\r\n      noticeList: [],\r\n      size: 3\r\n    }\r\n  },\r\n  created() {\r\n    this.resize(document.documentElement.clientHeight, true)\r\n  },\r\n  mounted() {\r\n    const that = this\r\n    window.onresize = () => {\r\n      return (() => {\r\n        that.resize(document.documentElement.clientHeight, false)\r\n      })()\r\n    }\r\n  },\r\n  methods: {\r\n    // 一个简单的自适应\r\n    resize(height, bool) {\r\n      if (height < 890) {\r\n        this.size = 2\r\n      } else if (height > 890 && height < 1000) {\r\n        this.size = 3\r\n      } else {\r\n        this.size = 4\r\n      }\r\n      if (bool) {\r\n        this.getData(1)\r\n        this.getData(2)\r\n      }\r\n    },\r\n    async getData(type) {\r\n      type === 1 ? this.loading1 = true : this.loading2 = true\r\n      try {\r\n        const res = await webAPI.columnContent({\r\n          channelTypeId: type === 1 ? this.$store.state.webSite.routeList.filter(e => e.name === 'NewsCenter')[0].meta.children[0].id : this.$store.state.webSite.routeList.filter(e => e.name === 'Notice')[0].meta.id,\r\n          page: 1,\r\n          size: 4\r\n        })\r\n        type === 1 ? this.newsList = res.content : this.noticeList = res.content\r\n        type === 1 ? this.loading1 = false : this.loading2 = false\r\n      } catch (error) {\r\n        type === 1 ? this.loading1 = false : this.loading2 = false\r\n      }\r\n    },\r\n    toDetail(index, item) {\r\n      this.$router.push({\r\n        path: index === 1 ? '/website/newsCenter/newsCenterDetail' : '/website/notice/noticeDetail',\r\n        query: { row: JSON.stringify(item) }\r\n      })\r\n    },\r\n    checkMoreNews() {\r\n      if (this.$route.path !== '/website/newsCenter') {\r\n        this.$router.push('/website/newsCenter')\r\n      }\r\n    },\r\n    checkMoreNotice() {\r\n      if (this.$route.path !== '/website/notice') {\r\n        this.$router.push('/website/notice')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.RightSection {\r\n  font-family: PingFang SC;\r\n  width: 340px;\r\n  margin: 10px 0 20px;\r\n  .title + .title {\r\n    margin-top: 44px;\r\n  }\r\n  .title {\r\n    width: 100%;\r\n    position: relative;\r\n    span {\r\n      position: absolute;\r\n      font-size: 14px;\r\n      color: #999999;\r\n      right: 0;\r\n      top: 8px;\r\n      cursor: pointer;\r\n    }\r\n    .el-tabs__item.is-active {\r\n      font-weight: 700;\r\n      color: #000000;\r\n      font-size: 18px;\r\n      line-height: 30px;\r\n    }\r\n    .el-tabs__active-bar {\r\n      background-color: #3776ff;\r\n      width: 72px !important;\r\n    }\r\n    .list {\r\n      .news-item + .news-item {\r\n        margin-top: 32px;\r\n        position: relative;\r\n        &::after {\r\n          content: \"\";\r\n          position: absolute;\r\n          height: 1px;\r\n          width: 340px;\r\n          background-color: #f2f2f2;\r\n          top: -16px;\r\n        }\r\n      }\r\n      .news-item {\r\n        display: flex;\r\n        cursor: pointer;\r\n        &:hover {\r\n          .right {\r\n            .right-title {\r\n              color: #3776ff;\r\n            }\r\n          }\r\n        }\r\n        img {\r\n          width: 100px;\r\n          height: 64px;\r\n          border-radius: 4px;\r\n          object-fit: cover;\r\n        }\r\n        .img {\r\n          background-color: #f5f7fa;\r\n          width: 100px;\r\n          height: 64px;\r\n          border-radius: 4px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #ccc;\r\n          i {\r\n            font-size: 20px;\r\n            margin-bottom: 10px;\r\n          }\r\n          div {\r\n            font-size: 12px;\r\n          }\r\n        }\r\n        .right {\r\n          position: relative;\r\n          margin-left: 15px;\r\n          .right-title {\r\n            width: 230px;\r\n            word-break: break-all;\r\n            text-overflow: ellipsis;\r\n            overflow: hidden;\r\n            display: -webkit-box;\r\n            -webkit-line-clamp: 2;\r\n            -webkit-box-orient: vertical;\r\n            font-size: 14px;\r\n            color: #333333;\r\n            transition: 0.3s;\r\n          }\r\n          .right-time {\r\n            position: absolute;\r\n            color: #666666;\r\n            font-size: 12px;\r\n            bottom: 4px;\r\n          }\r\n        }\r\n      }\r\n      .notice-item {\r\n        cursor: pointer;\r\n        &:hover {\r\n          .right-title {\r\n            color: #3776ff;\r\n          }\r\n        }\r\n        .right-time {\r\n          color: #666666;\r\n          font-size: 12px;\r\n        }\r\n        .right-title {\r\n          width: 340px;\r\n          word-break: break-all;\r\n          text-overflow: ellipsis;\r\n          overflow: hidden;\r\n          display: -webkit-box;\r\n          -webkit-line-clamp: 2;\r\n          -webkit-box-orient: vertical;\r\n          color: #333333;\r\n          font-size: 14px;\r\n          margin-top: 14px;\r\n          transition: 0.3s;\r\n        }\r\n      }\r\n      .notice-item + .notice-item {\r\n        margin-top: 20px;\r\n        position: relative;\r\n        &::before {\r\n          content: \"\";\r\n          position: absolute;\r\n          top: -10px;\r\n          width: 340px;\r\n          height: 1px;\r\n          background-color: #f2f2f2;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}