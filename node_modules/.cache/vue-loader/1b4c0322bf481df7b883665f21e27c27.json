{"remainingRequest":"D:\\software\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\src\\views\\dialogs\\DlgUserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\src\\views\\dialogs\\DlgUserInfo.vue","mtime":1701219271949},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBTaW1wbGVEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL1NpbXBsZURpYWxvZycNCmltcG9ydCBTaW1wbGVTZWxlY3QgZnJvbSAnQC9jb21wb25lbnRzL1NpbXBsZVNlbGVjdCcNCmltcG9ydCB1c2VyQVBJIGZyb20gJ0AvYXBpL3VzZXIuanMnDQppbXBvcnQgbGlzdEFQSSBmcm9tICdAL2FwaS9saXN0Jw0KaW1wb3J0IENPTlNUQU5UIGZyb20gJ0AvY29uc3RhbnQnDQppbXBvcnQgXyBmcm9tICdsb2Rhc2gnDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsgU2ltcGxlRGlhbG9nLCBTaW1wbGVTZWxlY3QgfSwNCiAgcHJvcHM6IHsNCg0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZWZhdWx0TWFpblNEUHJvcHM6IHsNCiAgICAgICAgZm9ybToge30sDQogICAgICAgIGtleVdvcmQ6ICdCYXNlVXNlcicsDQogICAgICAgIGZvcm1JdGVtczogWw0KICAgICAgICAgIHsgbmFtZTogJ+i0puWPtycsIGZpZWxkOiAnYWNjb3VudCcsIHBsYWNlaG9sZGVyOiAn6LSm5Y+35LiN6IO95Li656m6JywgdHlwZTogJ2lucHV0JyB9LA0KICAgICAgICAgIHsgbmFtZTogJ+WvhueggScsIGZpZWxkOiAncGFzc3dvcmQnLCBwbGFjZWhvbGRlcjogJ+WvhueggeS4jeiDveS4uuepuicsIHR5cGU6ICdwYXNzd29yZCcgfSwNCiAgICAgICAgICB7IG5hbWU6ICfouqvku73or4Hlj7cnLCBmaWVsZDogJ2lkQ2FyZCcsIHBsYWNlaG9sZGVyOiAn6Lqr5Lu96K+B5Y+3JywgdHlwZTogJ2lucHV0JyB9LA0KICAgICAgICAgIHsgbmFtZTogJ+Wnk+WQjScsIGZpZWxkOiAnbmFtZScsIHBsYWNlaG9sZGVyOiAn5aeT5ZCN5LiN6IO95Li656m6JywgdHlwZTogJ2lucHV0JyB9LA0KICAgICAgICAgIHsgbmFtZTogJ+aAp+WIqycsIGZpZWxkOiAnc2V4JywgdHlwZTogJ3NlbGVjdF9ub3JlbW90ZScsIG9wdGlvbnM6IFt7IGlkOiAn55S3JywgbmFtZTogJ+eUtycgfSwgeyBpZDogJ+WlsycsIG5hbWU6ICflpbMnIH1dIH0sDQogICAgICAgICAgeyBuYW1lOiAn5Y2V5L2N6YOo6ZeoJywgZmllbGQ6ICdkZXBhcnRtZW50SWQnLCBrZXlXb3JkczogJ0Jhc2VEZXBhcnRtZW50JywgdHlwZTogJ2Nhc2NhZGVyJyB9LA0KICAgICAgICAgIHsgbmFtZTogJ+i6q+S7veexu+WeiycsIGZpZWxkOiAnam9iSWQnLCBrZXlXb3JkczogJ0Jhc2VKb2JQb3NpdGlvbicsIHR5cGU6ICdzZWxlY3QnIH0sDQogICAgICAgICAgeyBuYW1lOiAn5omL5py65Y+3JywgZmllbGQ6ICdwaG9uZScsIHBsYWNlaG9sZGVyOiAn5omL5py65Y+35LiN6IO95Li656m6JywgdHlwZTogJ2lucHV0JyB9LA0KICAgICAgICAgIHsgbmFtZTogJ+Wkh+azqCcsIGZpZWxkOiAncmVtYXJrcycsIHR5cGU6ICd0ZXh0YXJlYScgfQ0KICAgICAgICBdLA0KICAgICAgICBmb3JtUnVsZXM6IHsNCiAgICAgICAgICBhY2NvdW50OiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+i0puWPt+S4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgICAvLyBwYXNzd29yZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflr4bnoIHkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgICAgcGhvbmU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5omL5py65Y+35LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH1dLA0KICAgICAgICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5aeT5ZCN5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH1dDQogICAgICAgIH0sDQogICAgICAgIGRlZmF1bHREQlByb3BzOiB7DQoNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGZvcm06IHt9LA0KICAgICAgY29udGVzdFNlYXJjaEtleXM6IHsgdGhlTGV2ZWw6IDIgfSwNCiAgICAgIHVuaXZlcnNpdHlTZWFyY2hLZXlzOiB7IHRoZUxldmVsOiAyIH0sDQogICAgICBleHBlcnRTZWFyY2hLZXlzOiB7IHRoZUxldmVsOiAyIH0sDQogICAgICBpc0NvbnRlc3RBZG1pbjogZmFsc2UsDQogICAgICBpc1VuaXZlcnNpdHlBZG1pbjogZmFsc2UsDQogICAgICBpc0V4cGVydDogZmFsc2UNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBzaG93RGlhbG9nKHZhbCwgZm9ybSA9IHt9KSB7DQogICAgICB0aGlzLmZvcm0gPSBfLmNsb25lRGVlcChmb3JtKSAvLyDmiZPlvIDnmoTml7blgJnnlKhjbG9uZURlZXDvvIzov5nmoLflpJblsYLkvKDnmoTml7blgJnlsLHnm7TmjqXkvKByb3flsLHlj6/ku6XkuoYNCiAgICAgIGF3YWl0IHRoaXMuaW5pdFNvbWVWYWx1ZXModGhpcy5mb3JtLmlkKQ0KICAgICAgdGhpcy4kcmVmcy5zaW1wbGVEbGcuc2hvd0RpYWxvZyh2YWwsIHRoaXMuZm9ybSwgdHJ1ZSkNCiAgICB9LA0KICAgIGFzeW5jIGdldENvbnRlc3RSZWxhdGlvbih1c2VySWQpIHsNCiAgICAgIC8vIOagueaNruinkuiJsuaDheWGteWIneWni+WMluWPpuWkluS4ieS4quernui1m+WFs+iBlA0KICAgICAgaWYgKHRoaXMuZm9ybS5yb2xlSWRzLmluZGV4T2YoQ09OU1RBTlQuUk9MRV9UQUJMRS5DT05URVNUX0FETUlOKSAhPT0gLTEpIHsNCiAgICAgICAgdGhpcy5pc0NvbnRlc3RBZG1pbiA9IHRydWUNCiAgICAgICAgY29uc3QgcmVzMiA9IGF3YWl0IGxpc3RBUEkuZ2V0U29tZVJlY29yZHMoew0KICAgICAgICAgIGtleVdvcmRzOiAnUmVsVXNlckNvbnRlc3RUeXBlJywNCiAgICAgICAgICBzZWFyY2hLZXk6IHsgdXNlcklkOiB1c2VySWQsIHJvbGVJZDogQ09OU1RBTlQuUk9MRV9UQUJMRS5DT05URVNUX0FETUlOIH0NCiAgICAgICAgfSkNCiAgICAgICAgaWYgKHJlczIuZGF0YS5jb250ZW50Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAnY29udGVzdFR5cGUxJywgcmVzMi5kYXRhLmNvbnRlbnQubWFwKGl0ZW0gPT4gaXRlbS50eXBlSWQpKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm0sICdjb250ZXN0VHlwZTEnLCBudWxsKQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmlzQ29udGVzdEFkbWluID0gZmFsc2UNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmZvcm0ucm9sZUlkcy5pbmRleE9mKENPTlNUQU5ULlJPTEVfVEFCTEUuVU5JVkVSU0lUWV9BRE1JTikgIT09IC0xKSB7DQogICAgICAgIHRoaXMuaXNVbml2ZXJzaXR5QWRtaW4gPSB0cnVlDQogICAgICAgIGNvbnN0IHJlczIgPSBhd2FpdCBsaXN0QVBJLmdldFNvbWVSZWNvcmRzKHsNCiAgICAgICAgICBrZXlXb3JkczogJ1JlbFVzZXJDb250ZXN0VHlwZScsDQogICAgICAgICAgc2VhcmNoS2V5OiB7IHVzZXJJZDogdXNlcklkLCByb2xlSWQ6IENPTlNUQU5ULlJPTEVfVEFCTEUuVU5JVkVSU0lUWV9BRE1JTiB9DQogICAgICAgIH0pDQogICAgICAgIGlmIChyZXMyLmRhdGEuY29udGVudC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybSwgJ2NvbnRlc3RUeXBlMicsIHJlczIuZGF0YS5jb250ZW50Lm1hcChpdGVtID0+IGl0ZW0udHlwZUlkKSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAnY29udGVzdFR5cGUyJywgbnVsbCkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5pc1VuaXZlcnNpdHlBZG1pbiA9IGZhbHNlDQogICAgICB9DQogICAgICBpZiAodGhpcy5mb3JtLnJvbGVJZHMuaW5kZXhPZihDT05TVEFOVC5ST0xFX1RBQkxFLkVYUEVSVCkgIT09IC0xKSB7DQogICAgICAgIHRoaXMuaXNFeHBlcnQgPSB0cnVlDQogICAgICAgIGNvbnN0IHJlczIgPSBhd2FpdCBsaXN0QVBJLmdldFNvbWVSZWNvcmRzKHsNCiAgICAgICAgICBrZXlXb3JkczogJ1JlbFVzZXJDb250ZXN0VHlwZScsDQogICAgICAgICAgc2VhcmNoS2V5OiB7IHVzZXJJZDogdXNlcklkLCByb2xlSWQ6IENPTlNUQU5ULlJPTEVfVEFCTEUuRVhQRVJUIH0NCiAgICAgICAgfSkNCiAgICAgICAgaWYgKHJlczIuZGF0YS5jb250ZW50Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAnY29udGVzdFR5cGUzJywgcmVzMi5kYXRhLmNvbnRlbnQubWFwKGl0ZW0gPT4gaXRlbS50eXBlSWQpKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm0sICdjb250ZXN0VHlwZTMnLCBudWxsKQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmlzRXhwZXJ0ID0gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGluaXRTb21lVmFsdWVzKHVzZXJJZCkgew0KICAgICAgaWYgKHVzZXJJZCkgew0KICAgICAgICBjb25zdCByZXMxID0gYXdhaXQgdXNlckFQSS5nZXRVc2VyUm9sZXModXNlcklkKQ0KICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAncm9sZUlkcycsIHJlczEuZGF0YS5tYXAoaXRlbSA9PiBpdGVtLmlkKSkNCiAgICAgICAgYXdhaXQgdGhpcy5nZXRDb250ZXN0UmVsYXRpb24odXNlcklkKQ0KICAgICAgfQ0KICAgICAgLy8g6YeN5paw5YWL6ZqGb2xkRGF0YQ0KICAgICAgLy8gdGhpcy4kcmVmcy5zaW1wbGVEbGcucmVDbG9uZU9sZERhdGEoKQ0KICAgIH0sDQogICAgYXN5bmMgdXBkYXRlUmVjb3JkKCkgew0KICAgICAgdGhpcy4kZW1pdCgndXBkYXRlLXJlY29yZCcpDQogICAgfSwNCiAgICBhc3luYyBjb25maXJtKG9wdGlvbiwgdHlwZSwgZm9ybSkgew0KICAgICAgYXdhaXQgdXNlckFQSS5lZGl0VXNlckluZm8oZm9ybS5pZCwgZm9ybSkNCiAgICAgIGF3YWl0IHRoaXMuY29uZmlybU1vcmUoZm9ybSkNCiAgICB9LA0KICAgIGFzeW5jIGNvbmZpcm1Nb3JlKGRhdGEpIHsNCiAgICAgIGF3YWl0IHVzZXJBUEkuc2F2ZVVzZXJSb2xlcyhkYXRhLmlkLCB0aGlzLmZvcm0ucm9sZUlkcykNCiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5mb3JtLCAnY29udGVzdFR5cGUxJykgJiYgdGhpcy5mb3JtLmNvbnRlc3RUeXBlMSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGF3YWl0IHVzZXJBUEkuc2F2ZVVzZXJDb250ZXN0KGRhdGEuaWQsIENPTlNUQU5ULlJPTEVfVEFCTEUuQ09OVEVTVF9BRE1JTiwgdGhpcy5mb3JtLmNvbnRlc3RUeXBlMSkNCiAgICAgIH0NCiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5mb3JtLCAnY29udGVzdFR5cGUyJykgJiYgdGhpcy5mb3JtLmNvbnRlc3RUeXBlMiAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGF3YWl0IHVzZXJBUEkuc2F2ZVVzZXJDb250ZXN0KGRhdGEuaWQsIENPTlNUQU5ULlJPTEVfVEFCTEUuVU5JVkVSU0lUWV9BRE1JTiwgdGhpcy5mb3JtLmNvbnRlc3RUeXBlMikNCiAgICAgIH0NCiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5mb3JtLCAnY29udGVzdFR5cGUzJykgJiYgdGhpcy5mb3JtLmNvbnRlc3RUeXBlMyAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGF3YWl0IHVzZXJBUEkuc2F2ZVVzZXJDb250ZXN0KGRhdGEuaWQsIENPTlNUQU5ULlJPTEVfVEFCTEUuRVhQRVJULCB0aGlzLmZvcm0uY29udGVzdFR5cGUzKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBvblNlbFJvbGVzKHZhbCkgew0KICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybSwgJ3JvbGVJZHMnLCB2YWwpDQogICAgICB0aGlzLmdldENvbnRlc3RSZWxhdGlvbih0aGlzLmZvcm0uaWQpDQogICAgfSwNCiAgICBhc3luYyBvblNlbENvbnRlc3RUeXBlMSh2YWwpIHsNCiAgICAgIHRoaXMuZm9ybS5jb250ZXN0VHlwZTEgPSB2YWwNCiAgICB9LA0KICAgIGFzeW5jIG9uU2VsQ29udGVzdFR5cGUyKHZhbCkgew0KICAgICAgdGhpcy5mb3JtLmNvbnRlc3RUeXBlMiA9IHZhbA0KICAgIH0sDQogICAgYXN5bmMgb25TZWxDb250ZXN0VHlwZTModmFsKSB7DQogICAgICB0aGlzLmZvcm0uY29udGVzdFR5cGUzID0gdmFsDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["DlgUserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DlgUserInfo.vue","sourceRoot":"src/views/dialogs","sourcesContent":["<template>\r\n  <div>\r\n    <!-- :simpledialog-confirm-more=\"confirmMore\" -->\r\n    <SimpleDialog ref=\"simpleDlg\" :default-props=\"defaultMainSDProps\" :simpledialog-confirm=\"confirm\" @update-record=\"updateRecord\">\r\n      <template slot=\"otherItems\">\r\n        <el-form-item label=\"角色\"><SimpleSelect ref=\"spsRole\" v-model=\"form.roleIds\" multiple key-words=\"SysRole\" @update-value=\"onSelRoles\" /></el-form-item>\r\n        <el-form-item v-if=\"isContestAdmin\" label=\"竞赛管理员\"><SimpleSelect ref=\"spsContestType1\" v-model=\"form.contestType1\" multiple key-words=\"BaseContestType\" :search-key=\"contestSearchKeys\" :auto-select=\"false\" @update-value=\"onSelContestType1\" /></el-form-item>\r\n        <el-form-item v-if=\"isUniversityAdmin\" label=\"校级管理员\"><SimpleSelect ref=\"spsContestType2\" v-model=\"form.contestType2\" multiple key-words=\"BaseContestType\" :search-key=\"universitySearchKeys\" :auto-select=\"false\" @update-value=\"onSelContestType2\" /></el-form-item>\r\n        <el-form-item v-if=\"isExpert\" label=\"专家\"><SimpleSelect ref=\"spsContestType3\" v-model=\"form.contestType3\" multiple key-words=\"BaseContestType\" :search-key=\"expertSearchKeys\" :auto-select=\"false\" @update-value=\"onSelContestType3\" /></el-form-item>\r\n      </template>\r\n    </SimpleDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport SimpleDialog from '@/components/SimpleDialog'\r\nimport SimpleSelect from '@/components/SimpleSelect'\r\nimport userAPI from '@/api/user.js'\r\nimport listAPI from '@/api/list'\r\nimport CONSTANT from '@/constant'\r\nimport _ from 'lodash'\r\nexport default {\r\n  components: { SimpleDialog, SimpleSelect },\r\n  props: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      defaultMainSDProps: {\r\n        form: {},\r\n        keyWord: 'BaseUser',\r\n        formItems: [\r\n          { name: '账号', field: 'account', placeholder: '账号不能为空', type: 'input' },\r\n          { name: '密码', field: 'password', placeholder: '密码不能为空', type: 'password' },\r\n          { name: '身份证号', field: 'idCard', placeholder: '身份证号', type: 'input' },\r\n          { name: '姓名', field: 'name', placeholder: '姓名不能为空', type: 'input' },\r\n          { name: '性别', field: 'sex', type: 'select_noremote', options: [{ id: '男', name: '男' }, { id: '女', name: '女' }] },\r\n          { name: '单位部门', field: 'departmentId', keyWords: 'BaseDepartment', type: 'cascader' },\r\n          { name: '身份类型', field: 'jobId', keyWords: 'BaseJobPosition', type: 'select' },\r\n          { name: '手机号', field: 'phone', placeholder: '手机号不能为空', type: 'input' },\r\n          { name: '备注', field: 'remarks', type: 'textarea' }\r\n        ],\r\n        formRules: {\r\n          account: [{ required: true, message: '账号不能为空', trigger: 'blur' }],\r\n          // password: [{ required: true, message: '密码不能为空', trigger: 'blur' }],\r\n          phone: [{ required: true, message: '手机号不能为空', trigger: 'blur' }],\r\n          name: [{ required: true, message: '姓名不能为空', trigger: 'blur' }]\r\n        },\r\n        defaultDBProps: {\r\n\r\n        }\r\n      },\r\n      form: {},\r\n      contestSearchKeys: { theLevel: 2 },\r\n      universitySearchKeys: { theLevel: 2 },\r\n      expertSearchKeys: { theLevel: 2 },\r\n      isContestAdmin: false,\r\n      isUniversityAdmin: false,\r\n      isExpert: false\r\n    }\r\n  },\r\n  methods: {\r\n    async showDialog(val, form = {}) {\r\n      this.form = _.cloneDeep(form) // 打开的时候用cloneDeep，这样外层传的时候就直接传row就可以了\r\n      await this.initSomeValues(this.form.id)\r\n      this.$refs.simpleDlg.showDialog(val, this.form, true)\r\n    },\r\n    async getContestRelation(userId) {\r\n      // 根据角色情况初始化另外三个竞赛关联\r\n      if (this.form.roleIds.indexOf(CONSTANT.ROLE_TABLE.CONTEST_ADMIN) !== -1) {\r\n        this.isContestAdmin = true\r\n        const res2 = await listAPI.getSomeRecords({\r\n          keyWords: 'RelUserContestType',\r\n          searchKey: { userId: userId, roleId: CONSTANT.ROLE_TABLE.CONTEST_ADMIN }\r\n        })\r\n        if (res2.data.content.length > 0) {\r\n          this.$set(this.form, 'contestType1', res2.data.content.map(item => item.typeId))\r\n        } else {\r\n          this.$set(this.form, 'contestType1', null)\r\n        }\r\n      } else {\r\n        this.isContestAdmin = false\r\n      }\r\n      if (this.form.roleIds.indexOf(CONSTANT.ROLE_TABLE.UNIVERSITY_ADMIN) !== -1) {\r\n        this.isUniversityAdmin = true\r\n        const res2 = await listAPI.getSomeRecords({\r\n          keyWords: 'RelUserContestType',\r\n          searchKey: { userId: userId, roleId: CONSTANT.ROLE_TABLE.UNIVERSITY_ADMIN }\r\n        })\r\n        if (res2.data.content.length > 0) {\r\n          this.$set(this.form, 'contestType2', res2.data.content.map(item => item.typeId))\r\n        } else {\r\n          this.$set(this.form, 'contestType2', null)\r\n        }\r\n      } else {\r\n        this.isUniversityAdmin = false\r\n      }\r\n      if (this.form.roleIds.indexOf(CONSTANT.ROLE_TABLE.EXPERT) !== -1) {\r\n        this.isExpert = true\r\n        const res2 = await listAPI.getSomeRecords({\r\n          keyWords: 'RelUserContestType',\r\n          searchKey: { userId: userId, roleId: CONSTANT.ROLE_TABLE.EXPERT }\r\n        })\r\n        if (res2.data.content.length > 0) {\r\n          this.$set(this.form, 'contestType3', res2.data.content.map(item => item.typeId))\r\n        } else {\r\n          this.$set(this.form, 'contestType3', null)\r\n        }\r\n      } else {\r\n        this.isExpert = false\r\n      }\r\n    },\r\n    async initSomeValues(userId) {\r\n      if (userId) {\r\n        const res1 = await userAPI.getUserRoles(userId)\r\n        this.$set(this.form, 'roleIds', res1.data.map(item => item.id))\r\n        await this.getContestRelation(userId)\r\n      }\r\n      // 重新克隆oldData\r\n      // this.$refs.simpleDlg.reCloneOldData()\r\n    },\r\n    async updateRecord() {\r\n      this.$emit('update-record')\r\n    },\r\n    async confirm(option, type, form) {\r\n      await userAPI.editUserInfo(form.id, form)\r\n      await this.confirmMore(form)\r\n    },\r\n    async confirmMore(data) {\r\n      await userAPI.saveUserRoles(data.id, this.form.roleIds)\r\n      if (Object.prototype.hasOwnProperty.call(this.form, 'contestType1') && this.form.contestType1 !== undefined) {\r\n        await userAPI.saveUserContest(data.id, CONSTANT.ROLE_TABLE.CONTEST_ADMIN, this.form.contestType1)\r\n      }\r\n      if (Object.prototype.hasOwnProperty.call(this.form, 'contestType2') && this.form.contestType2 !== undefined) {\r\n        await userAPI.saveUserContest(data.id, CONSTANT.ROLE_TABLE.UNIVERSITY_ADMIN, this.form.contestType2)\r\n      }\r\n      if (Object.prototype.hasOwnProperty.call(this.form, 'contestType3') && this.form.contestType3 !== undefined) {\r\n        await userAPI.saveUserContest(data.id, CONSTANT.ROLE_TABLE.EXPERT, this.form.contestType3)\r\n      }\r\n    },\r\n\r\n    onSelRoles(val) {\r\n      this.$set(this.form, 'roleIds', val)\r\n      this.getContestRelation(this.form.id)\r\n    },\r\n    async onSelContestType1(val) {\r\n      this.form.contestType1 = val\r\n    },\r\n    async onSelContestType2(val) {\r\n      this.form.contestType2 = val\r\n    },\r\n    async onSelContestType3(val) {\r\n      this.form.contestType3 = val\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}