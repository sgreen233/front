{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\views\\website-manage\\Content.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\front\\src\\views\\website-manage\\Content.vue","mtime":1715830118046},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRGxnRWRpdENvbnRlbnQgZnJvbSAnLi9jb21wb25lbnRzL0RsZ0VkaXRDb250ZW50Jw0KaW1wb3J0IEJhc2VUcmVlTGlzdCBmcm9tICdAL3ZpZXdzL21hc3Rlci1wYWdlL0Jhc2VUcmVlTGlzdCcNCmltcG9ydCBDT05TVEFOVCBmcm9tICdAL2NvbnN0YW50Jw0KaW1wb3J0IGxpc3QgZnJvbSAnQC9hcGkvbGlzdCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1VzZXInLA0KICBjb21wb25lbnRzOiB7IEJhc2VUcmVlTGlzdCwgRGxnRWRpdENvbnRlbnQgfSwNCiAgcHJvcHM6IHsNCg0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZWZhdWx0UHJvcHM6IHsNCiAgICAgICAgdHJlZVJlbENvbE5hbWU6ICdjaGFubmVsVHlwZUlkJywNCiAgICAgICAgZGVmYXVsdERUTFByb3BzOiB7DQogICAgICAgICAgdGl0bGU6IHsgbWFpblRpdGxlOiAn5YaF5a655YiX6KGoJyB9LA0KICAgICAgICAgIHNvbWVGbGFnczogew0KICAgICAgICAgICAgbm9BZHZhbmNlZFNlYXJjaDogZmFsc2UNCiAgICAgICAgICB9LA0KICAgICAgICAgIHNlYXJjaEl0ZW1zOiBbDQogICAgICAgICAgICB7IG5hbWU6ICfmoIfpopgnLCBmaWVsZDogJ2NoYW5uZWxDTmFtZScsIHR5cGU6ICdpbnB1dCcgfQ0KICAgICAgICAgIF0sDQogICAgICAgICAgZGVmYXVsdERUSFByb3BzOiB7DQogICAgICAgICAgICBrZXlXb3JkOiB7IHZpZXc6ICdNYWluQ2hhbm5lbENvbnRlbnQnLCBlZGl0OiAnTWFpbkNoYW5uZWxDb250ZW50JyB9LA0KICAgICAgICAgICAgYWxsVGFibGVDb2x1bW5zOiB7IH0sDQogICAgICAgICAgICBidXR0b25Qcm9wczogeyB1cGRhdGU6IHsgc2hvdzogdHJ1ZSB9LCBjcmVhdGU6IHsgc2hvdzogdHJ1ZSB9LCBkZWxldGU6IHsgc2hvdzogdHJ1ZSB9LCBleHBvcnQ6IHsgc2hvdzogZmFsc2UgfSwgc2VhcmNoOiB7IHNob3c6IHRydWUgfSwgYmF0Y2hDcmVhdGU6IHsgc2hvdzogZmFsc2UgfX0NCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlZmF1bHREVFByb3BzOiB7DQogICAgICAgICAga2V5V29yZDogJ0Jhc2VDaGFubmVsVHlwZScsDQogICAgICAgICAgdGl0bGU6IHsgbWFpblRpdGxlOiAn5qCP55uu57G75Yir5YiX6KGoJyB9DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICByZWdLZXk6IHsgcm9sZUlkczogQ09OU1RBTlQuU0VBUkNIX09QRVJBVE9SLk5PVF9JTiB9LA0KICAgICAgdHlwZUlkOiBudWxsLA0KICAgICAgZm9ybToge30NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5hbGxUYWJsZUNvbHVtbnMgPSB0aGlzLmRlZmF1bHRQcm9wcy5kZWZhdWx0RFRMUHJvcHMuZGVmYXVsdERUSFByb3BzLmFsbFRhYmxlQ29sdW1ucw0KICAgIE9iamVjdC5hc3NpZ24odGhpcy5hbGxUYWJsZUNvbHVtbnMsIFsNCiAgICAgIHsgaWQ6IDEsIHNob3dOYW1lOiAn5qCH6aKYJywgdGhlT3JkZXI6IDEsIHRhYmxlQ29sdW1uTmFtZTogJ2NoYW5uZWxDTmFtZScgfSwNCiAgICAgIHsgaWQ6IDIsIHNob3dOYW1lOiAn5Y+R5biD5pe26Ze0JywgdGhlT3JkZXI6IDIsIHRhYmxlQ29sdW1uTmFtZTogJ2NoYW5uZWxDVGltZScsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICB7IGlkOiAzLCBzaG93TmFtZTogJ+eKtuaAgScsIHRoZU9yZGVyOiAzLCB0YWJsZUNvbHVtbk5hbWU6ICdwdWJsaXNoU3RhdHVzJyB9LA0KICAgICAgeyBpZDogNCwgc2hvd05hbWU6ICfpmIXor7vkurrmlbAnLCB0aGVPcmRlcjogNCwgdGFibGVDb2x1bW5OYW1lOiAnaGl0VGltZXMnLCBzb3J0YWJsZTogdHJ1ZSB9DQogICAgXSkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGluaXREYXRhTGlzdCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuYmFzZVRyZWVMaXN0LmluaXREYXRhTGlzdCgpDQogICAgfSwNCiAgICBhcHBlbmRDbGljaygpIHsNCiAgICAgIGlmICghdGhpcy50eXBlSWQpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35YWI6YCJ5oup5YW35L2T5qCP55uu77yBJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmZvcm0gPSB7IGlkOiBudWxsLCB3b3JrSWQ6IG51bGwsIG5hbWU6ICcnLCBjaGFubmVsVHlwZUlkOiB0aGlzLnR5cGVJZCwgZmlsZUxpc3Q6IFtdIH0NCiAgICAgIHRoaXMuJHJlZnMuZGxnQ29udGVudC5zaG93RGlhbG9nKHRydWUsIHRoaXMuZm9ybSkNCiAgICB9LA0KICAgIGFzeW5jIGVkaXRDbGljayh2YWwpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHsgLi4udmFsIH0NCiAgICAgIC8vIOiOt+WPluWbvueJhw0KICAgICAgY29uc3QgaW1ncyA9IGF3YWl0IGxpc3QuZ2V0U29tZVJlY29yZHMoeyBrZXlXb3JkczogJ1N5c09zc0ZpbGUnLCBzZWFyY2hLZXk6IHsgcmVsYXRpb25JZDogdmFsLmlkLCB0eXBlOiAxIH19KQ0KICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybSwgJ2ltYWdlcycsIGltZ3MuZGF0YS5jb250ZW50KQ0KICAgICAgLy8g6I635Y+W6ZmE5Lu2DQogICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGxpc3QuZ2V0U29tZVJlY29yZHMoeyBrZXlXb3JkczogJ1N5c09zc0ZpbGUnLCBzZWFyY2hLZXk6IHsgcmVsYXRpb25JZDogdmFsLmlkLCB0eXBlOiAyIH19KQ0KICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybSwgJ2ZpbGVzJywgZmlsZXMuZGF0YS5jb250ZW50KQ0KICAgICAgdGhpcy4kcmVmcy5kbGdDb250ZW50LnNob3dEaWFsb2codHJ1ZSwgdGhpcy5mb3JtKQ0KICAgIH0sDQogICAgc2V0VHlwZUlkKHZhbCkgew0KICAgICAgdGhpcy50eXBlSWQgPSB2YWwNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Content.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Content.vue","sourceRoot":"src/views/website-manage","sourcesContent":["<template>\r\n  <BaseTreeList ref=\"baseTreeList\" :default-props=\"defaultProps\" @append-click=\"appendClick\" @edit-click=\"editClick\" @set-type=\"setTypeId\">\r\n    <template slot=\"dlg\">\r\n      <DlgEditContent ref=\"dlgContent\" :form=\"form\" @update-record=\"initDataList\" />\r\n    </template>\r\n  </BaseTreeList>\r\n</template>\r\n<script>\r\nimport DlgEditContent from './components/DlgEditContent'\r\nimport BaseTreeList from '@/views/master-page/BaseTreeList'\r\nimport CONSTANT from '@/constant'\r\nimport list from '@/api/list'\r\nexport default {\r\n  name: 'User',\r\n  components: { BaseTreeList, DlgEditContent },\r\n  props: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      defaultProps: {\r\n        treeRelColName: 'channelTypeId',\r\n        defaultDTLProps: {\r\n          title: { mainTitle: '内容列表' },\r\n          someFlags: {\r\n            noAdvancedSearch: false\r\n          },\r\n          searchItems: [\r\n            { name: '标题', field: 'channelCName', type: 'input' }\r\n          ],\r\n          defaultDTHProps: {\r\n            keyWord: { view: 'MainChannelContent', edit: 'MainChannelContent' },\r\n            allTableColumns: { },\r\n            buttonProps: { update: { show: true }, create: { show: true }, delete: { show: true }, export: { show: false }, search: { show: true }, batchCreate: { show: false }}\r\n          }\r\n        },\r\n        defaultDTProps: {\r\n          keyWord: 'BaseChannelType',\r\n          title: { mainTitle: '栏目类别列表' }\r\n        }\r\n      },\r\n      regKey: { roleIds: CONSTANT.SEARCH_OPERATOR.NOT_IN },\r\n      typeId: null,\r\n      form: {}\r\n    }\r\n  },\r\n  created() {\r\n    this.allTableColumns = this.defaultProps.defaultDTLProps.defaultDTHProps.allTableColumns\r\n    Object.assign(this.allTableColumns, [\r\n      { id: 1, showName: '标题', theOrder: 1, tableColumnName: 'channelCName' },\r\n      { id: 2, showName: '发布时间', theOrder: 2, tableColumnName: 'channelCTime', sortable: true },\r\n      { id: 3, showName: '状态', theOrder: 3, tableColumnName: 'publishStatus' },\r\n      { id: 4, showName: '阅读人数', theOrder: 4, tableColumnName: 'hitTimes', sortable: true }\r\n    ])\r\n  },\r\n  methods: {\r\n    async initDataList() {\r\n      this.$refs.baseTreeList.initDataList()\r\n    },\r\n    appendClick() {\r\n      if (!this.typeId) {\r\n        this.$message.error('请先选择具体栏目！')\r\n        return\r\n      }\r\n      this.form = { id: null, workId: null, name: '', channelTypeId: this.typeId, fileList: [] }\r\n      this.$refs.dlgContent.showDialog(true, this.form)\r\n    },\r\n    async editClick(val) {\r\n      this.form = { ...val }\r\n      // 获取图片\r\n      const imgs = await list.getSomeRecords({ keyWords: 'SysOssFile', searchKey: { relationId: val.id, type: 1 }})\r\n      this.$set(this.form, 'images', imgs.data.content)\r\n      // 获取附件\r\n      const files = await list.getSomeRecords({ keyWords: 'SysOssFile', searchKey: { relationId: val.id, type: 2 }})\r\n      this.$set(this.form, 'files', files.data.content)\r\n      this.$refs.dlgContent.showDialog(true, this.form)\r\n    },\r\n    setTypeId(val) {\r\n      this.typeId = val\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}