{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\views\\personal-information-manage\\Personal.vue?vue&type=style&index=0&id=4f199836&lang=scss&scoped=true&","dependencies":[{"path":"D:\\software\\front\\front\\src\\views\\personal-information-manage\\Personal.vue","mtime":1715830118045},{"path":"D:\\software\\front\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1715830112594},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1715830117510},{"path":"D:\\software\\front\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1715830115271},{"path":"D:\\software\\front\\front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1715830116699},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpAaW1wb3J0ICJ+QC9hc3NldHMvY3NzL2VsZW1lbnQtdmFyaWFibGVzLnNjc3MiOw0KLmVsLWZvcm0gew0KICB3aWR0aDogZml0LWNvbnRlbnQ7DQogIG1hcmdpbi1sZWZ0OiAxMiU7DQp9DQoucGVyc29uYWwtZm9ybSB7DQogICY6OnYtZGVlcCAuZWwtZm9ybS1pdGVtX19sYWJlbCB7DQogICAgY29sb3I6ICNhZmIxYjU7DQogIH0NCiAgJjo6di1kZWVwIC5lbC1mb3JtLWl0ZW1fX2NvbnRlbnQgew0KICAgIG1hcmdpbi1sZWZ0OiAxNTBweCAhaW1wb3J0YW50Ow0KICB9DQp9DQppbnB1dCB7DQogIG91dGxpbmU6IG5vbmU7DQp9DQouc3ZnLWljb24gew0KICBjdXJzb3I6IHBvaW50ZXI7DQogIG1hcmdpbi1sZWZ0OiA1MHB4Ow0KICBjb2xvcjogIzE4OTBmZjsNCiAgJjpob3ZlciB7DQogICAgY29sb3I6ICQtLWNvbG9yLXByaW1hcnk7DQogIH0NCn0NCi5idXR0b24tZ3JvdXAgew0KICBtYXJnaW4tbGVmdDogMzYlOw0KICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KfQ0K"},{"version":3,"sources":["Personal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Personal.vue","sourceRoot":"src/views/personal-information-manage","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"mainForm\" :model=\"form\" :rules=\"formRule\" label-position=\"right\" label-width=\"120px\" class=\"personal-form\" label-suffix=\":\">\r\n      <el-form-item label=\"账号\" prop=\"account\">\r\n        <el-input v-model=\"form.account\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"姓名\" prop=\"name\">\r\n        <el-input v-model=\"form.name\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"性别\">\r\n        <el-radio-group v-model=\"form.sex\">\r\n          <el-radio label=\"男\">男</el-radio>\r\n          <el-radio label=\"女\">女</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"所在学校/单位\">\r\n        <div>{{ form.schoolName || '--' }}</div>\r\n      </el-form-item>\r\n      <el-form-item label=\"所在院系/部门\" prop=\"departmentId\">\r\n        <!-- @update-value=\"onSimpleSelectChange\" @init-finish=\"simpleSelectInitFinish\" -->\r\n        <SimpleSelect v-model=\"form.departmentId\" key-words=\"BaseDepartment\" :search-key=\"searchKey\" @update-value=\"onSimpleSelectChange\"  />\r\n      </el-form-item>\r\n      <el-form-item label=\"身份类型\">\r\n        <div>{{ form.jobName || '--' }}</div>\r\n      </el-form-item>\r\n      <el-form-item label=\"身份证号\">\r\n        <el-input v-model=\"form.idCard\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"电子邮箱\">\r\n        <el-input v-model=\"form.email\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"联系地址\">\r\n        <el-input v-model=\"form.address\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"邮政编码\">\r\n        <el-input v-model=\"form.postalCode\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <div class=\"button-group\">\r\n      <!-- <el-button size=\"mini\" plain round @click=\"$router.go(-1)\">\r\n        返 回\r\n      </el-button> -->\r\n      <el-button size=\"mini\" type=\"primary\" round :loading=\"loading\" @click=\"handleSave()\">\r\n        保 存\r\n      </el-button>\r\n    </div>    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport UserAPI from '@/api/user'\r\nimport SimpleSelect from '@/components/SimpleSelect'\r\n\r\nexport default {\r\n  name: 'Personal',\r\n  components: { SimpleSelect },\r\n  data() {\r\n    return {\r\n      editable: false,\r\n      userId: this.$store.getters.userInfo.id,\r\n      form: JSON.parse(JSON.stringify(this.$store.getters.userInfo)),\r\n      formRule: {\r\n        account: [{ required: true, trigger: 'blur', message: '请输入登录账号' }],\r\n        name: [{ required: true, trigger: 'blur', message: '请输入用户姓名' }],\r\n        departmentId: [{ required: true, trigger: 'blur', message: '部门不能为空' }]\r\n      },\r\n      loading: false\r\n\r\n    }\r\n  },\r\n  computed: {\r\n    searchKey() {\r\n      return { parentId: this.form.schoolId, theLevel: 3 }\r\n    }\r\n  },\r\n  methods: {\r\n    onSimpleSelectChange(val, field, options) {\r\n      this.$set(this.form, 'departmentId', val)\r\n    },\r\n    // 保存个人信息\r\n    async handleSave() {\r\n      this.$refs.mainForm.validate(async valid => {\r\n        if (valid) {\r\n          this.loading = true\r\n          // 信息保存\r\n          try {\r\n            const obj = JSON.parse(JSON.stringify(this.form))\r\n            await UserAPI.editUserInfo(this.userId, obj)\r\n            this.$store.dispatch('user/updateUserInfo', obj)\r\n            this.$message.success('保存成功！')\r\n            this.loading = false\r\n          } catch (error) {\r\n            this.loading = false\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/assets/css/element-variables.scss\";\r\n.el-form {\r\n  width: fit-content;\r\n  margin-left: 12%;\r\n}\r\n.personal-form {\r\n  &::v-deep .el-form-item__label {\r\n    color: #afb1b5;\r\n  }\r\n  &::v-deep .el-form-item__content {\r\n    margin-left: 150px !important;\r\n  }\r\n}\r\ninput {\r\n  outline: none;\r\n}\r\n.svg-icon {\r\n  cursor: pointer;\r\n  margin-left: 50px;\r\n  color: #1890ff;\r\n  &:hover {\r\n    color: $--color-primary;\r\n  }\r\n}\r\n.button-group {\r\n  margin-left: 36%;\r\n  margin-bottom: 40px;\r\n}\r\n</style>\r\n"]}]}