{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\components\\BtnSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\front\\src\\components\\BtnSearch.vue","mtime":1715830118028},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByZXNldEZvcm0gfSBmcm9tICdAL3V0aWxzL2NvbW1vbicNCmltcG9ydCBfIGZyb20gJ2xvZGFzaCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0J0blNlYXJjaCcsDQogIC8vIOm7mOiupOaDheWGteS4i++8jOS4gOS4que7hOS7tuS4iueahCB2LW1vZGVsIOS8muaKiiB2YWx1ZSDnlKjkvZwgcHJvcCDkuJTmioogaW5wdXQg55So5L2cIGV2ZW50DQogIG1vZGVsOiB7DQogICAgcHJvcDogJ3ZhbHVlJywgLy8g5rOo5oSP77yM5pivcHJvcO+8jOS4jeW4pnMNCiAgICBldmVudDogJ2lucHV0Jw0KICB9LA0KICBwcm9wczogew0KICAgIHZhbHVlOiB7IHR5cGU6IFtPYmplY3QsIFN0cmluZ10sIGRlZmF1bHQ6ICcnIH0sIC8vIOeItue7hOS7tiB2LW1vZGVsIOe7keWumuWAvA0KICAgIC8vIOS4jeaYvuekuumrmOe6p+aQnOe0og0KICAgIG5vQWR2YW5jZWRTZWFyY2g6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwNCiAgICBzZWFyY2hJdGVtczogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogKCkgPT4gW10gfSwNCiAgICBwbGFjZWhvbGRlcjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICfor7fovpPlhaXlkI3np7AnIH0sDQogICAgc2VhcmNoTmFtZTogeyB0eXBlOiBbU3RyaW5nLCBBcnJheV0sIGRlZmF1bHQ6ICcnIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgd2FpdFNlYXJjaDogW10sDQogICAgICBpbnB1dDogJycsDQogICAgICBvcHRpb25zOiBbXSwNCiAgICAgIGN1cnJlbnRGaWVsZDogJycsDQogICAgICBsb2FkaW5nOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAvLyB3YWl0U2VhcmNoOiB7DQogICAgLy8gICBoYW5kbGVyKG5ld1ZhbCkgew0KICAgIC8vICAgICAvLyDniLbnu4Tku7bmnIkgdi1tb2RlbCDml7bnmoTmk43kvZwNCiAgICAvLyAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBuZXdWYWwpDQogICAgLy8gICAgIC8vIOaYr+WQpuaYr+epuuWtl+espuS4su+8iG5vLWFkdmFuY2VkLXNlYXJjaCA9PT0gdHJ1Ze+8iQ0KICAgIC8vICAgICBjb25zdCBibGFua1N0cmluZyA9IGdldFZhbHVlVHlwZShuZXdWYWwpID09PSAnc3RyaW5nJyAmJiBuZXdWYWwgPT09ICcnDQogICAgLy8gICAgIC8vIOaYr+WQpuaYr+WvueixoeW5tuS4lOWvueixoeS4reeahOWAvOWFqOS4uuepuu+8iG5vLWFkdmFuY2VkLXNlYXJjaCA9PT0gZmFsc2XvvIkNCiAgICAvLyAgICAgY29uc3QgYmxhbmtTdHJpbmdPYmplY3QgPSBnZXRWYWx1ZVR5cGUobmV3VmFsKSA9PT0gJ29iamVjdCcgJiYgaXNPYmpFbXB0eShuZXdWYWwpDQogICAgLy8gICAgIGlmIChibGFua1N0cmluZyB8fCBibGFua1N0cmluZ09iamVjdCkgew0KICAgIC8vICAgICAgIHRoaXMuJGVtaXQoJ3NlYXJjaCcsIG5ld1ZhbCkNCiAgICAvLyAgICAgfQ0KICAgIC8vICAgfSwNCiAgICAvLyAgIGRlZXA6IHRydWUNCiAgICAvLyB9DQogIH0sDQogIGNyZWF0ZSgpIHsNCiAgICB0aGlzLndhaXRTZWFyY2ggPSBfLmNsb25lRGVlcCh0aGlzLnZhbHVlKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgaGFuZGxlRm9jdXModmFsKSB7DQogICAgICAvLyBpZiAodGhpcy5jdXJyZW50RmllbGQgPT09IHZhbC5maWVsZCkgcmV0dXJuDQogICAgICAvLyB0aGlzLmN1cnJlbnRGaWVsZCA9IHZhbC5maWVsZA0KICAgICAgLy8gY29uc3QgaW5kZXggPSB0aGlzLnNlYXJjaEl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uZmllbGQgPT09IHZhbC5maWVsZCkNCiAgICAgIC8vIGlmIChpbmRleCA+PSAwKSB7DQogICAgICAvLyAgIHRyeSB7DQogICAgICAvLyAgICAgaWYgKHZhbC50eXBlID09PSAnY2FzY2FkZXInKSB7DQogICAgICAvLyAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0cmVlQVBJLmdldEFsbE5vZGVzKHsNCiAgICAgIC8vICAgICAgICAga2V5V29yZHM6IHZhbC5rZXlXb3JkcywNCiAgICAgIC8vICAgICAgICAgdmlydHVhbFJvb3RGbGFnOiBmYWxzZQ0KICAgICAgLy8gICAgICAgfSkNCiAgICAgIC8vICAgICAgIC8vIOmZpOWOu2NoaWxkcmVuDQogICAgICAvLyAgICAgICB0aGlzLnNlYXJjaEl0ZW1zW2luZGV4XS5vcHRpb25zID0gSlNPTi5wYXJzZSgNCiAgICAgIC8vICAgICAgICAgSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEpLnJlcGxhY2UoL1wiY2hpbGRyZW4iXDpcW10vZywgJyJubyI6MCcpDQogICAgICAvLyAgICAgICApDQogICAgICAvLyAgICAgfSBlbHNlIGlmICh2YWwudHlwZSA9PT0gJ3NlbGVjdCcpIHsNCiAgICAgIC8vICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGxpc3RBUEkuZ2V0U29tZVJlY29yZHMoew0KICAgICAgLy8gICAgICAgICBrZXlXb3JkczogdmFsLmtleVdvcmRzLCBwYWdlSW5mbzogeyBwYWdlOiAtMSB9DQogICAgICAvLyAgICAgICB9KQ0KICAgICAgLy8gICAgICAgdGhpcy5zZWFyY2hJdGVtc1tpbmRleF0ub3B0aW9ucyA9IHJlcy5kYXRhLmNvbnRlbnQNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIC8vICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgIC8vICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgLy8gICB9DQogICAgICAvLyB9DQogICAgICAvLyB0aGlzLiRlbWl0KCdmb2N1cycsIHZhbC5maWVsZCkNCiAgICB9LA0KICAgIHNlYXJjaENsaWNrKHR5cGUpIHsNCiAgICAgIC8vIHRoaXMuJGVtaXQoJ3NlYXJjaC1jbGljaycsIHRoaXMud2FpdFNlYXJjaCkNCiAgICAgIGlmICh0eXBlID09PSAnY29tbW9uJykgew0KICAgICAgICB0aGlzLiRlbWl0KCdzZWFyY2gtY2xpY2snLCB0aGlzLmlucHV0KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kZW1pdCgnYWR2YW5jZWQtc2VhcmNoLWNsaWNrJywgdGhpcy53YWl0U2VhcmNoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVzZXQoKSB7DQogICAgICB0aGlzLndhaXRTZWFyY2ggPSByZXNldEZvcm0odGhpcy53YWl0U2VhcmNoKQ0KICAgICAgLy8gdGhpcy4kZW1pdCgnc2VhcmNoLWNsaWNrJywgdGhpcy53YWl0U2VhcmNoKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["BtnSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BtnSearch.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"search-box\"> <!-- class=\"search-wrapper\" -->\r\n    <div v-if=\"noAdvancedSearch\" class=\"no-advanced-search\">\r\n      <el-input ref=\"inputInfo\" v-model.trim=\"input\" size=\"mini\" :placeholder=\"placeholder\" clearable />\r\n      <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-search\" @click=\"searchClick('common')\">搜索</el-button>\r\n    </div>\r\n    <div v-else class=\"advanced-search-field-box\">\r\n      <div v-for=\"(item, index) in searchItems\" :key=\"index\" class=\"search-item\">\r\n        <slot v-if=\"item.type.startsWith('customize')\" :name=\"item.slot\" />\r\n        <el-cascader v-if=\"item.type==='cascader'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :loading=\"loading\" :options=\"item.options\" :props=\"{\r\n          label: 'name', value: 'id', checkStrictly: item.checkStrictly\r\n        }\" :placeholder=\"item.placeholder\" clearable />\r\n        <el-select v-if=\"item.type==='select'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :placeholder=\"item.placeholder?item.placeholder:item.name\" :loading=\"loading\" clearable>\r\n          <el-option v-for=\"citem in item.options\" :key=\"citem.id\" :label=\"citem.name\" :value=\"citem.id\" />\r\n        </el-select>\r\n        <el-input v-if=\"item.type==='input'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :placeholder=\"item.placeholder?item.placeholder:item.name\" clearable />\r\n        <el-date-picker v-if=\"item.type==='date'\" v-model=\"waitSearch[item.field]\" size=\"mini\" type=\"daterange\" :start-placeholder=\"item.placeholder?item.placeholder:item.name+'：从'\" :end-placeholder=\"item.placeholder?item.placeholder:item.name+'：到'\" />\r\n      </div>\r\n      <div class=\"search-item search-button\">\r\n        <el-button size=\"mini\" type=\"success\" icon=\"el-icon-search\" @click=\"searchClick('notCommon')\">搜索</el-button>\r\n        <el-button size=\"mini\" plain icon=\"el-icon-refresh-left\" @click=\"reset()\">重置</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { resetForm } from '@/utils/common'\r\nimport _ from 'lodash'\r\nexport default {\r\n  name: 'BtnSearch',\r\n  // 默认情况下，一个组件上的 v-model 会把 value 用作 prop 且把 input 用作 event\r\n  model: {\r\n    prop: 'value', // 注意，是prop，不带s\r\n    event: 'input'\r\n  },\r\n  props: {\r\n    value: { type: [Object, String], default: '' }, // 父组件 v-model 绑定值\r\n    // 不显示高级搜索\r\n    noAdvancedSearch: { type: Boolean, default: false },\r\n    searchItems: { type: Array, default: () => [] },\r\n    placeholder: { type: String, default: '请输入名称' },\r\n    searchName: { type: [String, Array], default: '' }\r\n  },\r\n  data() {\r\n    return {\r\n      waitSearch: [],\r\n      input: '',\r\n      options: [],\r\n      currentField: '',\r\n      loading: false\r\n    }\r\n  },\r\n  watch: {\r\n    // waitSearch: {\r\n    //   handler(newVal) {\r\n    //     // 父组件有 v-model 时的操作\r\n    //     this.$emit('input', newVal)\r\n    //     // 是否是空字符串（no-advanced-search === true）\r\n    //     const blankString = getValueType(newVal) === 'string' && newVal === ''\r\n    //     // 是否是对象并且对象中的值全为空（no-advanced-search === false）\r\n    //     const blankStringObject = getValueType(newVal) === 'object' && isObjEmpty(newVal)\r\n    //     if (blankString || blankStringObject) {\r\n    //       this.$emit('search', newVal)\r\n    //     }\r\n    //   },\r\n    //   deep: true\r\n    // }\r\n  },\r\n  create() {\r\n    this.waitSearch = _.cloneDeep(this.value)\r\n  },\r\n  methods: {\r\n    async handleFocus(val) {\r\n      // if (this.currentField === val.field) return\r\n      // this.currentField = val.field\r\n      // const index = this.searchItems.findIndex(item => item.field === val.field)\r\n      // if (index >= 0) {\r\n      //   try {\r\n      //     if (val.type === 'cascader') {\r\n      //       const res = await treeAPI.getAllNodes({\r\n      //         keyWords: val.keyWords,\r\n      //         virtualRootFlag: false\r\n      //       })\r\n      //       // 除去children\r\n      //       this.searchItems[index].options = JSON.parse(\r\n      //         JSON.stringify(res.data).replace(/\\\"children\"\\:\\[]/g, '\"no\":0')\r\n      //       )\r\n      //     } else if (val.type === 'select') {\r\n      //       const res = await listAPI.getSomeRecords({\r\n      //         keyWords: val.keyWords, pageInfo: { page: -1 }\r\n      //       })\r\n      //       this.searchItems[index].options = res.data.content\r\n      //     }\r\n      //     this.loading = false\r\n      //   } catch (error) {\r\n      //     this.loading = false\r\n      //   }\r\n      // }\r\n      // this.$emit('focus', val.field)\r\n    },\r\n    searchClick(type) {\r\n      // this.$emit('search-click', this.waitSearch)\r\n      if (type === 'common') {\r\n        this.$emit('search-click', this.input)\r\n      } else {\r\n        this.$emit('advanced-search-click', this.waitSearch)\r\n      }\r\n    },\r\n    reset() {\r\n      this.waitSearch = resetForm(this.waitSearch)\r\n      // this.$emit('search-click', this.waitSearch)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/assets/css/variables.scss\";\r\n#search-box {\r\n  margin-bottom: 20px;\r\n}\r\n.no-advanced-search {\r\n  display: flex;\r\n  .el-button {\r\n    margin-left: 10px;\r\n  }\r\n}\r\n.advanced-search-field-box {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\r\n  gap: 10px;\r\n  .el-button + .el-button {\r\n    margin-left: 10px;\r\n  }\r\n}\r\n// .el-button.is-plain:hover {\r\n  // border-color: $--color-subsidiary;\r\n  // color: $--color-subsidiary;\r\n// }\r\n</style>\r\n"]}]}