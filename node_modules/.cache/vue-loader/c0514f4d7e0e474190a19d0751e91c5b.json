{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\components\\SimpleSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\front\\src\\components\\SimpleSelect.vue","mtime":1715830118032},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbGlzdEFQSSBmcm9tICdAL2FwaS9saXN0Jw0KaW1wb3J0IF8gZnJvbSAnbG9kYXNoJw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIHZhbHVlOiB7IHR5cGU6IFtOdW1iZXIsIFN0cmluZywgQXJyYXldLCBkZWZhdWx0OiAoKSA9PiBudWxsIH0sDQogICAgZmllbGQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LA0KICAgIGtleVdvcmRzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSwNCiAgICBtdWx0aXBsZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiAoKSA9PiBmYWxzZSB9LA0KICAgIHBsYWNlaG9sZGVyOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ+ivt+mAieaLqScgfSwNCiAgICBzZWFyY2hLZXk6IHsgdHlwZTogT2JqZWN0LCBkZWZhdWx0OiAoKSA9PiAoe30pIH0sDQogICAgcmVnS2V5OiB7IHR5cGU6IE9iamVjdCwgZGVmYXVsdDogKCkgPT4gKHt9KSB9LA0KICAgIHNvcnRKc29uOiB7IHR5cGU6IE9iamVjdCwgZGVmYXVsdDogKCkgPT4gKHsgcHJvcGVydGllczogJ1RoZU9yZGVyJywgZGlyZWN0aW9uOiAnQVNDJyB9KSB9LA0KICAgIHNpemU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LA0KICAgIGZpbHRlcmFibGU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwNCiAgICBhdXRvSW5pdDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sDQogICAgZGlzYWJsZWQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwNCiAgICBhdXRvU2VsZWN0OiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSwNCiAgICBjaGFuZ2VMYWJlbDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgb3B0aW9uczogW10sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIHNlbGVjdFZhbHVlOiB0aGlzLnZhbHVlDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8vIHNlbGVjdFZhbHVlOiB7DQogICAgLy8gICBnZXQ6IGZ1bmN0aW9uKCkgew0KICAgIC8vICAgICByZXR1cm4gdGhpcy52YWx1ZQ0KICAgIC8vICAgfSwNCiAgICAvLyAgIHNldDogZnVuY3Rpb24odmFsKSB7DQogICAgLy8gICAgIC8vdGhpcy52YWx1ZSA9IHZhbA0KICAgIC8vICAgfQ0KICAgIC8vIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB2YWx1ZTogew0KICAgICAgYXN5bmMgaGFuZGxlcih2YWwpIHsNCiAgICAgICAgaWYgKHRoaXMuYXV0b0luaXQpIHsNCiAgICAgICAgICBpZiAoISh0aGlzLm9wdGlvbnMpIHx8ICh0aGlzLm9wdGlvbnMubGVuZ3RoID09PSAwKSkgew0KICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0T3B0aW9ucygpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0aW9uKCkNCiAgICAgIH0sDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIHNlYXJjaEtleTogew0KICAgICAgYXN5bmMgaGFuZGxlcih2YWwpIHsNCiAgICAgICAgYXdhaXQgdGhpcy5pbml0T3B0aW9ucygpDQogICAgICAgIGF3YWl0IHRoaXMuY2hhbmdlU2VsZWN0aW9uKCkNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGlmICh0aGlzLmF1dG9Jbml0KSB7DQogICAgICB0aGlzLmluaXRPcHRpb25zKCkNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBjaGFuZ2VTZWxlY3Rpb24odmFsKSB7DQogICAgICBpZiAodGhpcy5vcHRpb25zLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBhd2FpdCB0aGlzLmluaXRPcHRpb25zKCkNCiAgICAgIH0NCiAgICAgIGlmICh2YWwgIT0gbnVsbCkgew0KICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gdmFsDQogICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWUgIT0gbnVsbCkgew0KICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ29iamVjdCcpIHsNCiAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gdGhpcy52YWx1ZS5maWx0ZXIoaXRlbSA9PiB0aGlzLm9wdGlvbnMubWFwKGl0ZW0yID0+IGl0ZW0yLmlkKS5pbmNsdWRlcyhpdGVtKSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1hcChpdGVtID0+IGl0ZW0uaWQpLmluY2x1ZGVzKHBhcnNlSW50KHRoaXMudmFsdWUpKSkgew0KICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IHBhcnNlSW50KHRoaXMudmFsdWUpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gbnVsbA0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgaW5pdE9wdGlvbnMoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICB0cnkgew0KICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgbGlzdEFQSS5nZXRTb21lUmVjb3Jkcyh7DQogICAgICAgICAga2V5V29yZHM6IHRoaXMua2V5V29yZHMsDQogICAgICAgICAgc2VhcmNoS2V5OiB0aGlzLnNlYXJjaEtleSwNCiAgICAgICAgICBzb3J0OiB0aGlzLnNvcnRKc29uLA0KICAgICAgICAgIHJlZzogdGhpcy5yZWdLZXkNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5vcHRpb25zID0gXy5jbG9uZURlZXAocmVzcC5kYXRhLmNvbnRlbnQpDQogICAgICAgIGlmICh0aGlzLmNoYW5nZUxhYmVsICE9PSAnJykgew0KICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICduYW1lJywgaXRlbVt0aGlzLmNoYW5nZUxhYmVsXSkNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuJGVtaXQoJ2luaXQtZmluaXNoJywgdGhpcy5maWVsZCwgdGhpcy5vcHRpb25zKQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmF1dG9TZWxlY3QpIHsNCiAgICAgICAgaWYgKHRoaXMuc2VsZWN0VmFsdWUgPT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSB0aGlzLm9wdGlvbnNbMF0uaWQNCiAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtdmFsdWUnLCB0aGlzLnNlbGVjdFZhbHVlLCB0aGlzLmZpZWxkLCB0aGlzLm9wdGlvbnMuZmlsdGVyKCh2YWx1ZSwgaW5kZXgpID0+IHsgcmV0dXJuIHZhbHVlLmlkID09PSB0aGlzLnNlbGVjdFZhbHVlIH0pKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgIH0sDQogICAgaGFuZGxlQ2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy4kZW1pdCgndXBkYXRlLXZhbHVlJywgdmFsLCB0aGlzLmZpZWxkLCB0aGlzLm9wdGlvbnMuZmlsdGVyKCh2YWx1ZSwgaW5kZXgpID0+IHsgcmV0dXJuIHZhbHVlLmlkID09PSB2YWwgfSkpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["SimpleSelect.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SimpleSelect.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-select v-model=\"selectValue\" v-loading=\"loading\" class=\"simple-select\" :placeholder=\"placeholder\" :size=\"size\" :multiple=\"multiple\" :disabled=\"disabled\" :filterable=\"filterable\" @change=\"handleChange\">\r\n      <el-option v-for=\"item in options\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" :value-key=\"item.id\" />\r\n    </el-select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport listAPI from '@/api/list'\r\nimport _ from 'lodash'\r\nexport default {\r\n  props: {\r\n    value: { type: [Number, String, Array], default: () => null },\r\n    field: { type: String, default: '' },\r\n    keyWords: { type: String, default: '' },\r\n    multiple: { type: Boolean, default: () => false },\r\n    placeholder: { type: String, default: '请选择' },\r\n    searchKey: { type: Object, default: () => ({}) },\r\n    regKey: { type: Object, default: () => ({}) },\r\n    sortJson: { type: Object, default: () => ({ properties: 'TheOrder', direction: 'ASC' }) },\r\n    size: { type: String, default: '' },\r\n    filterable: { type: Boolean, default: false },\r\n    autoInit: { type: Boolean, default: true },\r\n    disabled: { type: Boolean, default: false },\r\n    autoSelect: { type: Boolean, default: true },\r\n    changeLabel: { type: String, default: '' }\r\n  },\r\n  data() {\r\n    return {\r\n      options: [],\r\n      loading: false,\r\n      selectValue: this.value\r\n    }\r\n  },\r\n  computed: {\r\n    // selectValue: {\r\n    //   get: function() {\r\n    //     return this.value\r\n    //   },\r\n    //   set: function(val) {\r\n    //     //this.value = val\r\n    //   }\r\n    // }\r\n  },\r\n  watch: {\r\n    value: {\r\n      async handler(val) {\r\n        if (this.autoInit) {\r\n          if (!(this.options) || (this.options.length === 0)) {\r\n            await this.initOptions()\r\n          }\r\n        }\r\n        this.changeSelection()\r\n      },\r\n      immediate: true\r\n    },\r\n    searchKey: {\r\n      async handler(val) {\r\n        await this.initOptions()\r\n        await this.changeSelection()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  created() {\r\n    if (this.autoInit) {\r\n      this.initOptions()\r\n    }\r\n  },\r\n  methods: {\r\n    async changeSelection(val) {\r\n      if (this.options.length === 0) {\r\n        await this.initOptions()\r\n      }\r\n      if (val != null) {\r\n        this.selectValue = val\r\n      } else if (this.value != null) {\r\n        if (this.multiple && typeof this.value === 'object') {\r\n          this.selectValue = this.value.filter(item => this.options.map(item2 => item2.id).includes(item))\r\n        } else {\r\n          if (this.options.map(item => item.id).includes(parseInt(this.value))) {\r\n            this.selectValue = parseInt(this.value)\r\n          }\r\n        }\r\n      } else {\r\n        this.selectValue = null\r\n      }\r\n    },\r\n    async initOptions() {\r\n      this.loading = true\r\n      try {\r\n        const resp = await listAPI.getSomeRecords({\r\n          keyWords: this.keyWords,\r\n          searchKey: this.searchKey,\r\n          sort: this.sortJson,\r\n          reg: this.regKey\r\n        })\r\n        this.options = _.cloneDeep(resp.data.content)\r\n        if (this.changeLabel !== '') {\r\n          this.options.forEach(item => {\r\n            this.$set(item, 'name', item[this.changeLabel])\r\n          })\r\n        }\r\n        this.$emit('init-finish', this.field, this.options)\r\n      } catch (error) {\r\n        this.loading = false\r\n      }\r\n      if (this.autoSelect) {\r\n        if (this.selectValue == null && this.options.length > 0) {\r\n          this.selectValue = this.options[0].id\r\n          this.$emit('update-value', this.selectValue, this.field, this.options.filter((value, index) => { return value.id === this.selectValue }))\r\n        }\r\n      }\r\n      this.loading = false\r\n    },\r\n    handleChange(val) {\r\n      this.$emit('update-value', val, this.field, this.options.filter((value, index) => { return value.id === val }))\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}