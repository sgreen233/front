{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\components\\ElUploadSelf.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\front\\src\\components\\ElUploadSelf.vue","mtime":1715830118030},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdVcGxhb2QnLA0KICAvLyDpu5jorqTmg4XlhrXkuIvvvIzkuIDkuKrnu4Tku7bkuIrnmoQgdi1tb2RlbCDkvJrmioogdmFsdWUg55So5L2cIHByb3Ag5LiU5oqKIGlucHV0IOeUqOS9nCBldmVudA0KICBtb2RlbDogew0KICAgIHByb3A6ICd2YWx1ZScsIC8vIOazqOaEj++8jOaYr3Byb3DvvIzkuI3luKZzDQogICAgZXZlbnQ6ICdpbnB1dCcNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICB2YWx1ZTogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogKCkgPT4gW10gfSwgLy8g54i257uE5Lu2IHYtbW9kZWwg57uR5a6a5YC8DQogICAgbGltaXQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAxIH0sIC8vIOaWh+S7tuS4iuS8oOaVsOmHj+mZkOWItg0KICAgIGxpc3RUeXBlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ3RleHQnIH0sIC8vIOmZiOWIl+aWueW8j++8jOivpuingSBFbGVtZW50IFVJDQogICAgZHJhZzogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LCAvLyDmmK/lkKbmlK/mjIHmi5bmi70NCiAgICBtdWx0aXBsZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LCAvLyDmmK/lkKbmlK/mjIHlpJrpgIkNCiAgICBmaWxlVHlwZXM6IHsgdHlwZTogQXJyYXksIHJlcXVpcmVkOiB0cnVlIH0sIC8vIOaUr+aMgeaWh+S7tuexu+Weiw0KICAgIHNob3dMaW1pdDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9IC8vIOaYr+WQpuaYvuekuumZkOWItuaVsOWtlw0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmaWxlTGlzdDogdGhpcy52YWx1ZSwNCiAgICAgIC8vIOS4iuS8oOaWh+S7tueahOaVsOaNruWPguaVsA0KICAgICAgZGF0YU9iajoge30sDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJw0KICAgIH0NCiAgfSwNCiAgLy8gY3JlYXRlZCgpIHsNCiAgLy8gICBjb25zb2xlLmxvZyh0aGlzLmZpbGVMaXN0LCAnZmlsZUxpc3QnKQ0KICAvLyB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQ2hhbmdlKGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3QNCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZmlsZUxpc3QpDQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCBmaWxlLCBmaWxlTGlzdCkNCiAgICB9LA0KICAgIC8vIOWIoOmZpOaWh+S7tuinpuWPkeS6i+S7tg0KICAgIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0DQogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGZpbGVMaXN0KQ0KICAgICAgdGhpcy4kZW1pdCgncmVtb3ZlJywgZmlsZSwgZmlsZUxpc3QpDQogICAgfSwNCiAgICAvLyAvLyDpmZDliLbmlofku7bmlbDph48NCiAgICAvLyBoYW5kbGVFeGNlZWQoZmlsZXMsIGZpbGVMaXN0KSB7DQogICAgLy8gICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoDQogICAgLy8gICAgIGDlvZPliY3pmZDliLbpgInmi6kgJHt0aGlzLmxpbWl0fSDkuKrmlofku7bvvIzmnKzmrKHpgInmi6nkuoYgJHtmaWxlcy5sZW5ndGh9IOS4quaWh+S7tu+8jOWFsemAieaLqeS6hiAke2ZpbGVzLmxlbmd0aCArDQogICAgLy8gICAgIGZpbGVMaXN0Lmxlbmd0aH0g5Liq5paH5Lu2YA0KICAgIC8vICAgKQ0KICAgIC8vIH0sDQogICAgLy8g5LiK5Lyg5LmL5YmN55qE5Zue6LCDDQogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsNCiAgICAgIGNvbnN0IGlzTHRTaXplID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCB0aGlzLkNPTlNUQU5ULklNQUdFX01BWF9TSVpFDQogICAgICBpZiAoIWlzTHRTaXplKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZyhg5LiK5Lyg5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HICR7dGhpcy5DT05TVEFOVC5JTUFHRV9NQVhfU0laRX0gTUIhYCkNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGUubmFtZS5sYXN0SW5kZXhPZignLicpDQogICAgICBjb25zdCBmaWxlTmFtZUxlbmd0aCA9IGZpbGUubmFtZS5sZW5ndGgNCiAgICAgIGNvbnN0IGZpbGVGb3JtYXQgPSBmaWxlLm5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lICsgMSwgZmlsZU5hbWVMZW5ndGgpDQogICAgICBpZiAodGhpcy5maWxlVHlwZXMuaW5kZXhPZihmaWxlRm9ybWF0KSAhPT0gLTEpIHsNCiAgICAgICAgcmV0dXJuIGZpbGUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5LiK5Lyg5paH5Lu25Y+q6IO95piv5Zu+54mH5qC85byPIScpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsNCiAgICAgIGNvbnNvbGUubG9nKGZpbGUsICdmaWxlJykNCiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybA0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["ElUploadSelf.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ElUploadSelf.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-upload ref=\"upload\" action :class=\"{hide:fileList.length>=limit}\" list-type=\"picture-card\" :file-list=\"fileList\" :drag=\"drag\" :multiple=\"multiple\" :limit=\"limit\" :http-request=\"()=>{}\" :on-change=\"handleChange\" :before-upload=\"beforeUpload\" :auto-upload=\"false\" :on-preview=\"handlePictureCardPreview\" :on-remove=\"handleRemove\">\r\n      <div v-if=\"drag\">\r\n        <i class=\"el-icon-upload\" />\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n      </div>\r\n      <div v-else class=\"add-tip\">\r\n        <p :class=\"{'no-limit': !showLimit}\" style=\"font-size: 20px\">+</p>\r\n        <p v-if=\"showLimit\">{{ fileList.length + 1 }}/{{ limit }}</p>\r\n      </div>\r\n      <slot slot=\"tip\" name=\"tip\" />\r\n    </el-upload>\r\n    <el-dialog class=\"image-dialog\" :visible.sync=\"dialogVisible\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Uplaod',\r\n  // 默认情况下，一个组件上的 v-model 会把 value 用作 prop 且把 input 用作 event\r\n  model: {\r\n    prop: 'value', // 注意，是prop，不带s\r\n    event: 'input'\r\n  },\r\n  props: {\r\n    value: { type: Array, default: () => [] }, // 父组件 v-model 绑定值\r\n    limit: { type: Number, default: 1 }, // 文件上传数量限制\r\n    listType: { type: String, default: 'text' }, // 陈列方式，详见 Element UI\r\n    drag: { type: Boolean, default: false }, // 是否支持拖拽\r\n    multiple: { type: Boolean, default: false }, // 是否支持多选\r\n    fileTypes: { type: Array, required: true }, // 支持文件类型\r\n    showLimit: { type: Boolean, default: false } // 是否显示限制数字\r\n  },\r\n  data() {\r\n    return {\r\n      fileList: this.value,\r\n      // 上传文件的数据参数\r\n      dataObj: {},\r\n      dialogVisible: false,\r\n      dialogImageUrl: ''\r\n    }\r\n  },\r\n  // created() {\r\n  //   console.log(this.fileList, 'fileList')\r\n  // },\r\n  methods: {\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList\r\n      this.$emit('input', fileList)\r\n      this.$emit('change', file, fileList)\r\n    },\r\n    // 删除文件触发事件\r\n    handleRemove(file, fileList) {\r\n      this.fileList = fileList\r\n      this.$emit('input', fileList)\r\n      this.$emit('remove', file, fileList)\r\n    },\r\n    // // 限制文件数量\r\n    // handleExceed(files, fileList) {\r\n    //   this.$message.warning(\r\n    //     `当前限制选择 ${this.limit} 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length +\r\n    //     fileList.length} 个文件`\r\n    //   )\r\n    // },\r\n    // 上传之前的回调\r\n    beforeUpload(file) {\r\n      const isLtSize = file.size / 1024 / 1024 < this.CONSTANT.IMAGE_MAX_SIZE\r\n      if (!isLtSize) {\r\n        this.$message.warning(`上传图片大小不能超过 ${this.CONSTANT.IMAGE_MAX_SIZE} MB!`)\r\n        return false\r\n      }\r\n      const fileName = file.name.lastIndexOf('.')\r\n      const fileNameLength = file.name.length\r\n      const fileFormat = file.name.substring(fileName + 1, fileNameLength)\r\n      if (this.fileTypes.indexOf(fileFormat) !== -1) {\r\n        return file\r\n      } else {\r\n        this.$message.warning('上传文件只能是图片格式!')\r\n        return false\r\n      }\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      console.log(file, 'file')\r\n      this.dialogImageUrl = file.url\r\n      this.dialogVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-upload-list__item,\r\n::v-deep .el-upload--picture-card {\r\n  height: 60px;\r\n  width: 60px;\r\n  line-height: 60px;\r\n}\r\n.hide {\r\n  ::v-deep .el-upload--picture-card {\r\n    display: none;\r\n  }\r\n}\r\n.add-tip {\r\n  margin: 10px auto;\r\n  p {\r\n    margin: 0 auto;\r\n    line-height: 20px;\r\n  }\r\n  .no-limit {\r\n    margin-top: 20px;\r\n  }\r\n}\r\n\r\n::v-deep .el-icon-upload-success,\r\n::v-deep .el-icon-check {\r\n  position: absolute;\r\n  right: 15px;\r\n}\r\n\r\n.image-dialog ::v-deep .el-dialog__body {\r\n  border-top: 0 !important;\r\n}\r\n</style>\r\n"]}]}