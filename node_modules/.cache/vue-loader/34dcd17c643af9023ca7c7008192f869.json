{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\views\\website-manage\\components\\DlgEditContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\front\\src\\views\\website-manage\\components\\DlgEditContent.vue","mtime":1715830118046},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBTaW1wbGVEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL1NpbXBsZURpYWxvZycNCmltcG9ydCBsaXN0QVBJIGZyb20gJ0AvYXBpL2xpc3QnDQppbXBvcnQgV2FuZ0VkaXRvciBmcm9tICdAL2NvbXBvbmVudHMvd2FuZy1lZGl0b3IvaW5kZXgnDQppbXBvcnQgQ09OU1RBTlQgZnJvbSAnQC9jb25zdGFudCcNCmltcG9ydCBfIGZyb20gJ2xvZGFzaCcNCmltcG9ydCBTaW1wbGVVcGxvYWQgZnJvbSAnQC9jb21wb25lbnRzL1NpbXBsZVVwbG9hZCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogeyBTaW1wbGVEaWFsb2csIFdhbmdFZGl0b3IsIFNpbXBsZVVwbG9hZCB9LA0KICBwcm9wczogew0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZWxldGVGaWxlTGlzdDogW10sDQogICAgICBmb3JtOiB7fSwNCiAgICAgIGRlZmF1bHRNYWluU0RQcm9wczogew0KICAgICAgICBmb3JtOiB7fSwNCiAgICAgICAga2V5V29yZDogJ0Jhc2VVc2VyJywNCiAgICAgICAgZm9ybUl0ZW1zOiBbDQogICAgICAgICAgeyBuYW1lOiAn5qCH6aKYJywgZmllbGQ6ICdjaGFubmVsQ05hbWUnLCBwbGFjZWhvbGRlcjogJ+agh+mimOS4jeiDveS4uuepuicsIHR5cGU6ICdpbnB1dCcgfQ0KICAgICAgICBdLA0KICAgICAgICBmb3JtUnVsZXM6IHsNCiAgICAgICAgICBjaGFubmVsQ05hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5qCH6aKY5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH1dDQogICAgICAgIH0sDQogICAgICAgIGRlZmF1bHREQlByb3BzOiB7DQogICAgICAgICAgd2lkdGg6ICc4MCUnLA0KICAgICAgICAgIHNvbWVGbGFnczogew0KICAgICAgICAgICAgbmVlZE1heEJ0bjogdHJ1ZQ0KICAgICAgICAgIH0sDQogICAgICAgICAgZm9vdEJ1dHRvbnM6IHsgcmVwZWF0QWRkOiB7IHNob3c6IGZhbHNlIH19DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBmaWxlTWF4U2l6ZTogMTAsDQogICAgICBpbWdNYXhTaXplOiAxLA0KICAgICAgaW1nQWxsb3dUeXBlOiBDT05TVEFOVC5GSUxFX1RZUEUuSU1HLA0KICAgICAgdXBJbWdCdXR0b25JbmZvOiB7IG5hbWU6ICcrJywgdG9vbHRpcDogJ+ivt+S4iuS8oOWbvueJh+aWh+S7tu+8jOWNleS4quaWh+S7tuWkp+Wwj+S4jei2hei/hzFN44CCJyB9LA0KICAgICAgdXBGaWxlQnV0dG9uSW5mbzogeyBuYW1lOiAn54K55Ye75LiK5Lyg6ZmE5Lu2JywgdG9vbHRpcDogJ+WPr+S7peS4iuS8oOWQhOenjeexu+Wei+eahOaWh+S7tu+8jOS9huWNleS4quaWh+S7tuWkp+Wwj+S4jei2hei/hzEwTeOAgicgfSwNCiAgICAgIGFsbG93TXVsdGlGaWxlczogdHJ1ZQ0KICAgIH0NCiAgfSwgIA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgc2hvd0RpYWxvZyh2YWwsIGZvcm0gPSB7fSkgew0KICAgICAgdGhpcy5mb3JtID0gXy5jbG9uZURlZXAoZm9ybSkgLy8g5omT5byA55qE5pe25YCZ55SoY2xvbmVEZWVw77yM6L+Z5qC35aSW5bGC5Lyg55qE5pe25YCZ5bCx55u05o6l5Lygcm935bCx5Y+v5Lul5LqGDQogICAgICB0aGlzLiRyZWZzLnNpbXBsZURsZy5zaG93RGlhbG9nKHZhbCwgdGhpcy5mb3JtLCB0cnVlKQ0KICAgIH0sDQogICAgaGFuZGxlSW1nQ2hhbmdlKGltZ0xpc3QpIHsNCiAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm0sICdpbWFnZXMnLCBpbWdMaXN0KSAgICANCiAgICAgIHRoaXMuJHJlZnMuc2ltcGxlRGxnLnZlcmlmeVZhbGlkKCkNCiAgICB9LA0KICAgIGhhbmRsZUZpbGVDaGFuZ2UoZmlsZUxpc3QpIHsgICAgICANCiAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm0sICdmaWxlcycsIGZpbGVMaXN0KQ0KICAgICAgdGhpcy4kcmVmcy5zaW1wbGVEbGcudmVyaWZ5VmFsaWQoKQ0KICAgIH0sDQogICAgYXN5bmMgY29uZmlybShvcHRpb24sIHR5cGUsIGZvcm0pIHsgICAgICANCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBsaXN0QVBJLmVkaXRPbmVOb2RlKCdNYWluQ2hhbm5lbENvbnRlbnQnLCBmb3JtKQ0KICAgICAgICBhd2FpdCB0aGlzLiRyZWZzLmltZ1VwbG9hZC5oYW5kbGVVcGxvYWQodGhpcy4kc3RvcmUuZ2V0dGVycy51c2VySW5mby5pZCwgcmVzcC5kYXRhLmlkLCAxKQ0KICAgICAgICBhd2FpdCB0aGlzLiRyZWZzLmZpbGVVcGxvYWQuaGFuZGxlVXBsb2FkKHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckluZm8uaWQsIHJlc3AuZGF0YS5pZCwgMikNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgLy8g6Zi75q2i5byC5q2l5Yi35pawDQogICAgICAgICAgdGhpcy4kcmVmcy5zaW1wbGVEbGcuJHBhcmVudC4kcGFyZW50LmluaXREYXRhTGlzdCgpDQogICAgICAgIH0sIDcwMCkNCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["DlgEditContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DlgEditContent.vue","sourceRoot":"src/views/website-manage/components","sourcesContent":["<template>\r\n  <div>    \r\n    <SimpleDialog ref=\"simpleDlg\" :default-props=\"defaultMainSDProps\" :simpledialog-confirm=\"confirm\">\r\n      <template slot=\"otherItems\">\r\n        <el-row>\r\n          <el-col :span=\"11\">\r\n            <el-form-item label=\"是否发布\">\r\n              <el-switch v-model=\"form.publishStatus\" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"11\">\r\n            <el-form-item label=\"轮播图展示\">\r\n              <el-switch v-model=\"form.channelCSlider\" />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-form-item label=\"正文\">\r\n          <wang-editor v-model=\"form.channelCText\" :value=\"form.channelCText\" />\r\n        </el-form-item>\r\n        <el-form-item prop=\"images\" label=\"图片上传\">\r\n          <SimpleUpload ref=\"imgUpload\" v-model=\"form.images\" list-type=\"picture-card\" :up-button-info=\"upImgButtonInfo\" :file-max-size=\"imgMaxSize\" :multiple=\"allowMultiFiles\" :fileAllowedTypes=\"imgAllowType\" @handle-change=\"handleImgChange\" />\r\n        </el-form-item>\r\n        <el-form-item prop=\"files\" label=\"附件上传\">\r\n          <SimpleUpload ref=\"fileUpload\" v-model=\"form.files\" :up-button-info=\"upFileButtonInfo\" :file-max-size=\"fileMaxSize\" :multiple=\"allowMultiFiles\"  @handle-change=\"handleFileChange\" />\r\n        </el-form-item>\r\n      </template>\r\n    </SimpleDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport SimpleDialog from '@/components/SimpleDialog'\r\nimport listAPI from '@/api/list'\r\nimport WangEditor from '@/components/wang-editor/index'\r\nimport CONSTANT from '@/constant'\r\nimport _ from 'lodash'\r\nimport SimpleUpload from '@/components/SimpleUpload'\r\nexport default {\r\n  components: { SimpleDialog, WangEditor, SimpleUpload },\r\n  props: {\r\n  },\r\n  data() {\r\n    return {\r\n      deleteFileList: [],\r\n      form: {},\r\n      defaultMainSDProps: {\r\n        form: {},\r\n        keyWord: 'BaseUser',\r\n        formItems: [\r\n          { name: '标题', field: 'channelCName', placeholder: '标题不能为空', type: 'input' }\r\n        ],\r\n        formRules: {\r\n          channelCName: [{ required: true, message: '标题不能为空', trigger: 'blur' }]\r\n        },\r\n        defaultDBProps: {\r\n          width: '80%',\r\n          someFlags: {\r\n            needMaxBtn: true\r\n          },\r\n          footButtons: { repeatAdd: { show: false }}\r\n        }\r\n      },\r\n      fileMaxSize: 10,\r\n      imgMaxSize: 1,\r\n      imgAllowType: CONSTANT.FILE_TYPE.IMG,\r\n      upImgButtonInfo: { name: '+', tooltip: '请上传图片文件，单个文件大小不超过1M。' },\r\n      upFileButtonInfo: { name: '点击上传附件', tooltip: '可以上传各种类型的文件，但单个文件大小不超过10M。' },\r\n      allowMultiFiles: true\r\n    }\r\n  },  \r\n  methods: {\r\n    async showDialog(val, form = {}) {\r\n      this.form = _.cloneDeep(form) // 打开的时候用cloneDeep，这样外层传的时候就直接传row就可以了\r\n      this.$refs.simpleDlg.showDialog(val, this.form, true)\r\n    },\r\n    handleImgChange(imgList) {\r\n      this.$set(this.form, 'images', imgList)    \r\n      this.$refs.simpleDlg.verifyValid()\r\n    },\r\n    handleFileChange(fileList) {      \r\n      this.$set(this.form, 'files', fileList)\r\n      this.$refs.simpleDlg.verifyValid()\r\n    },\r\n    async confirm(option, type, form) {      \r\n      try {\r\n        const resp = await listAPI.editOneNode('MainChannelContent', form)\r\n        await this.$refs.imgUpload.handleUpload(this.$store.getters.userInfo.id, resp.data.id, 1)\r\n        await this.$refs.fileUpload.handleUpload(this.$store.getters.userInfo.id, resp.data.id, 2)\r\n        setTimeout(() => {\r\n          // 阻止异步刷新\r\n          this.$refs.simpleDlg.$parent.$parent.initDataList()\r\n        }, 700)\r\n      } catch (e) {\r\n        console.log(e)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}