{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\components\\BtnSearch.vue?vue&type=style&index=0&id=34bf3db8&lang=scss&scoped=true&","dependencies":[{"path":"D:\\software\\front\\front\\src\\components\\BtnSearch.vue","mtime":1715830118028},{"path":"D:\\software\\front\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1715830112594},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1715830117510},{"path":"D:\\software\\front\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1715830115271},{"path":"D:\\software\\front\\front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1715830116699},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpAaW1wb3J0ICJ+QC9hc3NldHMvY3NzL3ZhcmlhYmxlcy5zY3NzIjsNCiNzZWFyY2gtYm94IHsNCiAgbWFyZ2luLWJvdHRvbTogMjBweDsNCn0NCi5uby1hZHZhbmNlZC1zZWFyY2ggew0KICBkaXNwbGF5OiBmbGV4Ow0KICAuZWwtYnV0dG9uIHsNCiAgICBtYXJnaW4tbGVmdDogMTBweDsNCiAgfQ0KfQ0KLmFkdmFuY2VkLXNlYXJjaC1maWVsZC1ib3ggew0KICBkaXNwbGF5OiBncmlkOw0KICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyNDBweCwgMWZyKSk7DQogIGdhcDogMTBweDsNCiAgLmVsLWJ1dHRvbiArIC5lbC1idXR0b24gew0KICAgIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KICB9DQp9DQovLyAuZWwtYnV0dG9uLmlzLXBsYWluOmhvdmVyIHsNCiAgLy8gYm9yZGVyLWNvbG9yOiAkLS1jb2xvci1zdWJzaWRpYXJ5Ow0KICAvLyBjb2xvcjogJC0tY29sb3Itc3Vic2lkaWFyeTsNCi8vIH0NCg=="},{"version":3,"sources":["BtnSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BtnSearch.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"search-box\"> <!-- class=\"search-wrapper\" -->\r\n    <div v-if=\"noAdvancedSearch\" class=\"no-advanced-search\">\r\n      <el-input ref=\"inputInfo\" v-model.trim=\"input\" size=\"mini\" :placeholder=\"placeholder\" clearable />\r\n      <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-search\" @click=\"searchClick('common')\">搜索</el-button>\r\n    </div>\r\n    <div v-else class=\"advanced-search-field-box\">\r\n      <div v-for=\"(item, index) in searchItems\" :key=\"index\" class=\"search-item\">\r\n        <slot v-if=\"item.type.startsWith('customize')\" :name=\"item.slot\" />\r\n        <el-cascader v-if=\"item.type==='cascader'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :loading=\"loading\" :options=\"item.options\" :props=\"{\r\n          label: 'name', value: 'id', checkStrictly: item.checkStrictly\r\n        }\" :placeholder=\"item.placeholder\" clearable />\r\n        <el-select v-if=\"item.type==='select'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :placeholder=\"item.placeholder?item.placeholder:item.name\" :loading=\"loading\" clearable>\r\n          <el-option v-for=\"citem in item.options\" :key=\"citem.id\" :label=\"citem.name\" :value=\"citem.id\" />\r\n        </el-select>\r\n        <el-input v-if=\"item.type==='input'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :placeholder=\"item.placeholder?item.placeholder:item.name\" clearable />\r\n        <el-date-picker v-if=\"item.type==='date'\" v-model=\"waitSearch[item.field]\" size=\"mini\" type=\"daterange\" :start-placeholder=\"item.placeholder?item.placeholder:item.name+'：从'\" :end-placeholder=\"item.placeholder?item.placeholder:item.name+'：到'\" />\r\n      </div>\r\n      <div class=\"search-item search-button\">\r\n        <el-button size=\"mini\" type=\"success\" icon=\"el-icon-search\" @click=\"searchClick('notCommon')\">搜索</el-button>\r\n        <el-button size=\"mini\" plain icon=\"el-icon-refresh-left\" @click=\"reset()\">重置</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { resetForm } from '@/utils/common'\r\nimport _ from 'lodash'\r\nexport default {\r\n  name: 'BtnSearch',\r\n  // 默认情况下，一个组件上的 v-model 会把 value 用作 prop 且把 input 用作 event\r\n  model: {\r\n    prop: 'value', // 注意，是prop，不带s\r\n    event: 'input'\r\n  },\r\n  props: {\r\n    value: { type: [Object, String], default: '' }, // 父组件 v-model 绑定值\r\n    // 不显示高级搜索\r\n    noAdvancedSearch: { type: Boolean, default: false },\r\n    searchItems: { type: Array, default: () => [] },\r\n    placeholder: { type: String, default: '请输入名称' },\r\n    searchName: { type: [String, Array], default: '' }\r\n  },\r\n  data() {\r\n    return {\r\n      waitSearch: [],\r\n      input: '',\r\n      options: [],\r\n      currentField: '',\r\n      loading: false\r\n    }\r\n  },\r\n  watch: {\r\n    // waitSearch: {\r\n    //   handler(newVal) {\r\n    //     // 父组件有 v-model 时的操作\r\n    //     this.$emit('input', newVal)\r\n    //     // 是否是空字符串（no-advanced-search === true）\r\n    //     const blankString = getValueType(newVal) === 'string' && newVal === ''\r\n    //     // 是否是对象并且对象中的值全为空（no-advanced-search === false）\r\n    //     const blankStringObject = getValueType(newVal) === 'object' && isObjEmpty(newVal)\r\n    //     if (blankString || blankStringObject) {\r\n    //       this.$emit('search', newVal)\r\n    //     }\r\n    //   },\r\n    //   deep: true\r\n    // }\r\n  },\r\n  create() {\r\n    this.waitSearch = _.cloneDeep(this.value)\r\n  },\r\n  methods: {\r\n    async handleFocus(val) {\r\n      // if (this.currentField === val.field) return\r\n      // this.currentField = val.field\r\n      // const index = this.searchItems.findIndex(item => item.field === val.field)\r\n      // if (index >= 0) {\r\n      //   try {\r\n      //     if (val.type === 'cascader') {\r\n      //       const res = await treeAPI.getAllNodes({\r\n      //         keyWords: val.keyWords,\r\n      //         virtualRootFlag: false\r\n      //       })\r\n      //       // 除去children\r\n      //       this.searchItems[index].options = JSON.parse(\r\n      //         JSON.stringify(res.data).replace(/\\\"children\"\\:\\[]/g, '\"no\":0')\r\n      //       )\r\n      //     } else if (val.type === 'select') {\r\n      //       const res = await listAPI.getSomeRecords({\r\n      //         keyWords: val.keyWords, pageInfo: { page: -1 }\r\n      //       })\r\n      //       this.searchItems[index].options = res.data.content\r\n      //     }\r\n      //     this.loading = false\r\n      //   } catch (error) {\r\n      //     this.loading = false\r\n      //   }\r\n      // }\r\n      // this.$emit('focus', val.field)\r\n    },\r\n    searchClick(type) {\r\n      // this.$emit('search-click', this.waitSearch)\r\n      if (type === 'common') {\r\n        this.$emit('search-click', this.input)\r\n      } else {\r\n        this.$emit('advanced-search-click', this.waitSearch)\r\n      }\r\n    },\r\n    reset() {\r\n      this.waitSearch = resetForm(this.waitSearch)\r\n      // this.$emit('search-click', this.waitSearch)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/assets/css/variables.scss\";\r\n#search-box {\r\n  margin-bottom: 20px;\r\n}\r\n.no-advanced-search {\r\n  display: flex;\r\n  .el-button {\r\n    margin-left: 10px;\r\n  }\r\n}\r\n.advanced-search-field-box {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\r\n  gap: 10px;\r\n  .el-button + .el-button {\r\n    margin-left: 10px;\r\n  }\r\n}\r\n// .el-button.is-plain:hover {\r\n  // border-color: $--color-subsidiary;\r\n  // color: $--color-subsidiary;\r\n// }\r\n</style>\r\n"]}]}