{"remainingRequest":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\components\\DataTree.vue?vue&type=style&index=0&id=6ce8c2d0&lang=scss&scoped=true&","dependencies":[{"path":"D:\\software\\front\\front\\src\\components\\DataTree.vue","mtime":1715830118030},{"path":"D:\\software\\front\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1715830112594},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1715830117510},{"path":"D:\\software\\front\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1715830115271},{"path":"D:\\software\\front\\front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1715830116699},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCjo6di1kZWVwIC5lbC1jYXJkX19ib2R5IHsNCiAgcGFkZGluZzogNXB4IDEycHg7DQp9DQouY2FyZC1ub3RpdGxlIHsNCiAgYm9yZGVyOiB1bnNldDsNCiAgdHJhbnNpdGlvbjogdW5zZXQ7DQp9DQouZWwtc2Nyb2xsYmFyIC5lbC1zY3JvbGxiYXJfX3dyYXAgew0KICBvdmVyZmxvdy14OiBoaWRkZW47DQp9DQouZWwtdHJlZSB7DQogIG92ZXJmbG93OiBhdXRvOw0KfQ0KI3RhYmxlLWJveC10aXRsZSB7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KfQ0K"},{"version":3,"sources":["DataTree.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataTree.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-card v-adaptive-card :class=\"title ? '' : 'card-notitle'\" shadow=\"never\">\r\n    <template v-if=\"title\" slot=\"header\">\r\n      <span>{{ title.mainTitle }}</span>\r\n      <span v-if=\"title.subTitle\">&nbsp;|&nbsp;<strong>{{ title.subTitle || \"全部\" }}</strong></span>\r\n    </template>\r\n    <!--  <div v-if=\"title\" id=\"table-box-title\" slot=\"header\">\r\n      <span>{{ title }}</span>\r\n      <span v-show=\"subtitle\">\r\n        &nbsp;|&nbsp;\r\n        <strong>{{ subtitle }}</strong>\r\n      </span>\r\n    </div> -->\r\n    <el-tree ref=\"dataTree\" v-adaptive-card v-loading=\"loading\" :lazy=\"lazy\" :load=\"lazyLoad\" highlight-current node-key=\"id\" :show-checkbox=\"checkFlag\" :expand-on-node=\"false\" :default-expanded-keys=\"[-1]\" :data=\"treeData\" :props=\"defaultDataProps\" @node-click=\"handleNodeClick\" />\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport treeAPI from '@/api/tree'\r\nimport adaptiveCard from '@/directive/el-card'\r\n\r\nexport default {\r\n  name: 'DataTree',\r\n  directives: { adaptiveCard },\r\n  props: {\r\n    defaultProps: { // 注意这里的默认值没有用\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          title: { mainTitle: '', subTitle: '' },\r\n          checkFlag: { type: Boolean, default: false },\r\n          lazy: { type: Boolean, default: false },\r\n          virtualRootFlag: { type: Boolean, default: true },\r\n          keyWord: { type: String, default: '' },\r\n          initSearchWords: { // 初始时查询的三个关键词\r\n            searchKey: { },\r\n            regKey: { },\r\n            andor: { }\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      treeData: [],\r\n      defaultDataProps: {\r\n        label: 'name',\r\n        children: 'children',\r\n        isLeaf: 'isLeaf'\r\n      },\r\n      loading: false,\r\n      maps: new Map()\r\n    }\r\n  },\r\n  computed: {\r\n    // variables() {\r\n    //   return variables\r\n    // },\r\n    keyWord() {\r\n      return this.defaultProps.keyWord ? this.defaultProps.keyWord : null\r\n    },\r\n    title() {\r\n      return this.defaultProps.title ? this.defaultProps.title : null\r\n    },\r\n    lazy() {\r\n      if (Object.prototype.hasOwnProperty.call(this.defaultProps, 'lazy')) {\r\n        return this.defaultProps.lazy\r\n      }\r\n      return true\r\n    },\r\n    checkFlag() {\r\n      if (Object.prototype.hasOwnProperty.call(this.defaultProps, 'checkFlag')) {\r\n        return this.defaultProps.checkFlag\r\n      }\r\n      return false\r\n    },\r\n    sort() {\r\n      return this.defaultProps.sort ? this.defaultProps.sort : { properties: 'theOrder', direction: 'ASC' }\r\n    },\r\n    virtualRootFlag() {\r\n      if (Object.prototype.hasOwnProperty.call(this.defaultProps, 'virtualRootFlag')) {\r\n        return this.defaultProps.virtualRootFlag\r\n      }\r\n      return false\r\n    },\r\n    initSearchWords() {\r\n      return this.defaultProps.initSearchWords ? this.defaultProps.initSearchWords : { }\r\n    }\r\n  },\r\n  created() {\r\n    this.initDataTree()\r\n  },\r\n  methods: {\r\n    // 初始懒加载\r\n    lazyLoad(tree, resolve) {\r\n      if (tree.key) {\r\n        treeAPI.getAllNodes({\r\n          keyWords: this.keyWord,\r\n          virtualRootFlag: this.virtualRootFlag,\r\n          searchKey: this.searchKey,\r\n          lazy: true,\r\n          parentId: tree.key,\r\n          sort: this.sort\r\n        }).then(res => {\r\n          this.maps.set(tree.key, { tree, resolve })\r\n          resolve(res.data)\r\n        })\r\n      }\r\n    },\r\n    // 初始化/刷新树\r\n    async initDataTree(parentId) {\r\n      this.loading = true\r\n      if (!parentId) {\r\n        parentId = -1\r\n      }\r\n      try {\r\n        const res = await treeAPI.getAllNodes({\r\n          keyWords: this.keyWord,\r\n          virtualRootFlag: this.virtualRootFlag,\r\n          searchKey: this.searchKey,\r\n          lazy: this.lazy,\r\n          parentId: parentId,\r\n          sort: this.sort\r\n        })\r\n        this.treeData = res.data\r\n      } catch (error) { this.loading = false }\r\n      this.loading = false\r\n    },\r\n    // 点击节点事件\r\n    handleNodeClick(row) {\r\n      this.$emit('node-click', row)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-card__body {\r\n  padding: 5px 12px;\r\n}\r\n.card-notitle {\r\n  border: unset;\r\n  transition: unset;\r\n}\r\n.el-scrollbar .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.el-tree {\r\n  overflow: auto;\r\n}\r\n#table-box-title {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n"]}]}