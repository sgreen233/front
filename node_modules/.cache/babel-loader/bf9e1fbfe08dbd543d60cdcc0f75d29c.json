{"remainingRequest":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\software\\front\\src\\store\\modules\\permission.js","mtime":1670666519691},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgcm91dGVyLCB7IGNvbnN0YW50Um91dGVzIH0gZnJvbSAnQC9yb3V0ZXIvaW5kZXgnOwppbXBvcnQgTGF5b3V0IGZyb20gJ0AvbGF5b3V0L0luZGV4JzsKLyoqDQogKiDpgJLlvZLmnYPpmZDov4fmu6TlkozmlbDmja7ovazmjaINCiAqIEBwYXJhbSByb3V0ZXMNCiAqIEBwYXJhbSBwYXJlbnRJZA0KICovCgpleHBvcnQgdmFyIGZpbHRlckFzeW5jUm91dGVzID0gZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGVzKSB7CiAgdmFyIHBhcmVudFBhdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnOwogIHZhciByZXN1bHQgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciB0ZW1wID0gZ2VuZXJhdGVSb3V0ZShyb3V0ZSwgcGFyZW50UGF0aCk7IC8vIOWmguaenOeItue6p+i3r+eUseWMheWQq+WtkOi3r+eUse+8jOmAkuW9kuiwg+eUqCBmaWx0ZXJBc3luY1JvdXRlcwoKICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgdmFyIGNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGUuY2hpbGRyZW4sIHJvdXRlLnBhdGgpOwogICAgICB0ZW1wLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICB9CgogICAgcmVzdWx0LnB1c2godGVtcCk7IC8vIOa3u+WKoOi3r+eUseinhOWImQogICAgLy8g5aaC5p6cIHBhcmVudFBhdGgg5LiN5Li656m677yM5YiZ6K+05piO5piv5a2Q57qn6Lev55SxCgogICAgaWYgKHBhcmVudFBhdGgpIHsvLyBjb25zb2xlLmxvZyhwYXJlbnROYW1lLCAn5re75Yqg5LiA5p2h5paw55qE6Lev55Sx6KeE5YiZ6K6w5b2V5L2c5Li6546w5pyJ6Lev55Sx55qE5a2Q6Lev55SxJykKICAgICAgLy8gLy8g5re75Yqg5LiA5p2h5paw55qE6Lev55Sx6KeE5YiZ6K6w5b2V5L2c5Li6546w5pyJ6Lev55Sx55qE5a2Q6Lev55SxCiAgICAgIC8vIHJvdXRlci5hZGRSb3V0ZShwYXJlbnROYW1lLCByb3V0ZSkKICAgIH0gZWxzZSB7CiAgICAgIC8vIOWQpuWImeS4uueItue6p+i3r+eUsQogICAgICAvLyDmt7vliqDkuIDmnaHmlrDot6/nlLHop4TliJkKICAgICAgcm91dGVyLmFkZFJvdXRlKHRlbXApOwogICAgfQogIH0pOwogIHJldHVybiByZXN1bHQ7Cn07IC8vIOeUn+aIkOi3r+eUseagvOW8jwoKZXhwb3J0IHZhciBnZW5lcmF0ZVJvdXRlID0gZnVuY3Rpb24gZ2VuZXJhdGVSb3V0ZShyb3V0ZSwgcGFyZW50UGF0aCkgewogIHZhciBwYXRoID0gcGFyZW50UGF0aCA/IHBhcmVudFBhdGggKyAnLycgKyByb3V0ZS5wYXRoIDogcm91dGUucGF0aDsKICB2YXIgdGVtcFJvdXRlID0gewogICAgcGF0aDogcGF0aCwKICAgIG5hbWU6IHBhdGgucmVwbGFjZSgvXC8vZywgJycpLAogICAgLy8g5Y676ZmkIHBhdGgg5Lit55qEIC8KICAgIG1ldGE6IHsKICAgICAgdGl0bGU6IHJvdXRlLm5hbWUsCiAgICAgIGljb246IHJvdXRlLmljb24sCiAgICAgIGFjdGl2ZU1lbnU6IHJvdXRlLmFjdGl2ZU1lbnUsCiAgICAgIGlzQnJlYWRjcnVtYjogdHJ1ZSwKICAgICAgYWZmaXg6IGZhbHNlLAogICAgICAvLyBub0NhY2hlOiB0cnVlCiAgICAgIGlzQ2FjaGU6IHRydWUKICAgIH0sCiAgICBoaWRkZW46IHJvdXRlLmhpZGRlbgogIH07CiAgdGVtcFJvdXRlLmNvbXBvbmVudCA9IHJvdXRlLmNvbXBvbmVudCA9PT0gJ0xheW91dCcgPyBMYXlvdXQgOiBsb2FkVmlldyhyb3V0ZS5jb21wb25lbnQpOwogIHJldHVybiB0ZW1wUm91dGU7Cn07CmV4cG9ydCB2YXIgbG9hZFZpZXcgPSBmdW5jdGlvbiBsb2FkVmlldyh2aWV3KSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICByZXR1cm4gcmVxdWlyZShbIkAvdmlld3MvIi5jb25jYXQodmlldyldLCByZXNvbHZlKTsKICB9Owp9Owp2YXIgcGVybWlzc2lvbiA9IHsKICBzdGF0ZTogewogICAgcm91dGVzOiBjb25zdGFudFJvdXRlcywKICAgIGFkZFJvdXRlczogW10KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1JPVVRFUzogZnVuY3Rpb24gU0VUX1JPVVRFUyhzdGF0ZSwgcm91dGVzKSB7CiAgICAgIHZhciBlcnJvclBhZ2UgPSBbewogICAgICAgIHBhdGg6ICcqJywKICAgICAgICByZWRpcmVjdDogJy80MDQnLAogICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICB9XTsKICAgICAgc3RhdGUuYWRkUm91dGVzID0gcm91dGVzOwogICAgICBzdGF0ZS5yb3V0ZXMgPSBjb25zdGFudFJvdXRlcy5jb25jYXQocm91dGVzKS5jb25jYXQoZXJyb3JQYWdlKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIOiOt+WPlui3r+eUsQogICAgZ2VuZXJhdGVSb3V0ZXM6IGZ1bmN0aW9uIGdlbmVyYXRlUm91dGVzKF9yZWYsIGFzeW5jUm91dGVzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgY29tbWl0KCdTRVRfUk9VVEVTJywgYXN5bmNSb3V0ZXMpOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgcGVybWlzc2lvbjs="},{"version":3,"sources":["D:/software/front/src/store/modules/permission.js"],"names":["router","constantRoutes","Layout","filterAsyncRoutes","routes","parentPath","result","forEach","route","temp","generateRoute","children","length","path","push","addRoute","tempRoute","name","replace","meta","title","icon","activeMenu","isBreadcrumb","affix","isCache","hidden","component","loadView","view","resolve","require","permission","state","addRoutes","mutations","SET_ROUTES","errorPage","redirect","concat","actions","generateRoutes","asyncRoutes","commit"],"mappings":"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","sourcesContent":["import router, { constantRoutes } from '@/router/index'\r\nimport Layout from '@/layout/Index'\r\n\r\n/**\r\n * 递归权限过滤和数据转换\r\n * @param routes\r\n * @param parentId\r\n */\r\n\r\nexport const filterAsyncRoutes = (routes, parentPath = '') => {\r\n  const result = []\r\n  routes.forEach(route => {\r\n    const temp = generateRoute(route, parentPath)\r\n    // 如果父级路由包含子路由，递归调用 filterAsyncRoutes\r\n    if (route.children && route.children.length) {\r\n      const children = filterAsyncRoutes(route.children, route.path)\r\n      temp.children = children\r\n    }\r\n    result.push(temp)\r\n\r\n    // 添加路由规则\r\n    // 如果 parentPath 不为空，则说明是子级路由\r\n    if (parentPath) {\r\n      // console.log(parentName, '添加一条新的路由规则记录作为现有路由的子路由')\r\n      // // 添加一条新的路由规则记录作为现有路由的子路由\r\n      // router.addRoute(parentName, route)\r\n    } else {\r\n      // 否则为父级路由\r\n      // 添加一条新路由规则\r\n      router.addRoute(temp)\r\n    }\r\n  })\r\n\r\n  return result\r\n}\r\n\r\n// 生成路由格式\r\nexport const generateRoute = (route, parentPath) => {\r\n  const path = parentPath ? parentPath + '/' + route.path : route.path\r\n  const tempRoute = {\r\n    path: path,\r\n    name: path.replace(/\\//g, ''), // 去除 path 中的 /\r\n    meta: {\r\n      title: route.name,\r\n      icon: route.icon,\r\n      activeMenu: route.activeMenu,\r\n      isBreadcrumb: true,\r\n      affix: false,\r\n      // noCache: true\r\n      isCache: true\r\n    },\r\n    hidden: route.hidden\r\n  }\r\n  tempRoute.component = route.component === 'Layout' ? Layout : loadView(route.component)\r\n  return tempRoute\r\n}\r\n\r\nexport const loadView = (view) => {\r\n  return (resolve) => require([`@/views/${view}`], resolve)\r\n}\r\n\r\nconst permission = {\r\n  state: {\r\n    routes: constantRoutes,\r\n    addRoutes: []\r\n  },\r\n  mutations: {\r\n    SET_ROUTES: (state, routes) => {\r\n      const errorPage = [{ path: '*', redirect: '/404', hidden: true }]\r\n      state.addRoutes = routes\r\n      state.routes = constantRoutes.concat(routes).concat(errorPage)\r\n    }\r\n  },\r\n  actions: {\r\n    // 获取路由\r\n    generateRoutes({ commit }, asyncRoutes) {\r\n      commit('SET_ROUTES', asyncRoutes)\r\n    }\r\n  }\r\n}\r\n\r\nexport default permission\r\n"]}]}