{"remainingRequest":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\front\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\software\\front\\front\\src\\store\\modules\\user.js","mtime":1715837807692},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovc29mdHdhcmUvZnJvbnQvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgdXNlckFQSSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHJvdXRlciwgeyByZXNldFJvdXRlciB9IGZyb20gJ0Avcm91dGVyJzsKdmFyIHN0YXRlID0gewogIHVzZXJJbmZvOiB7fSwKICByb2xlczogW10sCiAgY29udGVzdFR5cGVzOiBbXQp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9VU0VSSU5GTzogZnVuY3Rpb24gU0VUX1VTRVJJTkZPKHN0YXRlLCB1c2VySW5mbykgewogICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKICB9LAogIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgc3RhdGUucm9sZXMgPSByb2xlczsKICB9LAogIFNFVF9DT05URVNUVFlQRVM6IGZ1bmN0aW9uIFNFVF9DT05URVNUVFlQRVMoc3RhdGUsIHR5cGVzKSB7CiAgICBzdGF0ZS5jb250ZXN0VHlwZXMgPSB0eXBlczsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIOeUqOaIt+eZu+W9lQogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdXNlckluZm8uYWNjb3VudCA9IHVzZXJJbmZvLmFjY291bnQudHJpbSgpOwogICAgdXNlckluZm8ucGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZC50cmltKCk7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB1c2VyQVBJLmxvZ2luKHVzZXJJbmZvKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgdmFyIHRva2VuID0gcmVzcC5kYXRhOwogICAgICAgIHNldFRva2VuKHRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZjIsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgdXNlckluZm8udXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZS50cmltKCk7CiAgICB1c2VySW5mby5wYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkLnRyaW0oKTsKICAgIHVzZXJJbmZvLnBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQudHJpbSgpOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdXNlckFQSS5sb2dpbih1c2VySW5mbykudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHZhciB0b2tlbiA9IHJlc3AuZGF0YTsKICAgICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB1c2VyQVBJLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKCFyZXMuZGF0YSkgewogICAgICAgICAgcmVqZWN0KCfpqozor4HlpLHotKXvvIzor7fph43mlrDnmbvlvZUnKTsKICAgICAgICB9IC8vIOS4u+mimOiJsuS4uuepuueahOabtOaUuQoKCiAgICAgICAgcmVzLmRhdGEudXNlckluZm8udGhlbWVDb2xvciA/ICcnIDogcmVzLmRhdGEudXNlckluZm8udGhlbWVDb2xvciA9ICcjMDA5MTQwJzsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSSU5GTycsIHJlcy5kYXRhLnVzZXJJbmZvKTsKICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIHJlcy5kYXRhLnJvbGVzKTsKICAgICAgICBjb21taXQoJ1NFVF9DT05URVNUVFlQRVMnLCByZXMuZGF0YS5jb250ZXN0VHlwZXMpOwogICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g55So5oi355m75Ye6CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZSwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdXNlckFQSS5sb2dvdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSSU5GTycsIHt9KTsKICAgICAgICBjb21taXQoJ1NFVF9ST0xFUycsIFtdKTsKICAgICAgICBjb21taXQoJ1NFVF9DT05URVNUVFlQRVMnLCBbXSk7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgICByZXNldFJvdXRlcigpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKCiAgICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOWIoOmZpCB0b2tlbiByb2xlcwogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8g5pu05paw55So5oi35L+h5oGvCiAgdXBkYXRlVXNlckluZm86IGZ1bmN0aW9uIHVwZGF0ZVVzZXJJbmZvKF9yZWY2LCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgIHJldHVybiBjb21taXQoJ1NFVF9VU0VSSU5GTycsIHVzZXJJbmZvKTsKICB9LAogIC8vIOWKqOaAgee8lui+keadg+mZkAogIGNoYW5nZVJvbGVzOiBmdW5jdGlvbiBjaGFuZ2VSb2xlcyhfcmVmNywgcm9sZSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIF95aWVsZCRkaXNwYXRjaCwgcm9sZXMsIGFjY2Vzc1JvdXRlczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNy5jb21taXQsIGRpc3BhdGNoID0gX3JlZjcuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdnZXRVc2VySW5mbycpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF95aWVsZCRkaXNwYXRjaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgcm9sZXMgPSBfeWllbGQkZGlzcGF0Y2gucm9sZXM7CiAgICAgICAgICAgICAgcmVzZXRSb3V0ZXIoKTsgLy8gZ2VuZXJhdGUgYWNjZXNzaWJsZSByb3V0ZXMgbWFwIGJhc2VkIG9uIHJvbGVzCgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIHJvbGVzLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgYWNjZXNzUm91dGVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAvLyBkeW5hbWljYWxseSBhZGQgYWNjZXNzaWJsZSByb3V0ZXMKICAgICAgICAgICAgICByb3V0ZXIuYWRkUm91dGVzKGFjY2Vzc1JvdXRlcyk7IC8vIHJlc2V0IHZpc2l0ZWQgdmlld3MgYW5kIGNhY2hlZCB2aWV3cwoKICAgICAgICAgICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["D:/software/front/front/src/store/modules/user.js"],"names":["userAPI","setToken","removeToken","router","resetRouter","state","userInfo","roles","contestTypes","mutations","SET_TOKEN","token","SET_USERINFO","SET_ROLES","SET_CONTESTTYPES","types","actions","login","commit","account","trim","password","Promise","resolve","reject","then","resp","data","catch","error","register","username","getUserInfo","dispatch","res","themeColor","logout","root","resetToken","updateUserInfo","changeRoles","role","accessRoutes","addRoutes","namespaced"],"mappings":";;;;AAAA,OAAOA,OAAP,MAAoB,YAApB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,cAAtC;AACA,OAAOC,MAAP,IAAiBC,WAAjB,QAAoC,UAApC;AAEA,IAAMC,KAAK,GAAG;AACZC,EAAAA,QAAQ,EAAE,EADE;AAEZC,EAAAA,KAAK,EAAE,EAFK;AAGZC,EAAAA,YAAY,EAAE;AAHF,CAAd;AAMA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,SAAS,EAAE,mBAACL,KAAD,EAAQM,KAAR,EAAkB;AAC3BN,IAAAA,KAAK,CAACM,KAAN,GAAcA,KAAd;AACD,GAHe;AAIhBC,EAAAA,YAAY,EAAE,sBAACP,KAAD,EAAQC,QAAR,EAAqB;AACjCD,IAAAA,KAAK,CAACC,QAAN,GAAiBA,QAAjB;AACD,GANe;AAOhBO,EAAAA,SAAS,EAAE,mBAACR,KAAD,EAAQE,KAAR,EAAkB;AAC3BF,IAAAA,KAAK,CAACE,KAAN,GAAcA,KAAd;AACD,GATe;AAUhBO,EAAAA,gBAAgB,EAAE,0BAACT,KAAD,EAAQU,KAAR,EAAkB;AAClCV,IAAAA,KAAK,CAACG,YAAN,GAAqBO,KAArB;AACD;AAZe,CAAlB;AAeA,IAAMC,OAAO,GAAG;AACd;AACAC,EAAAA,KAFc,uBAEIX,QAFJ,EAEc;AAAA,QAApBY,MAAoB,QAApBA,MAAoB;AAC1BZ,IAAAA,QAAQ,CAACa,OAAT,GAAmBb,QAAQ,CAACa,OAAT,CAAiBC,IAAjB,EAAnB;AACAd,IAAAA,QAAQ,CAACe,QAAT,GAAoBf,QAAQ,CAACe,QAAT,CAAkBD,IAAlB,EAApB;AACA,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCxB,MAAAA,OAAO,CAACiB,KAAR,CAAcX,QAAd,EAAwBmB,IAAxB,CAA6B,UAAAC,IAAI,EAAI;AACnC,YAAMf,KAAK,GAAGe,IAAI,CAACC,IAAnB;AACA1B,QAAAA,QAAQ,CAACU,KAAD,CAAR;AACAY,QAAAA,OAAO;AACR,OAJD,EAIGK,KAJH,CAIS,UAAAC,KAAK,EAAI;AAChBL,QAAAA,MAAM,CAACK,KAAD,CAAN;AACD,OAND;AAOD,KARM,CAAP;AASD,GAda;AAedC,EAAAA,QAfc,2BAeOxB,QAfP,EAeiB;AAAA,QAApBY,MAAoB,SAApBA,MAAoB;AAC7BZ,IAAAA,QAAQ,CAACyB,QAAT,GAAoBzB,QAAQ,CAACyB,QAAT,CAAkBX,IAAlB,EAApB;AACAd,IAAAA,QAAQ,CAACe,QAAT,GAAoBf,QAAQ,CAACe,QAAT,CAAkBD,IAAlB,EAApB;AACAd,IAAAA,QAAQ,CAACe,QAAT,GAAoBf,QAAQ,CAACe,QAAT,CAAkBD,IAAlB,EAApB;AACA,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCxB,MAAAA,OAAO,CAACiB,KAAR,CAAcX,QAAd,EAAwBmB,IAAxB,CAA6B,UAAAC,IAAI,EAAI;AACnC,YAAMf,KAAK,GAAGe,IAAI,CAACC,IAAnB;AACA1B,QAAAA,QAAQ,CAACU,KAAD,CAAR;AACAY,QAAAA,OAAO;AACR,OAJD,EAIGK,KAJH,CAIS,UAAAC,KAAK,EAAI;AAChBL,QAAAA,MAAM,CAACK,KAAD,CAAN;AACD,OAND;AAOD,KARM,CAAP;AASD,GA5Ba;AA6Bd;AACAG,EAAAA,WA9Bc,8BA8BoB;AAAA,QAApBd,MAAoB,SAApBA,MAAoB;AAAA,QAAZe,QAAY,SAAZA,QAAY;AAChC,WAAO,IAAIX,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCxB,MAAAA,OAAO,CAACgC,WAAR,GAAsBP,IAAtB,CAA2B,UAAAS,GAAG,EAAI;AAChC,YAAI,CAACA,GAAG,CAACP,IAAT,EAAe;AACbH,UAAAA,MAAM,CAAC,YAAD,CAAN;AACD,SAH+B,CAIhC;;;AACAU,QAAAA,GAAG,CAACP,IAAJ,CAASrB,QAAT,CAAkB6B,UAAlB,GAA+B,EAA/B,GAAoCD,GAAG,CAACP,IAAJ,CAASrB,QAAT,CAAkB6B,UAAlB,GAA+B,SAAnE;AACAjB,QAAAA,MAAM,CAAC,cAAD,EAAiBgB,GAAG,CAACP,IAAJ,CAASrB,QAA1B,CAAN;AACAY,QAAAA,MAAM,CAAC,WAAD,EAAcgB,GAAG,CAACP,IAAJ,CAASpB,KAAvB,CAAN;AACAW,QAAAA,MAAM,CAAC,kBAAD,EAAqBgB,GAAG,CAACP,IAAJ,CAASnB,YAA9B,CAAN;AACAe,QAAAA,OAAO,CAACW,GAAG,CAACP,IAAL,CAAP;AACD,OAVD,EAUGC,KAVH,CAUS,UAAAC,KAAK,EAAI;AAChBL,QAAAA,MAAM,CAACK,KAAD,CAAN;AACD,OAZD;AAaD,KAdM,CAAP;AAeD,GA9Ca;AAgDd;AACAO,EAAAA,MAjDc,yBAiDsB;AAAA,QAA3BlB,MAA2B,SAA3BA,MAA2B;AAAA,QAAnBb,KAAmB,SAAnBA,KAAmB;AAAA,QAAZ4B,QAAY,SAAZA,QAAY;AAClC,WAAO,IAAIX,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCxB,MAAAA,OAAO,CAACoC,MAAR,GAAiBX,IAAjB,CAAsB,YAAM;AAC1BP,QAAAA,MAAM,CAAC,cAAD,EAAiB,EAAjB,CAAN;AACAA,QAAAA,MAAM,CAAC,WAAD,EAAc,EAAd,CAAN;AACAA,QAAAA,MAAM,CAAC,kBAAD,EAAqB,EAArB,CAAN;AACAhB,QAAAA,WAAW;AACXE,QAAAA,WAAW,GALe,CAM1B;;AACA6B,QAAAA,QAAQ,CAAC,sBAAD,EAAyB,IAAzB,EAA+B;AAAEI,UAAAA,IAAI,EAAE;AAAR,SAA/B,CAAR;AAEAd,QAAAA,OAAO;AACR,OAVD,EAUGK,KAVH,CAUS,UAAAC,KAAK,EAAI;AAChBL,QAAAA,MAAM,CAACK,KAAD,CAAN;AACD,OAZD;AAaD,KAdM,CAAP;AAeD,GAjEa;AAmEd;AACAS,EAAAA,UApEc,6BAoES;AAAA,QAAVpB,MAAU,SAAVA,MAAU;AACrB,WAAO,IAAII,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5BL,MAAAA,MAAM,CAAC,WAAD,EAAc,EAAd,CAAN;AACAhB,MAAAA,WAAW;AACXqB,MAAAA,OAAO;AACR,KAJM,CAAP;AAKD,GA1Ea;AA4Ed;AACAgB,EAAAA,cA7Ec,iCA6EajC,QA7Eb,EA6EuB;AAAA,QAApBY,MAAoB,SAApBA,MAAoB;AACnC,WAAOA,MAAM,CAAC,cAAD,EAAiBZ,QAAjB,CAAb;AACD,GA/Ea;AAiFd;AACMkC,EAAAA,WAlFQ,8BAkF0BC,IAlF1B,EAkFgC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA1BvB,cAAAA,MAA0B,SAA1BA,MAA0B,EAAlBe,QAAkB,SAAlBA,QAAkB;AAAA;AAAA,qBAKpBA,QAAQ,CAAC,aAAD,CALY;;AAAA;AAAA;AAKpC1B,cAAAA,KALoC,mBAKpCA,KALoC;AAM5CH,cAAAA,WAAW,GANiC,CAO5C;;AAP4C;AAAA,qBAQjB6B,QAAQ,CAAC,2BAAD,EAA8B1B,KAA9B,EAAqC;AAAE8B,gBAAAA,IAAI,EAAE;AAAR,eAArC,CARS;;AAAA;AAQtCK,cAAAA,YARsC;AAS5C;AACAvC,cAAAA,MAAM,CAACwC,SAAP,CAAiBD,YAAjB,EAV4C,CAY5C;;AACAT,cAAAA,QAAQ,CAAC,sBAAD,EAAyB,IAAzB,EAA+B;AAAEI,gBAAAA,IAAI,EAAE;AAAR,eAA/B,CAAR;;AAb4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAc7C;AAhGa,CAAhB;AAmGA,eAAe;AACbO,EAAAA,UAAU,EAAE,IADC;AAEbvC,EAAAA,KAAK,EAALA,KAFa;AAGbI,EAAAA,SAAS,EAATA,SAHa;AAIbO,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import userAPI from '@/api/user'\r\nimport { setToken, removeToken } from '@/utils/auth'\r\nimport router, { resetRouter } from '@/router'\r\n\r\nconst state = {\r\n  userInfo: {},\r\n  roles: [],\r\n  contestTypes: []\r\n}\r\n\r\nconst mutations = {\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  SET_USERINFO: (state, userInfo) => {\r\n    state.userInfo = userInfo\r\n  },\r\n  SET_ROLES: (state, roles) => {\r\n    state.roles = roles\r\n  },\r\n  SET_CONTESTTYPES: (state, types) => {\r\n    state.contestTypes = types\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 用户登录\r\n  login({ commit }, userInfo) {\r\n    userInfo.account = userInfo.account.trim()\r\n    userInfo.password = userInfo.password.trim()\r\n    return new Promise((resolve, reject) => {\r\n      userAPI.login(userInfo).then(resp => {\r\n        const token = resp.data\r\n        setToken(token)\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n  register({ commit }, userInfo) {\r\n    userInfo.username = userInfo.username.trim()\r\n    userInfo.password = userInfo.password.trim()\r\n    userInfo.password = userInfo.password.trim()\r\n    return new Promise((resolve, reject) => {\r\n      userAPI.login(userInfo).then(resp => {\r\n        const token = resp.data\r\n        setToken(token)\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n  // 获取用户信息\r\n  getUserInfo({ commit, dispatch }) {\r\n    return new Promise((resolve, reject) => {\r\n      userAPI.getUserInfo().then(res => {\r\n        if (!res.data) {\r\n          reject('验证失败，请重新登录')\r\n        }\r\n        // 主题色为空的更改\r\n        res.data.userInfo.themeColor ? '' : res.data.userInfo.themeColor = '#009140'\r\n        commit('SET_USERINFO', res.data.userInfo)\r\n        commit('SET_ROLES', res.data.roles)\r\n        commit('SET_CONTESTTYPES', res.data.contestTypes)\r\n        resolve(res.data)\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  // 用户登出\r\n  logout({ commit, state, dispatch }) {\r\n    return new Promise((resolve, reject) => {\r\n      userAPI.logout().then(() => {\r\n        commit('SET_USERINFO', {})\r\n        commit('SET_ROLES', [])\r\n        commit('SET_CONTESTTYPES', [])\r\n        removeToken()\r\n        resetRouter()\r\n        // reset visited views and cached views\r\n        dispatch('tagsView/delAllViews', null, { root: true })\r\n\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  // 删除 token roles\r\n  resetToken({ commit }) {\r\n    return new Promise(resolve => {\r\n      commit('SET_ROLES', [])\r\n      removeToken()\r\n      resolve()\r\n    })\r\n  },\r\n\r\n  // 更新用户信息\r\n  updateUserInfo({ commit }, userInfo) {\r\n    return commit('SET_USERINFO', userInfo)\r\n  },\r\n\r\n  // 动态编辑权限\r\n  async changeRoles({ commit, dispatch }, role) {\r\n    // const token = role + '-token'\r\n    // commit('SET_TOKEN', token)\r\n    // setToken(token)\r\n\r\n    const { roles } = await dispatch('getUserInfo')\r\n    resetRouter()\r\n    // generate accessible routes map based on roles\r\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\r\n    // dynamically add accessible routes\r\n    router.addRoutes(accessRoutes)\r\n\r\n    // reset visited views and cached views\r\n    dispatch('tagsView/delAllViews', null, { root: true })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n\r\n"]}]}