{"remainingRequest":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\front\\src\\utils\\request.js","dependencies":[{"path":"D:\\software\\front\\front\\src\\utils\\request.js","mtime":1715830118042},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOyAvLyDliJvlu7phYXhpb3Plrp7kvosKCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICAvLyBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLCAvLyB1cmwgPSBiYXNlIHVybCArIHJlcXVlc3QgdXJsCiAgYmFzZVVSTDogJy9hcGknLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAvLyBzZW5kIGNvb2tpZXMgd2hlbiBjcm9zcy1kb21haW4gcmVxdWVzdHMKICB0aW1lb3V0OiAxMjAgKiAxMDAwIC8vIHJlcXVlc3QgdGltZW91dAoKfSk7IC8vIHJlcXVlc3QgaW50ZXJjZXB0b3Ig6L+Z5Liq6YOo5YiG5L+d55WZ77yM5b2T5ZCO56uv57O757uf6ZyA6KaB5Lyg6YCS5ZSv5LiA5Yet6K+B55qEdG9rZW7ml7bkvb/nlKgKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKCk7Ci8vIHJlc3BvbnNlIGludGVyY2VwdG9yCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgKLyoqDQogKiBJZiB5b3Ugd2FudCB0byBnZXQgaHR0cCBpbmZvcm1hdGlvbiBzdWNoIGFzIGhlYWRlcnMgb3Igc3RhdHVzDQogKiBQbGVhc2UgcmV0dXJuICByZXNwb25zZSA9PiByZXNwb25zZQ0KKi8KCi8qKg0KICogRGV0ZXJtaW5lIHRoZSByZXF1ZXN0IHN0YXR1cyBieSBjdXN0b20gc3RhdHVzDQogKiBIZXJlIGlzIGp1c3QgYW4gZXhhbXBsZQ0KICogWW91IGNhbiBhbHNvIGp1ZGdlIHRoZSBzdGF0dXMgYnkgSFRUUCBTdGF0dXMgQ29kZQ0KICovCmZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwoKICBpZiAoIXJlcy5jb2RlKSB7CiAgICAvLyDmlofku7bkuIvovb0KICAgIHJldHVybiByZXM7CiAgfSAvLyBpZiB0aGUgY3VzdG9tIHN0YXR1cyBpcyBub3QgMjAwLCBpdCBpcyBqdWRnZWQgYXMgYW4gZXJyb3IuCgoKICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7CiAgICBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJywKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgZHVyYXRpb246IDUgKiAxMDAwCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJykpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgdmFyIF9lcnJvciRyZXNwb25zZTsKCiAgdmFyIGVycm9yRGF0YSA9IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlLmRhdGE7IC8vIDQwMDfvvJrlkI7lj7DnmoR0b2tlbuWkseaViO+8jOmcgOimgemHjeaWsOiOt+WPlgoKICBpZiAoZXJyb3JEYXRhLnN0YXR1cyA9PT0gNDAwNykgewogICAgTWVzc2FnZUJveC5jb25maXJtKCfnmbvlvZXnirbmgIHlt7LlpLHmlYjvvIzor7fph43mlrDnmbvlvZUnLCAn56Gu5a6a6YCA5Ye6JywgewogICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgIHNob3dDbG9zZTogZmFsc2UKICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsgLy8g5Li65LqG6YeN5paw5a6e5L6L5YyWdnVlLXJvdXRlcuWvueixoSDpgb/lhY1idWcKICAgICAgfSk7CiAgICB9KTsKICB9IGVsc2UgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IGVycm9yRGF0YS5tZXNzYWdlLAogICAgICB0eXBlOiAnZXJyb3InLAogICAgICBkdXJhdGlvbjogMyAqIDEwMDAKICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["D:/software/front/front/src/utils/request.js"],"names":["axios","Message","MessageBox","store","service","create","baseURL","withCredentials","timeout","interceptors","request","use","response","res","data","code","status","message","type","duration","Promise","reject","Error","error","errorData","confirm","confirmButtonText","cancelButtonText","showClose","then","dispatch","location","reload"],"mappings":";AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CACA;;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC3B;AACAC,EAAAA,OAAO,EAAE,MAFkB;AAG3BC,EAAAA,eAAe,EAAE,IAHU;AAGJ;AACvBC,EAAAA,OAAO,EAAE,MAAM,IAJY,CAIP;;AAJO,CAAb,CAAhB,C,CAOA;;AACAJ,OAAO,CAACK,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B;AAkBA;AACAP,OAAO,CAACK,YAAR,CAAqBG,QAArB,CAA8BD,GAA9B;AAEE;AACF;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACE,UAAAC,QAAQ,EAAI;AACV,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MAAI,CAACD,GAAG,CAACE,IAAT,EAAe;AAAE;AACf,WAAOF,GAAP;AACD,GAJS,CAMV;;;AACA,MAAIA,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAwB;AACtBf,IAAAA,OAAO,CAAC;AACNgB,MAAAA,OAAO,EAAEJ,GAAG,CAACI,OAAJ,IAAe,OADlB;AAENC,MAAAA,IAAI,EAAE,OAFA;AAGNC,MAAAA,QAAQ,EAAE,IAAI;AAHR,KAAD,CAAP;AAKA,WAAOC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUT,GAAG,CAACI,OAAJ,IAAe,OAAzB,CAAf,CAAP;AACD,GAPD,MAOO;AACL,WAAOJ,GAAP;AACD;AACF,CA7BH,EA8BE,UAACU,KAAD,EAAW;AAAA;;AACT,MAAMC,SAAS,GAAGD,KAAH,aAAGA,KAAH,0CAAGA,KAAK,CAAEX,QAAV,oDAAG,gBAAiBE,IAAnC,CADS,CAET;;AACA,MAAIU,SAAS,CAACR,MAAV,KAAqB,IAAzB,EAA+B;AAC7Bd,IAAAA,UAAU,CAACuB,OAAX,CACE,eADF,EAEE,MAFF,EAEU;AACNC,MAAAA,iBAAiB,EAAE,MADb;AAENC,MAAAA,gBAAgB,EAAE,IAFZ;AAGNT,MAAAA,IAAI,EAAE,SAHA;AAINU,MAAAA,SAAS,EAAE;AAJL,KAFV,EAQEC,IARF,CAQO,YAAM;AACX1B,MAAAA,KAAK,CAAC2B,QAAN,CAAe,aAAf,EAA8BD,IAA9B,CAAmC,YAAM;AACvCE,QAAAA,QAAQ,CAACC,MAAT,GADuC,CACrB;AACnB,OAFD;AAGD,KAZD;AAaD,GAdD,MAcO;AACL/B,IAAAA,OAAO,CAAC;AACNgB,MAAAA,OAAO,EAAEO,SAAS,CAACP,OADb;AAENC,MAAAA,IAAI,EAAE,OAFA;AAGNC,MAAAA,QAAQ,EAAE,IAAI;AAHR,KAAD,CAAP;AAKA,WAAOC,OAAO,CAACC,MAAR,CAAeE,KAAf,CAAP;AACD;AACF,CAvDH;AAyDA,eAAenB,OAAf","sourcesContent":["\r\nimport axios from 'axios'\r\nimport { Message, MessageBox } from 'element-ui'\r\nimport store from '@/store'\r\n// 创建aaxios实例\r\nconst service = axios.create({\r\n  // baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\r\n  baseURL: '/api',\r\n  withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 120 * 1000 // request timeout\r\n})\r\n\r\n// request interceptor 这个部分保留，当后端系统需要传递唯一凭证的token时使用\r\nservice.interceptors.request.use(\r\n  // config => {\r\n  //   // do something before request is sent\r\n  //   if (store.getters.token) {\r\n  //     // let each request carry token\r\n  //     // ['X-Token'] is a custom headers key\r\n  //     // please modify it according to the actual situation\r\n  //     config.headers['Authorization'] = getToken()\r\n  //   }\r\n  //   return config\r\n  // },\r\n  // error => {\r\n  //   // do something with request error\r\n  //   console.log(error) // for debug\r\n  //   return Promise.reject(error)\r\n  // }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n  */\r\n\r\n  /**\r\n   * Determine the request status by custom status\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  response => {\r\n    const res = response.data\r\n    if (!res.code) { // 文件下载\r\n      return res\r\n    }\r\n\r\n    // if the custom status is not 200, it is judged as an error.\r\n    if (res.status !== 200) {\r\n      Message({\r\n        message: res.message || 'Error',\r\n        type: 'error',\r\n        duration: 5 * 1000\r\n      })\r\n      return Promise.reject(new Error(res.message || 'Error'))\r\n    } else {\r\n      return res\r\n    }\r\n  },\r\n  (error) => {\r\n    const errorData = error?.response?.data\r\n    // 4007：后台的token失效，需要重新获取\r\n    if (errorData.status === 4007) {\r\n      MessageBox.confirm(\r\n        '登录状态已失效，请重新登录',\r\n        '确定退出', {\r\n          confirmButtonText: '重新登录',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          showClose: false\r\n        }\r\n      ).then(() => {\r\n        store.dispatch('user/logout').then(() => {\r\n          location.reload() // 为了重新实例化vue-router对象 避免bug\r\n        })\r\n      })\r\n    } else {\r\n      Message({\r\n        message: errorData.message,\r\n        type: 'error',\r\n        duration: 3 * 1000\r\n      })\r\n      return Promise.reject(error)\r\n    }\r\n  })\r\n\r\nexport default service\r\n"]}]}