{"remainingRequest":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\software\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\src\\views\\personal-information-manage\\Personal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\src\\views\\personal-information-manage\\Personal.vue","mtime":1701219146502},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovc29mdHdhcmUvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVXNlckFQSSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IFNpbXBsZVNlbGVjdCBmcm9tICdAL2NvbXBvbmVudHMvU2ltcGxlU2VsZWN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQZXJzb25hbCcsCiAgY29tcG9uZW50czogewogICAgU2ltcGxlU2VsZWN0OiBTaW1wbGVTZWxlY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlZGl0YWJsZTogZmFsc2UsCiAgICAgIHVzZXJJZDogdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VySW5mby5pZCwKICAgICAgZm9ybTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXJJbmZvKSksCiAgICAgIGZvcm1SdWxlOiB7CiAgICAgICAgYWNjb3VudDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeeZu+W9lei0puWPtycKICAgICAgICB9XSwKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35aeT5ZCNJwogICAgICAgIH1dLAogICAgICAgIGRlcGFydG1lbnRJZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgbWVzc2FnZTogJ+mDqOmXqOS4jeiDveS4uuepuicKICAgICAgICB9XQogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzZWFyY2hLZXk6IGZ1bmN0aW9uIHNlYXJjaEtleSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYXJlbnRJZDogdGhpcy5mb3JtLnNjaG9vbElkLAogICAgICAgIHRoZUxldmVsOiAzCiAgICAgIH07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblNpbXBsZVNlbGVjdENoYW5nZTogZnVuY3Rpb24gb25TaW1wbGVTZWxlY3RDaGFuZ2UodmFsLCBmaWVsZCwgb3B0aW9ucykgewogICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAnZGVwYXJ0bWVudElkJywgdmFsKTsKICAgIH0sCiAgICAvLyDkv53lrZjkuKrkurrkv6Hmga8KICAgIGhhbmRsZVNhdmU6IGZ1bmN0aW9uIGhhbmRsZVNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMuJHJlZnMubWFpbkZvcm0udmFsaWRhdGUoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9iajsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IHRydWU7IC8vIOS/oeaBr+S/neWtmAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5mb3JtKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVc2VyQVBJLmVkaXRVc2VySW5mbyhfdGhpcy51c2VySWQsIG9iaik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci91cGRhdGVVc2VySW5mbycsIG9iaik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5Yqf77yBJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxMV1dKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Personal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,OAAA,OAAA,MAAA,YAAA;AACA,OAAA,YAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,YAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAFA;AAGA,MAAA,IAAA,EAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,MAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAHA;AAIA,MAAA,QAAA,EAAA;AACA,QAAA,OAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,MAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CADA;AAEA,QAAA,IAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,MAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CAFA;AAGA,QAAA,YAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,MAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA;AAHA,OAJA;AASA,MAAA,OAAA,EAAA;AATA,KAAA;AAYA,GAhBA;AAiBA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,aAAA;AAAA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA,QAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OAAA;AACA;AAHA,GAjBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,oBADA,gCACA,GADA,EACA,KADA,EACA,OADA,EACA;AACA,WAAA,IAAA,CAAA,KAAA,IAAA,EAAA,cAAA,EAAA,GAAA;AACA,KAHA;AAIA;AACA,IAAA,UALA,wBAKA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,QAAA;AAAA,qFAAA,iBAAA,KAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACA,KADA;AAAA;AAAA;AAAA;;AAEA,4BAAA,KAAA,CAAA,OAAA,GAAA,IAAA,CAFA,CAGA;;AAHA;AAKA,4BAAA,GALA,GAKA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CALA;AAAA;AAAA,mCAMA,OAAA,CAAA,YAAA,CAAA,KAAA,CAAA,MAAA,EAAA,GAAA,CANA;;AAAA;AAOA,4BAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,qBAAA,EAAA,GAAA;;AACA,4BAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;;AACA,4BAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AATA;AAAA;;AAAA;AAAA;AAAA;AAWA,4BAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA;;AAAA;AAAA;AAAA;AAAA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AArBA;AAtBA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"mainForm\" :model=\"form\" :rules=\"formRule\" label-position=\"right\" label-width=\"120px\" class=\"personal-form\" label-suffix=\":\">\r\n      <el-form-item label=\"账号\" prop=\"account\">\r\n        <el-input v-model=\"form.account\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"姓名\" prop=\"name\">\r\n        <el-input v-model=\"form.name\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"性别\">\r\n        <el-radio-group v-model=\"form.sex\">\r\n          <el-radio label=\"男\">男</el-radio>\r\n          <el-radio label=\"女\">女</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"所在学校/单位\">\r\n        <div>{{ form.schoolName || '--' }}</div>\r\n      </el-form-item>\r\n      <el-form-item label=\"所在院系/部门\" prop=\"departmentId\">\r\n        <!-- @update-value=\"onSimpleSelectChange\" @init-finish=\"simpleSelectInitFinish\" -->\r\n        <SimpleSelect v-model=\"form.departmentId\" key-words=\"BaseDepartment\" :search-key=\"searchKey\" @update-value=\"onSimpleSelectChange\"  />\r\n      </el-form-item>\r\n      <el-form-item label=\"身份类型\">\r\n        <div>{{ form.jobName || '--' }}</div>\r\n      </el-form-item>\r\n      <el-form-item label=\"身份证号\">\r\n        <el-input v-model=\"form.idCard\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"电子邮箱\">\r\n        <el-input v-model=\"form.email\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"联系地址\">\r\n        <el-input v-model=\"form.address\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"邮政编码\">\r\n        <el-input v-model=\"form.postalCode\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <div class=\"button-group\">\r\n      <!-- <el-button size=\"mini\" plain round @click=\"$router.go(-1)\">\r\n        返 回\r\n      </el-button> -->\r\n      <el-button size=\"mini\" type=\"primary\" round :loading=\"loading\" @click=\"handleSave()\">\r\n        保 存\r\n      </el-button>\r\n    </div>    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport UserAPI from '@/api/user'\r\nimport SimpleSelect from '@/components/SimpleSelect'\r\n\r\nexport default {\r\n  name: 'Personal',\r\n  components: { SimpleSelect },\r\n  data() {\r\n    return {\r\n      editable: false,\r\n      userId: this.$store.getters.userInfo.id,\r\n      form: JSON.parse(JSON.stringify(this.$store.getters.userInfo)),\r\n      formRule: {\r\n        account: [{ required: true, trigger: 'blur', message: '请输入登录账号' }],\r\n        name: [{ required: true, trigger: 'blur', message: '请输入用户姓名' }],\r\n        departmentId: [{ required: true, trigger: 'blur', message: '部门不能为空' }]\r\n      },\r\n      loading: false\r\n\r\n    }\r\n  },\r\n  computed: {\r\n    searchKey() {\r\n      return { parentId: this.form.schoolId, theLevel: 3 }\r\n    }\r\n  },\r\n  methods: {\r\n    onSimpleSelectChange(val, field, options) {\r\n      this.$set(this.form, 'departmentId', val)\r\n    },\r\n    // 保存个人信息\r\n    async handleSave() {\r\n      this.$refs.mainForm.validate(async valid => {\r\n        if (valid) {\r\n          this.loading = true\r\n          // 信息保存\r\n          try {\r\n            const obj = JSON.parse(JSON.stringify(this.form))\r\n            await UserAPI.editUserInfo(this.userId, obj)\r\n            this.$store.dispatch('user/updateUserInfo', obj)\r\n            this.$message.success('保存成功！')\r\n            this.loading = false\r\n          } catch (error) {\r\n            this.loading = false\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/assets/css/element-variables.scss\";\r\n.el-form {\r\n  width: fit-content;\r\n  margin-left: 12%;\r\n}\r\n.personal-form {\r\n  &::v-deep .el-form-item__label {\r\n    color: #afb1b5;\r\n  }\r\n  &::v-deep .el-form-item__content {\r\n    margin-left: 150px !important;\r\n  }\r\n}\r\ninput {\r\n  outline: none;\r\n}\r\n.svg-icon {\r\n  cursor: pointer;\r\n  margin-left: 50px;\r\n  color: #1890ff;\r\n  &:hover {\r\n    color: $--color-primary;\r\n  }\r\n}\r\n.button-group {\r\n  margin-left: 36%;\r\n  margin-bottom: 40px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/personal-information-manage"}]}