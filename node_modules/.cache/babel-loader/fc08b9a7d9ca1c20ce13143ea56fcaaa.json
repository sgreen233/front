{"remainingRequest":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\front\\src\\components\\BtnSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\front\\src\\components\\BtnSearch.vue","mtime":1715830118028},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1715830117510}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovc29mdHdhcmUvZnJvbnQvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyByZXNldEZvcm0gfSBmcm9tICdAL3V0aWxzL2NvbW1vbic7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQnRuU2VhcmNoJywKICAvLyDpu5jorqTmg4XlhrXkuIvvvIzkuIDkuKrnu4Tku7bkuIrnmoQgdi1tb2RlbCDkvJrmioogdmFsdWUg55So5L2cIHByb3Ag5LiU5oqKIGlucHV0IOeUqOS9nCBldmVudAogIG1vZGVsOiB7CiAgICBwcm9wOiAndmFsdWUnLAogICAgLy8g5rOo5oSP77yM5pivcHJvcO+8jOS4jeW4pnMKICAgIGV2ZW50OiAnaW5wdXQnCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogW09iamVjdCwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICAvLyDniLbnu4Tku7Ygdi1tb2RlbCDnu5HlrprlgLwKICAgIC8vIOS4jeaYvuekuumrmOe6p+aQnOe0ogogICAgbm9BZHZhbmNlZFNlYXJjaDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHNlYXJjaEl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICfor7fovpPlhaXlkI3np7AnCiAgICB9LAogICAgc2VhcmNoTmFtZTogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2FpdFNlYXJjaDogW10sCiAgICAgIGlucHV0OiAnJywKICAgICAgb3B0aW9uczogW10sCiAgICAgIGN1cnJlbnRGaWVsZDogJycsCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsvLyB3YWl0U2VhcmNoOiB7CiAgICAvLyAgIGhhbmRsZXIobmV3VmFsKSB7CiAgICAvLyAgICAgLy8g54i257uE5Lu25pyJIHYtbW9kZWwg5pe255qE5pON5L2cCiAgICAvLyAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBuZXdWYWwpCiAgICAvLyAgICAgLy8g5piv5ZCm5piv56m65a2X56ym5Liy77yIbm8tYWR2YW5jZWQtc2VhcmNoID09PSB0cnVl77yJCiAgICAvLyAgICAgY29uc3QgYmxhbmtTdHJpbmcgPSBnZXRWYWx1ZVR5cGUobmV3VmFsKSA9PT0gJ3N0cmluZycgJiYgbmV3VmFsID09PSAnJwogICAgLy8gICAgIC8vIOaYr+WQpuaYr+WvueixoeW5tuS4lOWvueixoeS4reeahOWAvOWFqOS4uuepuu+8iG5vLWFkdmFuY2VkLXNlYXJjaCA9PT0gZmFsc2XvvIkKICAgIC8vICAgICBjb25zdCBibGFua1N0cmluZ09iamVjdCA9IGdldFZhbHVlVHlwZShuZXdWYWwpID09PSAnb2JqZWN0JyAmJiBpc09iakVtcHR5KG5ld1ZhbCkKICAgIC8vICAgICBpZiAoYmxhbmtTdHJpbmcgfHwgYmxhbmtTdHJpbmdPYmplY3QpIHsKICAgIC8vICAgICAgIHRoaXMuJGVtaXQoJ3NlYXJjaCcsIG5ld1ZhbCkKICAgIC8vICAgICB9CiAgICAvLyAgIH0sCiAgICAvLyAgIGRlZXA6IHRydWUKICAgIC8vIH0KICB9LAogIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgdGhpcy53YWl0U2VhcmNoID0gXy5jbG9uZURlZXAodGhpcy52YWx1ZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVGb2N1czogZnVuY3Rpb24gaGFuZGxlRm9jdXModmFsKSB7Ly8gaWYgKHRoaXMuY3VycmVudEZpZWxkID09PSB2YWwuZmllbGQpIHJldHVybgogICAgICAvLyB0aGlzLmN1cnJlbnRGaWVsZCA9IHZhbC5maWVsZAogICAgICAvLyBjb25zdCBpbmRleCA9IHRoaXMuc2VhcmNoSXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5maWVsZCA9PT0gdmFsLmZpZWxkKQogICAgICAvLyBpZiAoaW5kZXggPj0gMCkgewogICAgICAvLyAgIHRyeSB7CiAgICAgIC8vICAgICBpZiAodmFsLnR5cGUgPT09ICdjYXNjYWRlcicpIHsKICAgICAgLy8gICAgICAgY29uc3QgcmVzID0gYXdhaXQgdHJlZUFQSS5nZXRBbGxOb2Rlcyh7CiAgICAgIC8vICAgICAgICAga2V5V29yZHM6IHZhbC5rZXlXb3JkcywKICAgICAgLy8gICAgICAgICB2aXJ0dWFsUm9vdEZsYWc6IGZhbHNlCiAgICAgIC8vICAgICAgIH0pCiAgICAgIC8vICAgICAgIC8vIOmZpOWOu2NoaWxkcmVuCiAgICAgIC8vICAgICAgIHRoaXMuc2VhcmNoSXRlbXNbaW5kZXhdLm9wdGlvbnMgPSBKU09OLnBhcnNlKAogICAgICAvLyAgICAgICAgIEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhKS5yZXBsYWNlKC9cImNoaWxkcmVuIlw6XFtdL2csICcibm8iOjAnKQogICAgICAvLyAgICAgICApCiAgICAgIC8vICAgICB9IGVsc2UgaWYgKHZhbC50eXBlID09PSAnc2VsZWN0JykgewogICAgICAvLyAgICAgICBjb25zdCByZXMgPSBhd2FpdCBsaXN0QVBJLmdldFNvbWVSZWNvcmRzKHsKICAgICAgLy8gICAgICAgICBrZXlXb3JkczogdmFsLmtleVdvcmRzLCBwYWdlSW5mbzogeyBwYWdlOiAtMSB9CiAgICAgIC8vICAgICAgIH0pCiAgICAgIC8vICAgICAgIHRoaXMuc2VhcmNoSXRlbXNbaW5kZXhdLm9wdGlvbnMgPSByZXMuZGF0YS5jb250ZW50CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAvLyAgIH0KICAgICAgLy8gfQogICAgICAvLyB0aGlzLiRlbWl0KCdmb2N1cycsIHZhbC5maWVsZCkKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNlYXJjaENsaWNrOiBmdW5jdGlvbiBzZWFyY2hDbGljayh0eXBlKSB7CiAgICAgIC8vIHRoaXMuJGVtaXQoJ3NlYXJjaC1jbGljaycsIHRoaXMud2FpdFNlYXJjaCkKICAgICAgaWYgKHR5cGUgPT09ICdjb21tb24nKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoLWNsaWNrJywgdGhpcy5pbnB1dCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgnYWR2YW5jZWQtc2VhcmNoLWNsaWNrJywgdGhpcy53YWl0U2VhcmNoKTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy53YWl0U2VhcmNoID0gcmVzZXRGb3JtKHRoaXMud2FpdFNlYXJjaCk7IC8vIHRoaXMuJGVtaXQoJ3NlYXJjaC1jbGljaycsIHRoaXMud2FpdFNlYXJjaCkKICAgIH0KICB9Cn07"},{"version":3,"sources":["BtnSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,SAAA,SAAA,QAAA,gBAAA;AACA,OAAA,CAAA,MAAA,QAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA,OADA;AACA;AACA,IAAA,KAAA,EAAA;AAFA,GAHA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AAAA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA,CAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KADA;AACA;AACA;AACA,IAAA,gBAAA,EAAA;AAAA,MAAA,IAAA,EAAA,OAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KAHA;AAIA,IAAA,WAAA,EAAA;AAAA,MAAA,IAAA,EAAA,KAAA;AAAA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAAA,KAJA;AAKA,IAAA,WAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KALA;AAMA,IAAA,UAAA,EAAA;AAAA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,KAAA,CAAA;AAAA,MAAA,OAAA,EAAA;AAAA;AANA,GAPA;AAeA,EAAA,IAfA,kBAeA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAOA,GAvBA;AAwBA,EAAA,KAAA,EAAA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA,GAxBA;AAwCA,EAAA,MAxCA,oBAwCA;AACA,SAAA,UAAA,GAAA,CAAA,CAAA,SAAA,CAAA,KAAA,KAAA,CAAA;AACA,GA1CA;AA2CA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,GADA,EACA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA,KA5BA;AA6BA,IAAA,WA7BA,uBA6BA,IA7BA,EA6BA;AACA;AACA,UAAA,IAAA,KAAA,QAAA,EAAA;AACA,aAAA,KAAA,CAAA,cAAA,EAAA,KAAA,KAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,CAAA,uBAAA,EAAA,KAAA,UAAA;AACA;AACA,KApCA;AAqCA,IAAA,KArCA,mBAqCA;AACA,WAAA,UAAA,GAAA,SAAA,CAAA,KAAA,UAAA,CAAA,CADA,CAEA;AACA;AAxCA;AA3CA,CAAA","sourcesContent":["<template>\r\n  <div id=\"search-box\"> <!-- class=\"search-wrapper\" -->\r\n    <div v-if=\"noAdvancedSearch\" class=\"no-advanced-search\">\r\n      <el-input ref=\"inputInfo\" v-model.trim=\"input\" size=\"mini\" :placeholder=\"placeholder\" clearable />\r\n      <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-search\" @click=\"searchClick('common')\">搜索</el-button>\r\n    </div>\r\n    <div v-else class=\"advanced-search-field-box\">\r\n      <div v-for=\"(item, index) in searchItems\" :key=\"index\" class=\"search-item\">\r\n        <slot v-if=\"item.type.startsWith('customize')\" :name=\"item.slot\" />\r\n        <el-cascader v-if=\"item.type==='cascader'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :loading=\"loading\" :options=\"item.options\" :props=\"{\r\n          label: 'name', value: 'id', checkStrictly: item.checkStrictly\r\n        }\" :placeholder=\"item.placeholder\" clearable />\r\n        <el-select v-if=\"item.type==='select'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :placeholder=\"item.placeholder?item.placeholder:item.name\" :loading=\"loading\" clearable>\r\n          <el-option v-for=\"citem in item.options\" :key=\"citem.id\" :label=\"citem.name\" :value=\"citem.id\" />\r\n        </el-select>\r\n        <el-input v-if=\"item.type==='input'\" v-model=\"waitSearch[item.field]\" size=\"mini\" :placeholder=\"item.placeholder?item.placeholder:item.name\" clearable />\r\n        <el-date-picker v-if=\"item.type==='date'\" v-model=\"waitSearch[item.field]\" size=\"mini\" type=\"daterange\" :start-placeholder=\"item.placeholder?item.placeholder:item.name+'：从'\" :end-placeholder=\"item.placeholder?item.placeholder:item.name+'：到'\" />\r\n      </div>\r\n      <div class=\"search-item search-button\">\r\n        <el-button size=\"mini\" type=\"success\" icon=\"el-icon-search\" @click=\"searchClick('notCommon')\">搜索</el-button>\r\n        <el-button size=\"mini\" plain icon=\"el-icon-refresh-left\" @click=\"reset()\">重置</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { resetForm } from '@/utils/common'\r\nimport _ from 'lodash'\r\nexport default {\r\n  name: 'BtnSearch',\r\n  // 默认情况下，一个组件上的 v-model 会把 value 用作 prop 且把 input 用作 event\r\n  model: {\r\n    prop: 'value', // 注意，是prop，不带s\r\n    event: 'input'\r\n  },\r\n  props: {\r\n    value: { type: [Object, String], default: '' }, // 父组件 v-model 绑定值\r\n    // 不显示高级搜索\r\n    noAdvancedSearch: { type: Boolean, default: false },\r\n    searchItems: { type: Array, default: () => [] },\r\n    placeholder: { type: String, default: '请输入名称' },\r\n    searchName: { type: [String, Array], default: '' }\r\n  },\r\n  data() {\r\n    return {\r\n      waitSearch: [],\r\n      input: '',\r\n      options: [],\r\n      currentField: '',\r\n      loading: false\r\n    }\r\n  },\r\n  watch: {\r\n    // waitSearch: {\r\n    //   handler(newVal) {\r\n    //     // 父组件有 v-model 时的操作\r\n    //     this.$emit('input', newVal)\r\n    //     // 是否是空字符串（no-advanced-search === true）\r\n    //     const blankString = getValueType(newVal) === 'string' && newVal === ''\r\n    //     // 是否是对象并且对象中的值全为空（no-advanced-search === false）\r\n    //     const blankStringObject = getValueType(newVal) === 'object' && isObjEmpty(newVal)\r\n    //     if (blankString || blankStringObject) {\r\n    //       this.$emit('search', newVal)\r\n    //     }\r\n    //   },\r\n    //   deep: true\r\n    // }\r\n  },\r\n  create() {\r\n    this.waitSearch = _.cloneDeep(this.value)\r\n  },\r\n  methods: {\r\n    async handleFocus(val) {\r\n      // if (this.currentField === val.field) return\r\n      // this.currentField = val.field\r\n      // const index = this.searchItems.findIndex(item => item.field === val.field)\r\n      // if (index >= 0) {\r\n      //   try {\r\n      //     if (val.type === 'cascader') {\r\n      //       const res = await treeAPI.getAllNodes({\r\n      //         keyWords: val.keyWords,\r\n      //         virtualRootFlag: false\r\n      //       })\r\n      //       // 除去children\r\n      //       this.searchItems[index].options = JSON.parse(\r\n      //         JSON.stringify(res.data).replace(/\\\"children\"\\:\\[]/g, '\"no\":0')\r\n      //       )\r\n      //     } else if (val.type === 'select') {\r\n      //       const res = await listAPI.getSomeRecords({\r\n      //         keyWords: val.keyWords, pageInfo: { page: -1 }\r\n      //       })\r\n      //       this.searchItems[index].options = res.data.content\r\n      //     }\r\n      //     this.loading = false\r\n      //   } catch (error) {\r\n      //     this.loading = false\r\n      //   }\r\n      // }\r\n      // this.$emit('focus', val.field)\r\n    },\r\n    searchClick(type) {\r\n      // this.$emit('search-click', this.waitSearch)\r\n      if (type === 'common') {\r\n        this.$emit('search-click', this.input)\r\n      } else {\r\n        this.$emit('advanced-search-click', this.waitSearch)\r\n      }\r\n    },\r\n    reset() {\r\n      this.waitSearch = resetForm(this.waitSearch)\r\n      // this.$emit('search-click', this.waitSearch)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/assets/css/variables.scss\";\r\n#search-box {\r\n  margin-bottom: 20px;\r\n}\r\n.no-advanced-search {\r\n  display: flex;\r\n  .el-button {\r\n    margin-left: 10px;\r\n  }\r\n}\r\n.advanced-search-field-box {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\r\n  gap: 10px;\r\n  .el-button + .el-button {\r\n    margin-left: 10px;\r\n  }\r\n}\r\n// .el-button.is-plain:hover {\r\n  // border-color: $--color-subsidiary;\r\n  // color: $--color-subsidiary;\r\n// }\r\n</style>\r\n"],"sourceRoot":"src/components"}]}