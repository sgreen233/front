{"remainingRequest":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\front\\src\\permission.js","dependencies":[{"path":"D:\\software\\front\\front\\src\\permission.js","mtime":1715830118039},{"path":"D:\\software\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1715830111371},{"path":"D:\\software\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1715830110683}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9zb2Z0d2FyZS9mcm9udC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3NvZnR3YXJlL2Zyb250L2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHJvdXRlciwgeyBjb25zdGFudFJvdXRlcyB9IGZyb20gJy4vcm91dGVyL2luZGV4JzsKaW1wb3J0IGdldFdlYk1lbnUgZnJvbSAnLi9hcGkvd2Vic2l0ZSc7CmltcG9ydCBzdG9yZSBmcm9tICcuL3N0b3JlJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7IC8vIHByb2dyZXNzIGJhcgoKaW1wb3J0ICducHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyc7IC8vIHByb2dyZXNzIGJhciBzdHlsZQoKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOyAvLyBnZXQgdG9rZW4gZnJvbSBjb29raWUKCmltcG9ydCB7IGZpbHRlckFzeW5jUm91dGVzIH0gZnJvbSAnQC9zdG9yZS9tb2R1bGVzL3Blcm1pc3Npb24nOwppbXBvcnQgeyBnZW5lcmF0ZVJvdXRlcywgbG9hZFZpZXcgfSBmcm9tICdAL3N0b3JlL21vZHVsZXMvd2ViU2l0ZSc7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7Ck5Qcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsgLy8gTlByb2dyZXNzIENvbmZpZ3VyYXRpb24KCnZhciB3aGl0ZUxpc3QgPSBbJy9Mb2dpbicsICcvRm9yZ2V0JywgJy9SZWdpc3RlciddOyAvLyBubyByZWRpcmVjdCB3aGl0ZWxpc3QKCnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgbGlzdCwgd2Vic2l0ZVJvdXRlcywgaGFzVG9rZW4sIHZhbCwgbmV4dFVybCwgX3lpZWxkJHN0b3JlJGRpc3BhdGNoLCBtZW51TGlzdCwgYXN5bmNSb3V0ZXMsIGhhc1JvbGVzLCBfeWllbGQkc3RvcmUkZGlzcGF0Y2gyLCBfbWVudUxpc3QsIF92YWwsIF9uZXh0VXJsOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7CgogICAgICAgICAgICBpZiAoc3RvcmUuc3RhdGUud2ViU2l0ZS5pc1NhdmUpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gZ2V0Y29sdW1uKCk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBsaXN0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZVJvdXRlcyhsaXN0KTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIHdlYnNpdGVSb3V0ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXBkYXRlU3RvcmVDaGFuZ2UnLCB0cnVlKTsKICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ05hdicsIHdlYnNpdGVSb3V0ZXMpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgIHJldHVybiBhZGRXZWJzaXRlUm91dGVzKHdlYnNpdGVSb3V0ZXMsIG5leHQsIHRvKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAvLyDnoa7lrprnlKjmiLfmmK/lkKblt7Lnu4/nmbvlvZUKICAgICAgICAgICAgaGFzVG9rZW4gPSBnZXRUb2tlbigpOwoKICAgICAgICAgICAgaWYgKCFoYXNUb2tlbikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEodG8ucGF0aCA9PT0gJy9Mb2dpbicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YWwgPSAnL0hvbWVwYWdlJzsKICAgICAgICAgICAgbmV4dFVybCA9IGNvbnN0YW50Um91dGVzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgIHZhbCA9PT0gaS5yZWRpcmVjdDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoIW5leHRVcmwubGVuZ3RoKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCcvSG9tZXBhZ2UnKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRVc2VySW5mbycpOwoKICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgIF95aWVsZCRzdG9yZSRkaXNwYXRjaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIG1lbnVMaXN0ID0gX3lpZWxkJHN0b3JlJGRpc3BhdGNoLm1lbnVMaXN0OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjc7CiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJBc3luY1JvdXRlcyhtZW51TGlzdCk7CgogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgYXN5bmNSb3V0ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICByb3V0ZXIuYWRkUm91dGUoewogICAgICAgICAgICAgIHBhdGg6ICcqJywKICAgICAgICAgICAgICByZWRpcmVjdDogJy80MDQnLAogICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMxOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2dlbmVyYXRlUm91dGVzJywgYXN5bmNSb3V0ZXMpOwoKICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgIG5leHQoIiIuY29uY2F0KHN0b3JlLnN0YXRlLnBlcm1pc3Npb24uYWRkUm91dGVzWzBdLmNoaWxkcmVuWzBdLnBhdGgpKTsKCiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgIC8vIOehruWumueUqOaIt+aYr+WQpumAmui/hyBnZXRVc2VySW5mbyDojrflj5bkuobmnYPpmZDop5LoibIKICAgICAgICAgICAgaGFzUm9sZXMgPSBzdG9yZS5nZXR0ZXJzLnJvbGVzICYmIHN0b3JlLmdldHRlcnMucm9sZXMubGVuZ3RoID4gMDsKCiAgICAgICAgICAgIGlmICghaGFzUm9sZXMpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDA7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MzsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldFVzZXJJbmZvJyk7CgogICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgX3lpZWxkJHN0b3JlJGRpc3BhdGNoMiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9tZW51TGlzdCA9IF95aWVsZCRzdG9yZSRkaXNwYXRjaDIubWVudUxpc3Q7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NzsKICAgICAgICAgICAgcmV0dXJuIGxvYWRNZW51cyhfbWVudUxpc3QsIG5leHQsIHRvKTsKCiAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICBpZiAodG8ucGF0aCA9PT0gJy9Ib21lcGFnZScpIHsKICAgICAgICAgICAgICBfdmFsID0gJy9Ib21lcGFnZSc7CiAgICAgICAgICAgICAgX25leHRVcmwgPSBjb25zdGFudFJvdXRlcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICAgIF92YWwgPT09IGkucmVkaXJlY3Q7CiAgICAgICAgICAgICAgfSk7IC8vIOWmguaenOayoeaciUhvbWVwYWdlCgogICAgICAgICAgICAgIGlmIChfbmV4dFVybC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIG5leHQoX21lbnVMaXN0WzBdLmNoaWxkcmVuWzBdLmNvbXBvbmVudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNTA6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1MDsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg0MCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1NDsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKTsKCiAgICAgICAgICBjYXNlIDU0OgogICAgICAgICAgICBNZXNzYWdlLmVycm9yKF9jb250ZXh0LnQwLm1lc3NhZ2UgfHwgJ+WKn+iDveiOt+WPluWksei0pe+8jOivt+iBlOezu+euoeeQhuWRmOWuoeaguOadg+mZkO+8gScpOwogICAgICAgICAgICBuZXh0KCIvTG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8ucGF0aCkpOwogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOyAvLyBhd2FpdCBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKQogICAgICAgICAgICAvLyBsb2NhdGlvbi5yZWxvYWQoKSAvLyDkuLrkuobph43mlrDlrp7kvovljJZ2dWUtcm91dGVy5a+56LGhIOmBv+WFjWJ1ZwoKICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2MDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgLy8gaGFzIG5vIHRva2VuCiAgICAgICAgICAgIGlmICgod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xIHx8IHRvLnBhdGguaW5jbHVkZXMoJ3dlYnNpdGUnKSkgJiYgIXRvLnBhdGguaW5jbHVkZXMoJ3dlYnNpdGUtJykpIHsKICAgICAgICAgICAgICAvLyDlpoLmnpzpnIDopoHot7PovaznmoTpobXpnaLlnKggd2hpdGVMaXN0IOS4re+8jOWwseebtOaOpei3s+i9rAogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDlkKbliJnph43lrprlkJHliLDnmbvlvZXpobUKICAgICAgICAgICAgICAvLyBuZXh0KGAvTG9naW4/cmVkaXJlY3Q9JHt0by5wYXRofWApCiAgICAgICAgICAgICAgbmV4dCgnL3dlYnNpdGUvaG9tZXBhZ2UnKTsKICAgICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSA2MDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzQwLCA1MF1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7Cgp2YXIgbG9hZE1lbnVzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJvbGVzLCBuZXh0LCB0bykgewogICAgdmFyIGFzeW5jUm91dGVzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gZmlsdGVyQXN5bmNSb3V0ZXMocm9sZXMpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgYXN5bmNSb3V0ZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlKHsKICAgICAgICAgICAgICBwYXRoOiAnKicsCiAgICAgICAgICAgICAgcmVkaXJlY3Q6ICcvNDA0JywKICAgICAgICAgICAgICBoaWRkZW46IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdnZW5lcmF0ZVJvdXRlcycsIGFzeW5jUm91dGVzKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmICh0by5wYXRoID09PSAnLycpIHsKICAgICAgICAgICAgICBuZXh0KCcvd2Vic2l0ZS9ob21lcGFnZScpOyAvLyBuZXh0KHsKICAgICAgICAgICAgICAvLyAgIHBhdGg6IGFzeW5jUm91dGVzWzBdLmNoaWxkcmVuWzBdLnBhdGgKICAgICAgICAgICAgICAvLyAgIC8vIHJlcGxhY2U6IHRydWUKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZCh7fSwgdG8pKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGxvYWRNZW51cyhfeDQsIF94NSwgX3g2KSB7CiAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIOiOt+WPluaJgOacieagj+ebrgoKCnZhciBnZXRjb2x1bW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICB2YXIgbGlzdDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGdldFdlYk1lbnUuY29sdW1uKCk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBsaXN0ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBsaXN0KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRjb2x1bW4oKSB7CiAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIOWKqOaAgea3u+WKoOi3r+eUsQoKCnZhciBhZGRXZWJzaXRlUm91dGVzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGxpc3QsIG5leHQsIHRvKSB7CiAgICB2YXIgY29tbW9tRGV0YWlsOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBfLmNsb25lRGVlcChpKTsKCiAgICAgICAgICAgICAgdGVtcC5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZSgnV2Vic2l0ZScsIHRlbXApOwoKICAgICAgICAgICAgICBpZiAoaS5jaGlsZHJlbiAmJiBpLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIGl0ZW0uY29tcG9uZW50ID0gbG9hZFZpZXcoJ3dlYnNpdGUtcGFnZS9wYWdlcy9EZXRhaWwnKTsKICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudE5hbWUgPSBpdGVtLm5hbWUucmVwbGFjZSgnRGV0YWlsJywgJycpOwogICAgICAgICAgICAgICAgICByb3V0ZXIuYWRkUm91dGUocGFyZW50TmFtZVswXS50b1VwcGVyQ2FzZSgpICsgcGFyZW50TmFtZS5zbGljZSgxKSwgaXRlbSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOyAvLyDnlKjkuo7pppbpobXot7Povazor6bmg4UKCiAgICAgICAgICAgIGNvbW1vbURldGFpbCA9IHsKICAgICAgICAgICAgICBwYXRoOiAnL3dlYnNpdGUvY29tbW9uRGV0YWlsJywKICAgICAgICAgICAgICBuYW1lOiAnY29tbW9uRGV0YWlsJywKICAgICAgICAgICAgICBtZXRhOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+ivpuaDhScsCiAgICAgICAgICAgICAgICBub0NhY2hlOiB0cnVlLAogICAgICAgICAgICAgICAgaW5kZXg6ICcxJwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY29tcG9uZW50OiBsb2FkVmlldygnd2Vic2l0ZS1wYWdlL3BhZ2VzL0RldGFpbCcpLAogICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgICB9OwogICAgICAgICAgICByb3V0ZXIuYWRkUm91dGUoJ1dlYnNpdGUnLCBjb21tb21EZXRhaWwpOwogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiB0by5wYXRoLAogICAgICAgICAgICAgIHF1ZXJ5OiB0by5xdWVyeQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0KTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBhZGRXZWJzaXRlUm91dGVzKF94NywgX3g4LCBfeDkpIHsKICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKCkgewogIE5Qcm9ncmVzcy5kb25lKCk7Cn0pOw=="},{"version":3,"sources":["D:/software/front/front/src/permission.js"],"names":["router","constantRoutes","getWebMenu","store","Message","NProgress","getToken","filterAsyncRoutes","generateRoutes","loadView","_","configure","showSpinner","whiteList","beforeEach","to","from","next","start","state","webSite","isSave","getcolumn","list","websiteRoutes","dispatch","addWebsiteRoutes","hasToken","path","val","nextUrl","filter","i","redirect","length","menuList","asyncRoutes","addRoute","hidden","permission","addRoutes","children","done","hasRoles","getters","roles","loadMenus","component","error","message","indexOf","includes","column","forEach","temp","cloneDeep","item","parentName","name","replace","toUpperCase","slice","commomDetail","meta","title","noCache","index","query","afterEach"],"mappings":"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","sourcesContent":["import router, { constantRoutes } from './router/index'\r\nimport getWebMenu from './api/website'\r\nimport store from './store'\r\nimport { Message } from 'element-ui'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport { getToken } from '@/utils/auth' // get token from cookie\r\nimport { filterAsyncRoutes } from '@/store/modules/permission'\r\nimport { generateRoutes, loadView } from '@/store/modules/webSite'\r\nimport _ from 'lodash'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\nconst whiteList = ['/Login', '/Forget', '/Register'] // no redirect whitelist\r\nrouter.beforeEach(async(to, from, next) => {\r\n  NProgress.start()\r\n  if (!store.state.webSite.isSave) {\r\n    const list = await getcolumn()    \r\n    const websiteRoutes = await generateRoutes(list)    \r\n    store.dispatch('updateStoreChange', true)\r\n    store.dispatch('Nav', websiteRoutes)\r\n    await addWebsiteRoutes(websiteRoutes, next, to)    \r\n  }\r\n  // 确定用户是否已经登录\r\n  const hasToken = getToken()\r\n  if (hasToken) {\r\n    if (to.path === '/Login') {\r\n      const val = '/Homepage'\r\n      const nextUrl = constantRoutes.filter((i) => {\r\n        val === i.redirect\r\n      })\r\n      if (nextUrl.length) {\r\n        next('/Homepage')\r\n      } else {\r\n        const { menuList } = await store.dispatch('user/getUserInfo')\r\n        const asyncRoutes = await filterAsyncRoutes(menuList)\r\n        router.addRoute({ path: '*', redirect: '/404', hidden: true })\r\n        await store.dispatch('generateRoutes', asyncRoutes)\r\n        next(`${store.state.permission.addRoutes[0].children[0].path}`)\r\n      }\r\n      NProgress.done()\r\n    } else {\r\n      // 确定用户是否通过 getUserInfo 获取了权限角色\r\n      const hasRoles = store.getters.roles && store.getters.roles.length > 0\r\n      if (hasRoles) {\r\n        next()\r\n      } else {\r\n        try {\r\n          // 获取菜单信息及用户信息\r\n          const { menuList } = await store.dispatch('user/getUserInfo')\r\n          await loadMenus(menuList, next, to)\r\n          if (to.path === '/Homepage') {\r\n            const val = '/Homepage'\r\n            const nextUrl = constantRoutes.filter((i) => {\r\n              val === i.redirect\r\n            })\r\n            // 如果没有Homepage\r\n            if (nextUrl.length === 0) {\r\n              next(menuList[0].children[0].component)\r\n            }\r\n          }\r\n        } catch (error) {\r\n          // remove token and go to login page to re-login\r\n          await store.dispatch('user/resetToken')\r\n          Message.error(error.message || '功能获取失败，请联系管理员审核权限！')\r\n          next(`/Login?redirect=${to.path}`)\r\n          NProgress.done()\r\n          // await store.dispatch('user/logout')\r\n          // location.reload() // 为了重新实例化vue-router对象 避免bug\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    // has no token\r\n    if ((whiteList.indexOf(to.path) !== -1 || to.path.includes('website')) && !to.path.includes('website-')) {\r\n      // 如果需要跳转的页面在 whiteList 中，就直接跳转\r\n      next()\r\n    } else {\r\n      // 否则重定向到登录页\r\n      // next(`/Login?redirect=${to.path}`)\r\n      next('/website/homepage')\r\n      NProgress.done()\r\n    }\r\n  }\r\n})\r\n\r\nconst loadMenus = async(roles, next, to) => {\r\n  const asyncRoutes = await filterAsyncRoutes(roles)\r\n  router.addRoute({ path: '*', redirect: '/404', hidden: true })\r\n  await store.dispatch('generateRoutes', asyncRoutes)\r\n  if (to.path === '/') {\r\n    next('/website/homepage')\r\n    // next({\r\n    //   path: asyncRoutes[0].children[0].path\r\n    //   // replace: true\r\n    // })\r\n  } else {\r\n    next({\r\n      ...to\r\n      // replace: true\r\n    })\r\n  }\r\n}\r\n\r\n// 获取所有栏目\r\nconst getcolumn = async() => {\r\n  const list = await getWebMenu.column()\r\n  return list\r\n}\r\n// 动态添加路由\r\nconst addWebsiteRoutes = async(list, next, to) => {\r\n  list.forEach(i => {\r\n    const temp = _.cloneDeep(i)\r\n    temp.children = []\r\n    router.addRoute('Website', temp)    \r\n    if (i.children && i.children.length) {\r\n      i.children.forEach(item => {\r\n        item.component = loadView('website-page/pages/Detail')\r\n        const parentName = item.name.replace('Detail', '')\r\n        router.addRoute(parentName[0].toUpperCase() + parentName.slice(1), item)\r\n      })\r\n    }\r\n  })\r\n  // 用于首页跳转详情\r\n  const commomDetail = {\r\n    path: '/website/commonDetail',\r\n    name: 'commonDetail',\r\n    meta: { title: '详情', noCache: true, index: '1' },\r\n    component: loadView('website-page/pages/Detail'),\r\n    hidden: true\r\n  }\r\n  router.addRoute('Website', commomDetail)\r\n  next({ path: to.path, query: to.query })\r\n}\r\n\r\nrouter.afterEach(() => {\r\n  NProgress.done()\r\n})\r\n"]}]}