{"remainingRequest":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\src\\directive\\el-table\\adaptive.js","dependencies":[{"path":"D:\\software\\front\\src\\directive\\el-table\\adaptive.js","mtime":1636596374421},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9zb2Z0d2FyZS9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CgovLyBiaW5k77ya5Y+q6LCD55So5LiA5qyh77yM5oyH5Luk56ys5LiA5qyh57uR5a6a5Yiw5YWD57Sg5pe26LCD55So44CC5Zyo6L+Z6YeM5Y+v5Lul6L+b6KGM5LiA5qyh5oCn55qE5Yid5aeL5YyW6K6+572u44CCCi8vIGluc2VydGVk77ya6KKr57uR5a6a5YWD57Sg5o+S5YWl54i26IqC54K55pe26LCD55SoICjku4Xkv53or4HniLboioLngrnlrZjlnKjvvIzkvYbkuI3kuIDlrprlt7Looqvmj5LlhaXmlofmoaPkuK0p44CCCi8vIHVuYmluZO+8muWPquiwg+eUqOS4gOasoe+8jOaMh+S7pOS4juWFg+e0oOino+e7keaXtuiwg+eUqOOAggovLyDorr7nva7ooajmoLzpq5jluqYKdmFyIGRvUmVzaXplID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlbCwgYmluZGluZywgdm5vZGUpIHsKICAgIHZhciBfeWllbGQkdm5vZGUsICR0YWJsZSwgdmFsdWUsIGJvdHRvbU9mZnNldCwgbWluSGVpZ2h0LCBwYWdlSGVpZ2h0LCB0b3RhbEhlaWdodCwgaGVpZ2h0OwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiB2bm9kZTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIF95aWVsZCR2bm9kZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICR0YWJsZSA9IF95aWVsZCR2bm9kZS5jb21wb25lbnRJbnN0YW5jZTsKICAgICAgICAgICAgLy8g6I635Y+W6LCD55So5Lyg6YCS6L+H5p2l55qE5pWw5o2uCiAgICAgICAgICAgIHZhbHVlID0gYmluZGluZy52YWx1ZTsKCiAgICAgICAgICAgIGlmICgkdGFibGUuaGVpZ2h0KSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiZWwtJHRhYmxlIG11c3Qgc2V0IHRoZSBoZWlnaHQuIFN1Y2ggYXMgaGVpZ2h0PScxMDBweCciKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGlmICghJHRhYmxlLmhlaWdodC5pbmNsdWRlcygncHgnKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgLy8g6I635Y+W6Led5bqV6YOo6Led56a777yI55So5LqO5bGV56S66aG156CB562J5L+h5oGv77yJCiAgICAgICAgICAgIGJvdHRvbU9mZnNldCA9IHZhbHVlICYmIHZhbHVlLmJvdHRvbU9mZnNldCB8fCAyMDsKICAgICAgICAgICAgbWluSGVpZ2h0ID0gODI7CiAgICAgICAgICAgIHBhZ2VIZWlnaHQgPSB2YWx1ZSAmJiB2YWx1ZS5ub1BhZ2UgPyAwIDogZ2V0T2Zmc2V0SCgndnBhZ2UtZm9vdGVyJyk7IC8vIOWIhumhtemrmOW6pgoKICAgICAgICAgICAgaWYgKCR0YWJsZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgLy8g6K6h566X5YiX6KGo6auY5bqm5bm26K6+572uCiAgICAgICAgICAgIHRvdGFsSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gYm90dG9tT2Zmc2V0IC0gcGFnZUhlaWdodDsKICAgICAgICAgICAgaGVpZ2h0ID0gdG90YWxIZWlnaHQgPCBtaW5IZWlnaHQgPyBtaW5IZWlnaHQgOiB0b3RhbEhlaWdodDsKICAgICAgICAgICAgJHRhYmxlLmxheW91dC5zZXRIZWlnaHQoaGVpZ2h0KTsKICAgICAgICAgICAgJHRhYmxlLmRvTGF5b3V0KCk7CgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBkb1Jlc2l6ZShfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyDojrflj5bpobXpnaLlhYPntKDnmoQgb2Zmc2V0SGVpZ2h0CgoKZnVuY3Rpb24gZ2V0T2Zmc2V0SChpZCkgewogIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKSB7CiAgICByZXR1cm4gMDsKICB9CgogIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkub2Zmc2V0SGVpZ2h0Owp9CgpleHBvcnQgZGVmYXVsdCB7CiAgLy8g5Yid5aeL5YyW6K6+572uCiAgYmluZDogZnVuY3Rpb24gYmluZChlbCwgYmluZGluZywgdm5vZGUpIHsKICAgIC8vIOiuvue9rnJlc2l6ZeebkeWQrOaWueazlQogICAgZWwucmVzaXplTGlzdGVuZXIgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGRvUmVzaXplKGVsLCBiaW5kaW5nLCB2bm9kZSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7IC8vIOe7keWumuebkeWQrOaWueazleWIsGFkZFJlc2l6ZUxpc3RlbmVyCiAgICAvLyBhZGRSZXNpemVMaXN0ZW5lcih3aW5kb3cuZG9jdW1lbnQuYm9keSwgZWwucmVzaXplTGlzdGVuZXIpCgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGVsLnJlc2l6ZUxpc3RlbmVyKTsKICB9LAogIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgZG9SZXNpemUoZWwsIGJpbmRpbmcsIHZub2RlKTsKICB9LAogIC8vIOe7keWumum7mOiupOmrmOW6pgogIGluc2VydGVkOiBmdW5jdGlvbiBpbnNlcnRlZChlbCwgYmluZGluZywgdm5vZGUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZG9SZXNpemUoZWwsIGJpbmRpbmcsIHZub2RlKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgLy8g6ZSA5q+B5pe26K6+572uCiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoZWwpIHsKICAgIC8vIOenu+mZpHJlc2l6ZeebkeWQrAogICAgLy8gcmVtb3ZlUmVzaXplTGlzdGVuZXIoZWwsIGVsLnJlc2l6ZUxpc3RlbmVyKQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGVsLnJlc2l6ZUxpc3RlbmVyKTsKICB9Cn07"},{"version":3,"sources":["D:/software/front/src/directive/el-table/adaptive.js"],"names":["doResize","el","binding","vnode","$table","componentInstance","value","height","Error","includes","bottomOffset","minHeight","pageHeight","noPage","getOffsetH","totalHeight","window","innerHeight","getBoundingClientRect","top","layout","setHeight","doLayout","id","document","getElementById","offsetHeight","bind","resizeListener","addEventListener","update","inserted","unbind","removeEventListener"],"mappings":";;;;;AAAA;AACA;AACA;AAEA;AACA,IAAMA,QAAQ;AAAA,qEAAG,iBAAMC,EAAN,EAAUC,OAAV,EAAmBC,KAAnB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAILA,KAJK;;AAAA;AAAA;AAGMC,YAAAA,MAHN,gBAGbC,iBAHa;AAKf;AAEEC,YAAAA,KAPa,GAQXJ,OARW,CAObI,KAPa;;AAAA,gBAUVF,MAAM,CAACG,MAVG;AAAA;AAAA;AAAA;;AAAA,kBAWP,IAAIC,KAAJ,yDAXO;;AAAA;AAAA,iBAYJJ,MAAM,CAACG,MAAP,CAAcE,QAAd,CAAuB,IAAvB,CAZI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAgBf;AACMC,YAAAA,YAjBS,GAiBOJ,KAAK,IAAIA,KAAK,CAACI,YAAhB,IAAiC,EAjBvC;AAmBTC,YAAAA,SAnBS,GAmBG,EAnBH;AAqBTC,YAAAA,UArBS,GAqBKN,KAAK,IAAIA,KAAK,CAACO,MAAhB,GAA0B,CAA1B,GAA8BC,UAAU,CAAC,cAAD,CArB5C,EAqB6D;;AArB7D,gBAuBVV,MAvBU;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAyBf;AACMW,YAAAA,WA1BS,GA0BKC,MAAM,CAACC,WAAP,GAAqBhB,EAAE,CAACiB,qBAAH,GAA2BC,GAAhD,GAAsDT,YAAtD,GAAqEE,UA1B1E;AA2BTL,YAAAA,MA3BS,GA2BAQ,WAAW,GAAGJ,SAAd,GAA0BA,SAA1B,GAAsCI,WA3BtC;AA6BfX,YAAAA,MAAM,CAACgB,MAAP,CAAcC,SAAd,CAAwBd,MAAxB;AACAH,YAAAA,MAAM,CAACkB,QAAP;;AA9Be;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARtB,QAAQ;AAAA;AAAA;AAAA,GAAd,C,CAiCA;;;AACA,SAASc,UAAT,CAAoBS,EAApB,EAAwB;AACtB,MAAI,CAACC,QAAQ,CAACC,cAAT,CAAwBF,EAAxB,CAAL,EAAkC;AAAE,WAAO,CAAP;AAAU;;AAC9C,SAAOC,QAAQ,CAACC,cAAT,CAAwBF,EAAxB,EAA4BG,YAAnC;AACD;;AAED,eAAe;AACb;AACAC,EAAAA,IAFa,gBAER1B,EAFQ,EAEJC,OAFI,EAEKC,KAFL,EAEY;AACvB;AACAF,IAAAA,EAAE,CAAC2B,cAAH,wEAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZ5B,QAAQ,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,CADI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAApB,GAFuB,CAKvB;AACA;;AACAa,IAAAA,MAAM,CAACa,gBAAP,CAAwB,QAAxB,EAAkC5B,EAAE,CAAC2B,cAArC;AACD,GAVY;AAWbE,EAAAA,MAXa,kBAWN7B,EAXM,EAWFC,OAXE,EAWOC,KAXP,EAWc;AACzBH,IAAAA,QAAQ,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,CAAR;AACD,GAbY;AAcb;AACM4B,EAAAA,QAfO,oBAeE9B,EAfF,EAeMC,OAfN,EAeeC,KAff,EAesB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAC3BH,QAAQ,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,CADmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAElC,GAjBY;AAkBb;AACA6B,EAAAA,MAnBa,kBAmBN/B,EAnBM,EAmBF;AACT;AACA;AACAe,IAAAA,MAAM,CAACiB,mBAAP,CAA2B,QAA3B,EAAqChC,EAAE,CAAC2B,cAAxC;AACD;AAvBY,CAAf","sourcesContent":["// bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。\r\n// inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。\r\n// unbind：只调用一次，指令与元素解绑时调用。\r\n\r\n// 设置表格高度\r\nconst doResize = async(el, binding, vnode) => {\r\n  // 获取表格Dom对象\r\n  const {\r\n    componentInstance: $table\r\n  } = await vnode\r\n  // 获取调用传递过来的数据\r\n  const {\r\n    value\r\n  } = binding\r\n\r\n  if (!$table.height) {\r\n    throw new Error(`el-$table must set the height. Such as height='100px'`)\r\n  } else if ($table.height.includes('px')) {\r\n    return\r\n  }\r\n\r\n  // 获取距底部距离（用于展示页码等信息）\r\n  const bottomOffset = (value && value.bottomOffset) || 20\r\n\r\n  const minHeight = 82\r\n\r\n  const pageHeight = (value && value.noPage) ? 0 : getOffsetH('vpage-footer') // 分页高度\r\n\r\n  if (!$table) return\r\n\r\n  // 计算列表高度并设置\r\n  const totalHeight = window.innerHeight - el.getBoundingClientRect().top - bottomOffset - pageHeight\r\n  const height = totalHeight < minHeight ? minHeight : totalHeight\r\n\r\n  $table.layout.setHeight(height)\r\n  $table.doLayout()\r\n}\r\n\r\n// 获取页面元素的 offsetHeight\r\nfunction getOffsetH(id) {\r\n  if (!document.getElementById(id)) { return 0 }\r\n  return document.getElementById(id).offsetHeight\r\n}\r\n\r\nexport default {\r\n  // 初始化设置\r\n  bind(el, binding, vnode) {\r\n    // 设置resize监听方法\r\n    el.resizeListener = async() => {\r\n      await doResize(el, binding, vnode)\r\n    }\r\n    // 绑定监听方法到addResizeListener\r\n    // addResizeListener(window.document.body, el.resizeListener)\r\n    window.addEventListener('resize', el.resizeListener)\r\n  },\r\n  update(el, binding, vnode) {\r\n    doResize(el, binding, vnode)\r\n  },\r\n  // 绑定默认高度\r\n  async inserted(el, binding, vnode) {\r\n    await doResize(el, binding, vnode)\r\n  },\r\n  // 销毁时设置\r\n  unbind(el) {\r\n    // 移除resize监听\r\n    // removeResizeListener(el, el.resizeListener)\r\n    window.removeEventListener('resize', el.resizeListener)\r\n  }\r\n}\r\n\r\n"]}]}