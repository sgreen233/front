{"remainingRequest":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\software\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\front\\src\\components\\ElUploadSelf.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\front\\src\\components\\ElUploadSelf.vue","mtime":1636596374373},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\software\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5sYXN0LWluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXBsYW9kJywKICAvLyDpu5jorqTmg4XlhrXkuIvvvIzkuIDkuKrnu4Tku7bkuIrnmoQgdi1tb2RlbCDkvJrmioogdmFsdWUg55So5L2cIHByb3Ag5LiU5oqKIGlucHV0IOeUqOS9nCBldmVudAogIG1vZGVsOiB7CiAgICBwcm9wOiAndmFsdWUnLAogICAgLy8g5rOo5oSP77yM5pivcHJvcO+8jOS4jeW4pnMKICAgIGV2ZW50OiAnaW5wdXQnCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIC8vIOeItue7hOS7tiB2LW1vZGVsIOe7keWumuWAvAogICAgbGltaXQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9LAogICAgLy8g5paH5Lu25LiK5Lyg5pWw6YeP6ZmQ5Yi2CiAgICBsaXN0VHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICd0ZXh0JwogICAgfSwKICAgIC8vIOmZiOWIl+aWueW8j++8jOivpuingSBFbGVtZW50IFVJCiAgICBkcmFnOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5piv5ZCm5pSv5oyB5ouW5ou9CiAgICBtdWx0aXBsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOaYr+WQpuaUr+aMgeWkmumAiQogICAgZmlsZVR5cGVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIC8vIOaUr+aMgeaWh+S7tuexu+WeiwogICAgc2hvd0xpbWl0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9IC8vIOaYr+WQpuaYvuekuumZkOWItuaVsOWtlwoKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlTGlzdDogdGhpcy52YWx1ZSwKICAgICAgLy8g5LiK5Lyg5paH5Lu255qE5pWw5o2u5Y+C5pWwCiAgICAgIGRhdGFPYmo6IHt9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nSW1hZ2VVcmw6ICcnCiAgICB9OwogIH0sCiAgLy8gY3JlYXRlZCgpIHsKICAvLyAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZUxpc3QsICdmaWxlTGlzdCcpCiAgLy8gfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZmlsZUxpc3QpOwogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCBmaWxlLCBmaWxlTGlzdCk7CiAgICB9LAogICAgLy8g5Yig6Zmk5paH5Lu26Kem5Y+R5LqL5Lu2CiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZmlsZUxpc3QpOwogICAgICB0aGlzLiRlbWl0KCdyZW1vdmUnLCBmaWxlLCBmaWxlTGlzdCk7CiAgICB9LAogICAgLy8gLy8g6ZmQ5Yi25paH5Lu25pWw6YePCiAgICAvLyBoYW5kbGVFeGNlZWQoZmlsZXMsIGZpbGVMaXN0KSB7CiAgICAvLyAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygKICAgIC8vICAgICBg5b2T5YmN6ZmQ5Yi26YCJ5oupICR7dGhpcy5saW1pdH0g5Liq5paH5Lu277yM5pys5qyh6YCJ5oup5LqGICR7ZmlsZXMubGVuZ3RofSDkuKrmlofku7bvvIzlhbHpgInmi6nkuoYgJHtmaWxlcy5sZW5ndGggKwogICAgLy8gICAgIGZpbGVMaXN0Lmxlbmd0aH0g5Liq5paH5Lu2YAogICAgLy8gICApCiAgICAvLyB9LAogICAgLy8g5LiK5Lyg5LmL5YmN55qE5Zue6LCDCiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHZhciBpc0x0U2l6ZSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgdGhpcy5DT05TVEFOVC5JTUFHRV9NQVhfU0laRTsKCiAgICAgIGlmICghaXNMdFNpemUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIlx1NEUwQVx1NEYyMFx1NTZGRVx1NzI0N1x1NTkyN1x1NUMwRlx1NEUwRFx1ODBGRFx1OEQ4NVx1OEZDNyAiLmNvbmNhdCh0aGlzLkNPTlNUQU5ULklNQUdFX01BWF9TSVpFLCAiIE1CISIpKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBmaWxlTmFtZSA9IGZpbGUubmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgZmlsZU5hbWVMZW5ndGggPSBmaWxlLm5hbWUubGVuZ3RoOwogICAgICB2YXIgZmlsZUZvcm1hdCA9IGZpbGUubmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUgKyAxLCBmaWxlTmFtZUxlbmd0aCk7CgogICAgICBpZiAodGhpcy5maWxlVHlwZXMuaW5kZXhPZihmaWxlRm9ybWF0KSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gZmlsZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+S4iuS8oOaWh+S7tuWPquiDveaYr+WbvueJh+agvOW8jyEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXc6IGZ1bmN0aW9uIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUsICdmaWxlJyk7CiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["ElUploadSelf.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-upload ref=\"upload\" action :class=\"{hide:fileList.length>=limit}\" list-type=\"picture-card\" :file-list=\"fileList\" :drag=\"drag\" :multiple=\"multiple\" :limit=\"limit\" :http-request=\"()=>{}\" :on-change=\"handleChange\" :before-upload=\"beforeUpload\" :auto-upload=\"false\" :on-preview=\"handlePictureCardPreview\" :on-remove=\"handleRemove\">\r\n      <div v-if=\"drag\">\r\n        <i class=\"el-icon-upload\" />\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n      </div>\r\n      <div v-else class=\"add-tip\">\r\n        <p :class=\"{'no-limit': !showLimit}\" style=\"font-size: 20px\">+</p>\r\n        <p v-if=\"showLimit\">{{ fileList.length + 1 }}/{{ limit }}</p>\r\n      </div>\r\n      <slot slot=\"tip\" name=\"tip\" />\r\n    </el-upload>\r\n    <el-dialog class=\"image-dialog\" :visible.sync=\"dialogVisible\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Uplaod',\r\n  // 默认情况下，一个组件上的 v-model 会把 value 用作 prop 且把 input 用作 event\r\n  model: {\r\n    prop: 'value', // 注意，是prop，不带s\r\n    event: 'input'\r\n  },\r\n  props: {\r\n    value: { type: Array, default: () => [] }, // 父组件 v-model 绑定值\r\n    limit: { type: Number, default: 1 }, // 文件上传数量限制\r\n    listType: { type: String, default: 'text' }, // 陈列方式，详见 Element UI\r\n    drag: { type: Boolean, default: false }, // 是否支持拖拽\r\n    multiple: { type: Boolean, default: false }, // 是否支持多选\r\n    fileTypes: { type: Array, required: true }, // 支持文件类型\r\n    showLimit: { type: Boolean, default: false } // 是否显示限制数字\r\n  },\r\n  data() {\r\n    return {\r\n      fileList: this.value,\r\n      // 上传文件的数据参数\r\n      dataObj: {},\r\n      dialogVisible: false,\r\n      dialogImageUrl: ''\r\n    }\r\n  },\r\n  // created() {\r\n  //   console.log(this.fileList, 'fileList')\r\n  // },\r\n  methods: {\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList\r\n      this.$emit('input', fileList)\r\n      this.$emit('change', file, fileList)\r\n    },\r\n    // 删除文件触发事件\r\n    handleRemove(file, fileList) {\r\n      this.fileList = fileList\r\n      this.$emit('input', fileList)\r\n      this.$emit('remove', file, fileList)\r\n    },\r\n    // // 限制文件数量\r\n    // handleExceed(files, fileList) {\r\n    //   this.$message.warning(\r\n    //     `当前限制选择 ${this.limit} 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length +\r\n    //     fileList.length} 个文件`\r\n    //   )\r\n    // },\r\n    // 上传之前的回调\r\n    beforeUpload(file) {\r\n      const isLtSize = file.size / 1024 / 1024 < this.CONSTANT.IMAGE_MAX_SIZE\r\n      if (!isLtSize) {\r\n        this.$message.warning(`上传图片大小不能超过 ${this.CONSTANT.IMAGE_MAX_SIZE} MB!`)\r\n        return false\r\n      }\r\n      const fileName = file.name.lastIndexOf('.')\r\n      const fileNameLength = file.name.length\r\n      const fileFormat = file.name.substring(fileName + 1, fileNameLength)\r\n      if (this.fileTypes.indexOf(fileFormat) !== -1) {\r\n        return file\r\n      } else {\r\n        this.$message.warning('上传文件只能是图片格式!')\r\n        return false\r\n      }\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      console.log(file, 'file')\r\n      this.dialogImageUrl = file.url\r\n      this.dialogVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-upload-list__item,\r\n::v-deep .el-upload--picture-card {\r\n  height: 60px;\r\n  width: 60px;\r\n  line-height: 60px;\r\n}\r\n.hide {\r\n  ::v-deep .el-upload--picture-card {\r\n    display: none;\r\n  }\r\n}\r\n.add-tip {\r\n  margin: 10px auto;\r\n  p {\r\n    margin: 0 auto;\r\n    line-height: 20px;\r\n  }\r\n  .no-limit {\r\n    margin-top: 20px;\r\n  }\r\n}\r\n\r\n::v-deep .el-icon-upload-success,\r\n::v-deep .el-icon-check {\r\n  position: absolute;\r\n  right: 15px;\r\n}\r\n\r\n.image-dialog ::v-deep .el-dialog__body {\r\n  border-top: 0 !important;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}